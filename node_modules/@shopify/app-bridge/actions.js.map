{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///actions.js","webpack:///webpack/bootstrap 852003608eb42383a33a","webpack:///./src/actions/Error/index.ts","webpack:///./src/actions/types.ts","webpack:///./src/actions/helper.ts","webpack:///./src/actions/Button/index.ts","webpack:///./src/actions/ButtonGroup/index.ts","webpack:///./src/actions/buttonHelper.ts","webpack:///./src/actions/Navigation/helper.ts","webpack:///./src/actions/Navigation/History/types.ts","webpack:///./src/actions/Navigation/Redirect/types.ts","webpack:///./src/util/collection.ts","webpack:///./src/actions/validator.ts","webpack:///./src/actions/Error/types.ts","webpack:///./src/actions/constants.ts","webpack:///./src/actions/Button/types.ts","webpack:///./src/actions/ButtonGroup/types.ts","webpack:///./src/actions/Cart/types.ts","webpack:///./src/actions/Flash/types.ts","webpack:///./src/actions/Loading/types.ts","webpack:///./src/actions/Modal/types.ts","webpack:///./src/actions/Navigation/History/actions.ts","webpack:///./src/actions/Navigation/Redirect/actions.ts","webpack:///./src/actions/Print/types.ts","webpack:///./src/actions/ResourcePicker/types.ts","webpack:///./src/actions/TitleBar/types.ts","webpack:///./src/actions/index.ts","webpack:///./src/actions/Print/index.ts","webpack:///./src/actions/Error/actions.ts","webpack:///./src/actions/merge.ts","webpack:///./src/actions/uuid.ts","webpack:///./package.json","webpack:///./src/actions/Button/actions.ts","webpack:///./src/actions/ButtonGroup/actions.ts","webpack:///./src/actions/Cart/index.ts","webpack:///./src/actions/Cart/actions.ts","webpack:///./src/actions/Flash/index.ts","webpack:///./src/actions/Flash/actions.ts","webpack:///./src/actions/Loading/index.ts","webpack:///./src/actions/Loading/actions.ts","webpack:///./src/actions/Modal/index.ts","webpack:///./src/actions/Modal/actions.ts","webpack:///./src/util/@shopify/safe-redirect/index.ts","webpack:///./src/actions/Navigation/index.ts","webpack:///./src/actions/Navigation/validator.ts","webpack:///./src/actions/Navigation/History/index.ts","webpack:///./src/actions/Navigation/Redirect/index.ts","webpack:///./src/actions/Print/actions.ts","webpack:///./src/actions/ResourcePicker/index.ts","webpack:///./src/actions/ResourcePicker/actions.ts","webpack:///./src/actions/TitleBar/index.ts","webpack:///./src/actions/TitleBar/actions.ts","webpack:///./src/actions/buttonGroupHelper.ts"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","__esModule","undefined","default","headers","common","Accept","adapter","transformRequest","transformResponse","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","object","property","prototype","hasOwnProperty","p","s","__export","value","Group","ComponentType","actionWrapper","action","__assign","version","getVersion","info","getEventNameSpace","group","eventName","component","eventNameSpace","toUpperCase","subgroups_1","subgroups","type","length","SEPARATOR","forEach","subgroup","index","constants_1","PREFIX","isValidOptionalNumber","isValidOptionalString","unsubscribeActions","subscriptions","defaultGroup","reassign","subscription","updateSubscribe","unsubscribe","sanitizeProps","obj","keys","newObj","key","updateActionFromPayload","newProps","id","assign","getMergedProps","props","merged","merge_1","forEachInEnum","types","callback","findMatchInEnum","lookup","match","find","__extends","extendStatics","setPrototypeOf","__proto__","Array","b","__","constructor","create","t","arguments","__importDefault","mod","Error_1","collection_1","types_1","uuid_1","ActionSet","app","throwError","ActionType","INVALID_OPTIONS","updateSubscription","subscriptionToRemove","currentIndex","eventType","findIndex","subscribe","error","_this","subscriptionIndices","Action","push","map","toRemove","removeFromCollection","removed","eventComponent","boundedCallback","bind","isErrorEventName","Error","resetOnly","ActionSetWithChildren","_super","apply","children","unsubscribeChildren","resetParentOnly","child","isPrototypeOf","getChild","childIndex","getChildIndex","getChildSubscriptions","filter","sub","addChild","removeChild","subs","subscribeToChild","e","currentSubscriptions","childComponent","getUpdatedChildActions","newActions","currentActions","uniqueActions","actionsArr","indexOf","newActionIds","unusedActions","pop","getSingleButton","button","updateCb","Button_1","UPDATE","payload","isValidRelativePath","path","charAt","isValidAbsolutePath","ResourceType","addAndRemoveFromCollection","collection","item","then","idx","splice","isAppBridgeAction","toString","startsWith","isFromApp","source","apiKey","isAppMessage","event","data","validatedActionPayload","origin","Actions","Button","validationError","ButtonGroup","Cart","Flash","Modal","TitleBar","Navigation","Print","Loading","ResourcePicker","invalidAction","validatedAction","_i","MANDATORY_ACTION_PROPS_1","MANDATORY_ACTION_PROPS","prop","__importStar","result","k","AppActionType","Icon","Style","FooterActionType","Size","helper_1","types_2","PUSH","replace","REPLACE","invalidPayload","Message","MISSING_PAYLOAD","helper_2","invalidActionType","History","dispatch","INVALID_ACTION_TYPE","isResourcePayload","resource","isCreateResourcePayload","isProductVariantResourcePayload","castResource","variant","isProductVariantCreateResourcePayload","toAdminPath","GROUP","ADMIN_PATH","toAdminSection","ADMIN_SECTION","toRemote","REMOTE","toApp","APP","isValidAdminResource","section","valid","resourceName","url","isAdminPathPayload","isAdminSectionPayload","isRemotePayload","Redirect","adminPathPayload","adminSectionPayload","remotePayload","CollectionSortOrder","FulfillmentServiceType","WeightUnit","ProductVariantInventoryPolicy","ProductVariantInventoryManagement","ButtonsActionType","validator_1","errorActionWrapperWithId","message","castPayload","INVALID_PAYLOAD","INVALID_ACTION","unexpectedAction","UNEXPECTED_ACTION","unsupportedOperationAction","UNSUPPORTED_OPERATION","persistenceAction","PERSISTENCE","networkAction","NETWORK","permissionAction","PERMISSION","fromAction","errorMessage","AppBridgeError","captureStackTrace","stack","mergeProps","getPrototypeOf","clone","isArray","asHex","from","slice","join","getRandomBytes","size","Uint8Array","window","crypto","buffer","randomValues","getRandomValues","Math","random","generateUuid","clockSeqHiAndReserved","timeHiAndVersion","main","files","private","publishConfig","access","@shopify:registry","repository","author","license","scripts","build","build:docs","check","clean","lint","prepublishOnly","start","test","test:CI","test:coverage","test:watch","watch","devDependencies","@shopify/shopify-express","@types/enzyme","@types/jest","@types/react","@types/react-dom","@types/react-hot-loader","@types/react-redux","@types/react-router-dom","@types/react-router-redux","@types/react-test-renderer","@types/react-transition-group","@types/webpack-env","awesome-typescript-loader","babel-plugin-system-import-transformer","css-loader","enzyme","enzyme-adapter-react-15","express-session","hoist-non-react-statics","html-webpack-plugin","jest","postcss-shopify","prettier","react","react-dom","react-redux","react-test-renderer","react-transition-group","redux","redux-devtools-extension","style-loader","ts-jest","tslint","tslint-config-shopify","typedoc","typedoc-plugin-external-module-name","typedoc-plugin-markdown","typescript","webpack","webpack-dev-server","webpack-fix-default-import-plugin","bracketSpacing","printWidth","singleQuote","trailingComma","globals","babelConfig","plugins","sourceMaps","setupTestFrameworkScriptFile","testRegex","testURL","transform",".tsx?$","moduleFileExtensions","collectCoverageFrom","moduleDirectories","moduleNameMapper","app-bridge/info","getSafeButtonProps","clickButton","CLICK","buttonPayload","update","label","INVALID_PAYLOAD_ID","isValidButtonProps","options","disabled","set","icon","style","shouldUpdate","mergedOptions","validateOptions","updateAction","buttonProps","errorAction","buttonActionWrapper","isGroupedButton","castOptions","buttons","isGroupedButtonPayload","getSafeButtonGroupProps","isValidButtonGroupProps","buttonGroup","_a","buttonHelper_1","buttonsOptions","getButtons","updateButtons","newPayload","updated","buttonOptions","singleButton","buttonGroupProps","isValidAddress","address","address1","address2","city","company","firstName","lastName","phone","provice","country","zip","proviceCode","countryCode","isValidAddresses","addresses","every","isValidCart","cart","cartDiscount","isValidDiscount","customer","isValidCustomer","grandTotal","lineItems","isValidLineItems","isValidNoteAttributes","noteAttributes","subTotal","taxTotal","email","note","discount","amount","discountDescription","isValidLineItem","lineItem","price","quantity","title","variantId","isValidProperties","properties","isValidPropertiesKey","FETCH","SET_CUSTOMER","REMOVE_CUSTOMER","ADD_CUSTOMER_ADDRESS","UPDATE_CUSTOMER_ADDRESS","SET_DISCOUNT","REMOVE_DISCOUNT","SET_PROPERTIES","REMOVE_PROPERTIES","CLEAR","ADD_LINE_ITEM","UPDATE_LINE_ITEM","REMOVE_LINE_ITEM","SET_LINE_ITEM_DISCOUNT","REMOVE_LINE_ITEM_DISCOUNT","SET_LINE_ITEM_PROPERTIES","REMOVE_LINE_ITEM_PROPERTIES","dispatchCartAction","show","flashMessage","SHOW","clear","isValidFlashProps","duration","isDismissible","isError","openAction","START","stop","STOP","openModal","modalPayload","OPEN","closeModal","modalClosePayload","CLOSE","clickFooterButton","FOOTER_BUTTON_PROPS","isValidSrc","localOrigin","hostName","URL","hostname","safe_redirect_1","isSafe","requireAbsolute","requireSSL","whitelist","isValidModalProps","FOOTER_BUTTON_CLICK","FOOTER_BUTTON_UPDATE","isIframeModal","isMessageModal","isValidModalFooter","footer","isValidModalSize","secondary","primary","secondary_1","sizeOption","Small","footerPrimary","footerSecondary","footerPrimaryOptions","footerSecondaryOptions","close","setFooterPrimaryButton","newOptions","getChildButton","updatePrimaryFooterButton","setFooterSecondaryButtons","newButtons","currentOptions","footerOptions","updateSecondaryFooterButton","newAction","currentAction","currentButtons","updatedButton","ModalMessage","ModalIframe","redirectUrl","_b","_c","_d","subdomains","matchPath","FILE_URI_MATCH","pathMatches","DUMMY_HOSTNAME","INVALID_RELATIVE_URL","VALID_PROTOCOLS","includes","protocol","username","password","hostIsValid","subdomain","TypeError","some","endsWith","originalUrl","matcher","pathname","originalPathname","split","makeSafe","fallback","encodeURI","actions_2","actions_1","select","SELECT","open","cancel","CANCEL","isValidResourceType","resourceType","selection","initialQuery","selectMultiple","showHidden","Product","showVariants","Boolean","baseOptions","clickActionButton","TITLEBAR_BUTTON_PROPS","clickBreadcrumb","BREADCRUMB_BUTTON_PROPS","isValidTitleBarPayload","isValidTitleBarProps","isValidTitleBarButtons","isValidTitleBarBreadcrumbs","breadcrumbs","ButtonGroup_1","BUTTON_CLICK","BREADCRUMBS_CLICK","BUTTON_UPDATE","BREADCRUMBS_UPDATE","BUTTON_GROUP_UPDATE","buttonGroupHelper_1","primaryOptions","secondaryOptions","breadcrumbsOption","breadcrumb","setBreadcrumbs","setPrimaryButton","setSecondaryButton","getButton","getGroupedButton","updatePrimaryButton","updateSecondaryButtons","buttonToUpdate","updateBreadcrumbButton"],"mappings":"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","file":"actions.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"app-bridge\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"app-bridge\"] = factory();\n\telse\n\t\troot[\"app-bridge\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"app-bridge\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"app-bridge\"] = factory();\n\telse\n\t\troot[\"app-bridge\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\t(function (module) {\n/******/ \t\t  if (module.exports\n/******/ \t\t    && !module.exports.__esModule\n/******/ \t\t    && module.exports.default === undefined\n/******/ \t\t  ) {\n/******/ \t\t    if (module.exports.headers\n/******/ \t\t      && module.exports.headers.common\n/******/ \t\t      && module.exports.headers.common.Accept\n/******/ \t\t      && module.exports.adapter\n/******/ \t\t      && module.exports.transformRequest\n/******/ \t\t      && module.exports.transformResponse\n/******/ \t\t    ) {\n/******/ \t\t      return;\n/******/ \t\t    }\n/******/ \t\t    module.exports.default = module.exports;\n/******/ \t\t  }\n/******/ \t\t})(module);\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 24);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(28));\r\n__export(__webpack_require__(11));\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module Types\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Group;\r\n(function (Group) {\r\n    Group[\"Button\"] = \"Button\";\r\n    Group[\"ButtonGroup\"] = \"ButtonGroup\";\r\n    Group[\"Cart\"] = \"Cart\";\r\n    Group[\"Error\"] = \"Error\";\r\n    Group[\"Flash\"] = \"Flash\";\r\n    Group[\"Loading\"] = \"Loading\";\r\n    Group[\"Modal\"] = \"Modal\";\r\n    Group[\"Navigation\"] = \"Navigation\";\r\n    Group[\"Print\"] = \"Print\";\r\n    Group[\"TitleBar\"] = \"TitleBar\";\r\n    Group[\"ResourcePicker\"] = \"Resource_Picker\";\r\n})(Group = exports.Group || (exports.Group = {}));\r\nvar ComponentType;\r\n(function (ComponentType) {\r\n    ComponentType[\"Button\"] = \"Button\";\r\n    ComponentType[\"ButtonGroup\"] = \"ButtonGroup\";\r\n})(ComponentType = exports.ComponentType || (exports.ComponentType = {}));\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Error_1 = __webpack_require__(0);\r\nvar collection_1 = __webpack_require__(9);\r\nvar constants_1 = __webpack_require__(12);\r\nvar merge_1 = __importDefault(__webpack_require__(29));\r\nvar types_1 = __webpack_require__(1);\r\nvar uuid_1 = __importDefault(__webpack_require__(30));\r\nvar info = __webpack_require__(31);\r\nvar SEPARATOR = '::';\r\nfunction actionWrapper(action) {\r\n    return __assign({}, action, { version: getVersion() });\r\n}\r\nexports.actionWrapper = actionWrapper;\r\nfunction getVersion() {\r\n    return info.version;\r\n}\r\nexports.getVersion = getVersion;\r\nfunction getEventNameSpace(group, eventName, component) {\r\n    var eventNameSpace = group.toUpperCase();\r\n    if (component) {\r\n        var subgroups_1 = component.subgroups, type = component.type;\r\n        if (subgroups_1 && subgroups_1.length > 0) {\r\n            eventNameSpace += eventNameSpace.length > 0 ? SEPARATOR : '';\r\n            subgroups_1.forEach(function (subgroup, index) {\r\n                eventNameSpace += \"\" + subgroup.toUpperCase() + (index < subgroups_1.length - 1 ? SEPARATOR : '');\r\n            });\r\n        }\r\n        if (type !== group && type) {\r\n            eventNameSpace += \"\" + (eventNameSpace.length > 0 ? SEPARATOR : '') + type.toUpperCase();\r\n        }\r\n    }\r\n    if (eventNameSpace) {\r\n        eventNameSpace += \"\" + (eventNameSpace.length > 0 ? SEPARATOR : '') + eventName.toUpperCase();\r\n    }\r\n    return \"\" + constants_1.PREFIX + SEPARATOR + eventNameSpace;\r\n}\r\nexports.getEventNameSpace = getEventNameSpace;\r\nfunction isValidOptionalNumber(value) {\r\n    return value === null || value === undefined || typeof value === 'number';\r\n}\r\nexports.isValidOptionalNumber = isValidOptionalNumber;\r\nfunction isValidOptionalString(value) {\r\n    return value === null || value === undefined || typeof value === 'string';\r\n}\r\nexports.isValidOptionalString = isValidOptionalString;\r\nvar ActionSet = /** @class */ (function () {\r\n    function ActionSet(app, type, group, id) {\r\n        this.subgroups = [];\r\n        this.subscriptions = [];\r\n        if (!app) {\r\n            Error_1.throwError(Error_1.ActionType.INVALID_OPTIONS, 'Missing required `app`');\r\n        }\r\n        this.id = id || uuid_1.default();\r\n        this.app = app;\r\n        this.type = type;\r\n        this.group = group;\r\n        this.defaultGroup = group;\r\n    }\r\n    Object.defineProperty(ActionSet.prototype, \"component\", {\r\n        get: function () {\r\n            return {\r\n                id: this.id,\r\n                subgroups: this.subgroups,\r\n                type: this.type,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ActionSet.prototype.updateSubscription = function (subscriptionToRemove, group, subgroups) {\r\n        var eventType = subscriptionToRemove.eventType, callback = subscriptionToRemove.callback, component = subscriptionToRemove.component;\r\n        var currentIndex;\r\n        currentIndex = this.subscriptions.findIndex(function (subscription) { return subscription === subscriptionToRemove; });\r\n        if (currentIndex >= 0) {\r\n            this.subscriptions[currentIndex].unsubscribe();\r\n        }\r\n        else {\r\n            currentIndex = undefined;\r\n        }\r\n        this.group = group;\r\n        this.subgroups = subgroups;\r\n        Object.assign(component, { subgroups: this.subgroups });\r\n        return this.subscribe(eventType, callback, component, currentIndex);\r\n    };\r\n    ActionSet.prototype.error = function (callback) {\r\n        var _this = this;\r\n        var subscriptionIndices = [];\r\n        forEachInEnum(Error_1.Action, function (eventNameSpace) {\r\n            // Keep track of subscription index so we can call unsubscribe later\r\n            // This ensure it will continue to work even when the subscription has been updated\r\n            subscriptionIndices.push(_this.subscriptions.length);\r\n            _this.subscribe(eventNameSpace, callback);\r\n        });\r\n        return function () {\r\n            var subscriptionsToRemove = subscriptionIndices.map(function (index) { return _this.subscriptions[index]; });\r\n            subscriptionsToRemove.forEach(function (toRemove) {\r\n                collection_1.removeFromCollection(_this.subscriptions, toRemove, function (removed) {\r\n                    removed.unsubscribe();\r\n                });\r\n            });\r\n        };\r\n    };\r\n    ActionSet.prototype.subscribe = function (eventName, callback, component, currentIndex) {\r\n        var _this = this;\r\n        var eventComponent = component || this.component;\r\n        var eventType = eventName.toUpperCase();\r\n        var boundedCallback = typeof currentIndex === 'number' ? callback : callback.bind(this);\r\n        var eventNameSpace;\r\n        if (Error_1.isErrorEventName(eventName)) {\r\n            eventNameSpace = getEventNameSpace(types_1.Group.Error, eventName, __assign({}, eventComponent, { type: '' }));\r\n        }\r\n        else {\r\n            eventNameSpace = getEventNameSpace(this.group, eventName, eventComponent);\r\n        }\r\n        var unsubscribe = this.app.subscribe(eventNameSpace, boundedCallback, component ? component.id : this.id);\r\n        var subscription = {\r\n            eventType: eventType,\r\n            unsubscribe: unsubscribe,\r\n            callback: boundedCallback,\r\n            component: eventComponent,\r\n            updateSubscribe: function (group, subgroups) {\r\n                return _this.updateSubscription.call(_this, subscription, group, subgroups);\r\n            },\r\n        };\r\n        if (typeof currentIndex === 'number' &&\r\n            currentIndex >= 0 &&\r\n            currentIndex < this.subscriptions.length) {\r\n            this.subscriptions[currentIndex] = subscription;\r\n        }\r\n        else {\r\n            this.subscriptions.push(subscription);\r\n        }\r\n        return unsubscribe;\r\n    };\r\n    ActionSet.prototype.unsubscribe = function (resetOnly) {\r\n        if (resetOnly === void 0) { resetOnly = false; }\r\n        unsubscribeActions(this.subscriptions, this.defaultGroup, resetOnly);\r\n        return this;\r\n    };\r\n    return ActionSet;\r\n}());\r\nexports.ActionSet = ActionSet;\r\nvar ActionSetWithChildren = /** @class */ (function (_super) {\r\n    __extends(ActionSetWithChildren, _super);\r\n    function ActionSetWithChildren() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.children = [];\r\n        return _this;\r\n    }\r\n    ActionSetWithChildren.prototype.unsubscribe = function (unsubscribeChildren, resetParentOnly) {\r\n        if (unsubscribeChildren === void 0) { unsubscribeChildren = true; }\r\n        if (resetParentOnly === void 0) { resetParentOnly = false; }\r\n        unsubscribeActions(this.subscriptions, this.defaultGroup, resetParentOnly);\r\n        this.children.forEach(function (child) {\r\n            if (ActionSetWithChildren.prototype.isPrototypeOf(child)) {\r\n                child.unsubscribe(unsubscribeChildren, unsubscribeChildren ? false : true);\r\n            }\r\n            else {\r\n                child.unsubscribe(unsubscribeChildren ? false : true);\r\n            }\r\n        });\r\n        return this;\r\n    };\r\n    ActionSetWithChildren.prototype.getChild = function (id) {\r\n        var childIndex = this.children.findIndex(function (child) { return child.id === id; });\r\n        return childIndex >= 0 ? this.children[childIndex] : undefined;\r\n    };\r\n    ActionSetWithChildren.prototype.getChildIndex = function (id) {\r\n        return this.children.findIndex(function (child) { return child.id === id; });\r\n    };\r\n    ActionSetWithChildren.prototype.getChildSubscriptions = function (id, eventType) {\r\n        return this.subscriptions.filter(function (sub) { return sub.component.id === id && (!eventType || eventType === sub.eventType); });\r\n    };\r\n    ActionSetWithChildren.prototype.addChild = function (child, group, subgroups) {\r\n        var _this = this;\r\n        var subscriptions = child.subscriptions;\r\n        var existingChild = this.getChild(child.id);\r\n        // Add child if it doesn't already exist\r\n        if (!existingChild) {\r\n            this.children.push(child);\r\n        }\r\n        if (!subscriptions || (group === child.group && subgroups === child.subgroups)) {\r\n            return this;\r\n        }\r\n        subscriptions.forEach(function (subscription) {\r\n            var updateSubscribe = subscription.updateSubscribe;\r\n            updateSubscribe(group, subgroups);\r\n        });\r\n        // Update child's group and subgroups\r\n        Object.assign(child, { group: group, subgroups: subgroups });\r\n        // Update child's children subscriptions\r\n        if (ActionSetWithChildren.prototype.isPrototypeOf(child)) {\r\n            child.children.forEach(function (c) { return _this.addChild(c, group, subgroups); });\r\n        }\r\n        return this;\r\n    };\r\n    ActionSetWithChildren.prototype.removeChild = function (id) {\r\n        var _this = this;\r\n        collection_1.removeFromCollection(this.children, this.getChild(id), function () {\r\n            var toBeRemoved = _this.subscriptions.filter(function (subs) { return subs.component.id === id; });\r\n            toBeRemoved.forEach(function (toRemove) {\r\n                collection_1.removeFromCollection(_this.subscriptions, toRemove, function (removed) {\r\n                    removed.unsubscribe();\r\n                });\r\n            });\r\n        });\r\n        return this;\r\n    };\r\n    ActionSetWithChildren.prototype.subscribeToChild = function (child, eventName, callback) {\r\n        var _this = this;\r\n        var boundedCallback = callback.bind(this);\r\n        if (eventName instanceof Array) {\r\n            eventName.forEach(function (e) { return _this.subscribeToChild(child, e, callback); });\r\n            return this;\r\n        }\r\n        if (typeof eventName !== 'string') {\r\n            return this;\r\n        }\r\n        var eventType = eventName.toUpperCase();\r\n        var currentSubscriptions = this.getChildSubscriptions(child.id, eventType);\r\n        if (currentSubscriptions.length > 0) {\r\n            // Subscription is already there, simply update it\r\n            currentSubscriptions.forEach(function (subs) { return subs.updateSubscribe(_this.group, child.subgroups); });\r\n        }\r\n        else {\r\n            var childComponent = {\r\n                id: child.id,\r\n                subgroups: child.subgroups,\r\n                type: child.type,\r\n            };\r\n            this.subscribe(eventType, boundedCallback, childComponent);\r\n        }\r\n        return this;\r\n    };\r\n    ActionSetWithChildren.prototype.getUpdatedChildActions = function (newActions, currentActions) {\r\n        if (newActions.length === 0) {\r\n            while (currentActions.length > 0) {\r\n                var action = currentActions.pop();\r\n                if (!action) {\r\n                    break;\r\n                }\r\n                this.removeChild(action.id);\r\n            }\r\n            return undefined;\r\n        }\r\n        // Only allow unique actions\r\n        var uniqueActions = newActions.filter(function (action, index, actionsArr) { return index === actionsArr.indexOf(action); });\r\n        var newActionIds = uniqueActions.map(function (action) { return action.id; });\r\n        // Remove unused actions\r\n        var unusedActions = currentActions.filter(function (action) {\r\n            return newActionIds.indexOf(action.id) < 0;\r\n        });\r\n        while (unusedActions.length > 0) {\r\n            var action = unusedActions.pop();\r\n            if (!action) {\r\n                break;\r\n            }\r\n            this.removeChild(action.id);\r\n        }\r\n        return uniqueActions;\r\n    };\r\n    return ActionSetWithChildren;\r\n}(ActionSet));\r\nexports.ActionSetWithChildren = ActionSetWithChildren;\r\nfunction unsubscribeActions(subscriptions, defaultGroup, reassign) {\r\n    if (reassign === void 0) { reassign = false; }\r\n    subscriptions.forEach(function (subscription) {\r\n        if (reassign) {\r\n            var updateSubscribe = subscription.updateSubscribe;\r\n            // TODO: Support cases where we don't wipe out group and subgroups to defaults\r\n            updateSubscribe(defaultGroup, []);\r\n        }\r\n        else {\r\n            var unsubscribe = subscription.unsubscribe;\r\n            unsubscribe();\r\n        }\r\n    });\r\n    if (!reassign) {\r\n        subscriptions.length = 0;\r\n    }\r\n}\r\nfunction sanitizeProps(obj, keys) {\r\n    var newObj = {};\r\n    keys.forEach(function (key) {\r\n        if (obj.hasOwnProperty(key)) {\r\n            newObj[key] = obj[key];\r\n        }\r\n    });\r\n    return newObj;\r\n}\r\nexports.sanitizeProps = sanitizeProps;\r\nfunction updateActionFromPayload(action, newProps) {\r\n    var id = action.id;\r\n    if (id === newProps.id) {\r\n        // Merge new properties\r\n        Object.assign(action, getMergedProps(action, newProps));\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexports.updateActionFromPayload = updateActionFromPayload;\r\nfunction getMergedProps(props, newProps) {\r\n    var merged = merge_1.default(props, newProps);\r\n    if (!merged) {\r\n        // tslint:disable-next-line:prefer-object-spread\r\n        var cloned = Object.assign(props, newProps);\r\n        return cloned;\r\n    }\r\n    return merged;\r\n}\r\nexports.getMergedProps = getMergedProps;\r\nfunction forEachInEnum(types, callback) {\r\n    Object.keys(types).forEach(function (key) {\r\n        callback(types[key]);\r\n    });\r\n}\r\nexports.forEachInEnum = forEachInEnum;\r\nfunction findMatchInEnum(types, lookup) {\r\n    var match = Object.keys(types).find(function (key) {\r\n        return lookup === types[key];\r\n    });\r\n    return match ? types[match] : undefined;\r\n}\r\nexports.findMatchInEnum = findMatchInEnum;\r\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(32));\r\n__export(__webpack_require__(13));\r\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(33));\r\n__export(__webpack_require__(14));\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Button_1 = __webpack_require__(3);\r\nfunction getSingleButton(action, button, subgroups, updateCb) {\r\n    action.addChild(button, action.group, subgroups);\r\n    action.subscribeToChild(button, Button_1.Action.UPDATE, updateCb);\r\n    return button.payload;\r\n}\r\nexports.getSingleButton = getSingleButton;\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction isValidRelativePath(path) {\r\n    return typeof path === 'string' && (path === '' || path.charAt(0) === '/');\r\n}\r\nexports.isValidRelativePath = isValidRelativePath;\r\nfunction isValidAbsolutePath(path) {\r\n    return typeof path === 'string' && path.match('^https?://');\r\n}\r\nexports.isValidAbsolutePath = isValidAbsolutePath;\r\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module History\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ActionType;\r\n(function (ActionType) {\r\n    ActionType[\"PUSH\"] = \"APP::NAVIGATION::HISTORY::PUSH\";\r\n    ActionType[\"REPLACE\"] = \"APP::NAVIGATION::HISTORY::REPLACE\";\r\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\r\nvar Action;\r\n(function (Action) {\r\n    Action[\"PUSH\"] = \"PUSH\";\r\n    Action[\"REPLACE\"] = \"REPLACE\";\r\n})(Action = exports.Action || (exports.Action = {}));\r\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Action;\r\n(function (Action) {\r\n    Action[\"ADMIN_PATH\"] = \"ADMIN::PATH\";\r\n    Action[\"ADMIN_SECTION\"] = \"ADMIN::SECTION\";\r\n    Action[\"REMOTE\"] = \"REMOTE\";\r\n    Action[\"APP\"] = \"APP\";\r\n})(Action = exports.Action || (exports.Action = {}));\r\nvar ActionType;\r\n(function (ActionType) {\r\n    ActionType[\"ADMIN_SECTION\"] = \"APP::NAVIGATION::REDIRECT::ADMIN::SECTION\";\r\n    ActionType[\"ADMIN_PATH\"] = \"APP::NAVIGATION::REDIRECT::ADMIN::PATH\";\r\n    ActionType[\"REMOTE\"] = \"APP::NAVIGATION::REDIRECT::REMOTE\";\r\n    ActionType[\"APP\"] = \"APP::NAVIGATION::REDIRECT::APP\";\r\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\r\nvar ResourceType;\r\n(function (ResourceType) {\r\n    ResourceType[\"Product\"] = \"products\";\r\n    ResourceType[\"Collection\"] = \"collections\";\r\n    ResourceType[\"Order\"] = \"orders\";\r\n    ResourceType[\"Customer\"] = \"customers\";\r\n    ResourceType[\"Discount\"] = \"discounts\";\r\n})(ResourceType = exports.ResourceType || (exports.ResourceType = {}));\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module util\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Add an item to a collection, return a function that can then be used to\r\n * remove the item from the collection. Optionally accepting a callback that is\r\n * invoked when the item is removed from the collection.\r\n */\r\nfunction addAndRemoveFromCollection(collection, item, then) {\r\n    collection.push(item);\r\n    return function () {\r\n        return removeFromCollection(collection, item, then);\r\n    };\r\n}\r\nexports.addAndRemoveFromCollection = addAndRemoveFromCollection;\r\n/**\r\n * Remove the item from the collection. Optionally accepting a callback that is\r\n * invoked when the item is removed from the collection.\r\n */\r\nfunction removeFromCollection(collection, item, then) {\r\n    var idx = collection.findIndex(function (i) { return i === item; });\r\n    if (idx >= 0) {\r\n        collection.splice(idx, 1);\r\n        if (then) {\r\n            then(item);\r\n        }\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexports.removeFromCollection = removeFromCollection;\r\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result[\"default\"] = mod;\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Actions = __importStar(__webpack_require__(24));\r\nvar Error_1 = __webpack_require__(0);\r\nvar constants_1 = __webpack_require__(12);\r\nvar MANDATORY_ACTION_PROPS = ['group', 'type', 'version'];\r\nfunction isAppBridgeAction(action) {\r\n    return (action instanceof Object &&\r\n        action.hasOwnProperty('type') &&\r\n        action.type.toString().startsWith(constants_1.PREFIX));\r\n}\r\nexports.isAppBridgeAction = isAppBridgeAction;\r\nfunction isFromApp(action) {\r\n    if (typeof action !== 'object' || typeof action.source !== 'object') {\r\n        return false;\r\n    }\r\n    return typeof action.source.apiKey === 'string';\r\n}\r\nexports.isFromApp = isFromApp;\r\nfunction isAppMessage(event) {\r\n    if (typeof event !== 'object' || !event.data || typeof event.data !== 'object') {\r\n        return false;\r\n    }\r\n    var data = event.data;\r\n    return data.hasOwnProperty('type') && (data.type === 'getState' || data.type === 'dispatch');\r\n}\r\nexports.isAppMessage = isAppMessage;\r\nfunction validatedActionPayload(action, origin) {\r\n    switch (action.group) {\r\n        case Actions.Group.Button:\r\n            return Actions.Button.validationError(action) || action;\r\n        case Actions.Group.ButtonGroup:\r\n            return Actions.ButtonGroup.validationError(action) || action;\r\n        case Actions.Group.Cart:\r\n            return Actions.Cart.validationError(action) || action;\r\n        case Actions.Group.Flash:\r\n            return Actions.Flash.validationError(action) || action;\r\n        case Actions.Group.Modal:\r\n            return Actions.Modal.validationError(action, origin) || action;\r\n        case Actions.Group.TitleBar:\r\n            return Actions.TitleBar.validationError(action) || action;\r\n        case Actions.Group.Navigation:\r\n            return Actions.Navigation.validationError(action) || action;\r\n        case Actions.Group.Error:\r\n            return action;\r\n        case Actions.Group.Print:\r\n            return Actions.Print.validationError(action) || action;\r\n        case Actions.Group.Loading:\r\n            return Actions.Loading.validationError(action) || action;\r\n        case Actions.Group.ResourcePicker:\r\n            return Actions.ResourcePicker.validationError(action) || action;\r\n        default:\r\n            return Error_1.invalidAction(action, 'Unknown or unsupported action group');\r\n    }\r\n}\r\nexports.validatedActionPayload = validatedActionPayload;\r\nfunction validatedAction(action, origin) {\r\n    if (!isAppBridgeAction(action)) {\r\n        return action;\r\n    }\r\n    for (var _i = 0, MANDATORY_ACTION_PROPS_1 = MANDATORY_ACTION_PROPS; _i < MANDATORY_ACTION_PROPS_1.length; _i++) {\r\n        var prop = MANDATORY_ACTION_PROPS_1[_i];\r\n        if (!action.hasOwnProperty(prop) || typeof action[prop] !== 'string') {\r\n            return Error_1.invalidAction(action, \"Missing or invalid \" + prop);\r\n        }\r\n    }\r\n    return validatedActionPayload(action, origin);\r\n}\r\nexports.validatedAction = validatedAction;\r\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Action;\r\n(function (Action) {\r\n    Action[\"INVALID_ACTION\"] = \"INVALID_ACTION\";\r\n    Action[\"INVALID_ACTION_TYPE\"] = \"INVALID_ACTION_TYPE\";\r\n    Action[\"INVALID_OPTIONS\"] = \"INVALID_OPTIONS\";\r\n    Action[\"INVALID_PAYLOAD\"] = \"INVALID_PAYLOAD\";\r\n    Action[\"UNEXPECTED_ACTION\"] = \"UNEXPECTED_ACTION\";\r\n    Action[\"PERSISTENCE\"] = \"PERSISTENCE\";\r\n    Action[\"UNSUPPORTED_OPERATION\"] = \"UNSUPPORTED_OPERATION\";\r\n    Action[\"NETWORK\"] = \"NETWORK\";\r\n    Action[\"PERMISSION\"] = \"PERMISSION\";\r\n})(Action = exports.Action || (exports.Action = {}));\r\nvar ActionType;\r\n(function (ActionType) {\r\n    ActionType[\"INVALID_ACTION\"] = \"APP::ERROR::INVALID_ACTION\";\r\n    ActionType[\"INVALID_ACTION_TYPE\"] = \"APP::ERROR::INVALID_ACTION_TYPE\";\r\n    ActionType[\"INVALID_PAYLOAD\"] = \"APP::ERROR::INVALID_PAYLOAD\";\r\n    ActionType[\"INVALID_OPTIONS\"] = \"APP::ERROR::INVALID_OPTIONS\";\r\n    ActionType[\"UNEXPECTED_ACTION\"] = \"APP::ERROR::UNEXPECTED_ACTION\";\r\n    ActionType[\"PERSISTENCE\"] = \"APP::ERROR::PERSISTENCE\";\r\n    ActionType[\"UNSUPPORTED_OPERATION\"] = \"APP::ERROR::UNSUPPORTED_OPERATION\";\r\n    ActionType[\"NETWORK\"] = \"APP::ERROR::NETWORK\";\r\n    ActionType[\"PERMISSION\"] = \"APP::ERROR::PERMISSION\";\r\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\r\nvar AppActionType;\r\n(function (AppActionType) {\r\n    AppActionType[\"INVALID_CONFIG\"] = \"APP::ERROR:INVALID_CONFIG\";\r\n    AppActionType[\"MISSING_CONFIG\"] = \"APP::APP_ERROR::MISSING_CONFIG\";\r\n    AppActionType[\"MISSING_APP_BRIDGE_MIDDLEWARE\"] = \"APP::APP_ERROR::MISSING_APP_BRIDGE_MIDDLEWARE\";\r\n})(AppActionType = exports.AppActionType || (exports.AppActionType = {}));\r\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PREFIX = 'APP';\r\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module Button\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Action;\r\n(function (Action) {\r\n    Action[\"CLICK\"] = \"CLICK\";\r\n    Action[\"UPDATE\"] = \"UPDATE\";\r\n})(Action = exports.Action || (exports.Action = {}));\r\nvar ActionType;\r\n(function (ActionType) {\r\n    ActionType[\"CLICK\"] = \"APP::BUTTON::CLICK\";\r\n    ActionType[\"UPDATE\"] = \"APP::BUTTON::UPDATE\";\r\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\r\nvar Icon;\r\n(function (Icon) {\r\n    Icon[\"Print\"] = \"print\";\r\n})(Icon = exports.Icon || (exports.Icon = {}));\r\nvar Style;\r\n(function (Style) {\r\n    Style[\"Danger\"] = \"danger\";\r\n})(Style = exports.Style || (exports.Style = {}));\r\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module ButtonGroup\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Action;\r\n(function (Action) {\r\n    Action[\"UPDATE\"] = \"UPDATE\";\r\n})(Action = exports.Action || (exports.Action = {}));\r\nvar ActionType;\r\n(function (ActionType) {\r\n    ActionType[\"UPDATE\"] = \"APP::BUTTON::UPDATE\";\r\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\r\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module Cart\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ActionType;\r\n(function (ActionType) {\r\n    ActionType[\"FETCH\"] = \"APP::CART::FETCH\";\r\n    ActionType[\"UPDATE\"] = \"APP::CART::UPDATE\";\r\n    ActionType[\"SET_CUSTOMER\"] = \"APP::CART::SET_CUSTOMER\";\r\n    ActionType[\"REMOVE_CUSTOMER\"] = \"APP::CART::REMOVE_CUSTOMER\";\r\n    ActionType[\"ADD_CUSTOMER_ADDRESS\"] = \"APP::CART::ADD_CUSTOMER_ADDRESS\";\r\n    ActionType[\"UPDATE_CUSTOMER_ADDRESS\"] = \"APP::CART::UPDATE_CUSTOMER_ADDRESS\";\r\n    ActionType[\"SET_DISCOUNT\"] = \"APP::CART::SET_DISCOUNT\";\r\n    ActionType[\"REMOVE_DISCOUNT\"] = \"APP::CART::REMOVE_DISCOUNT\";\r\n    ActionType[\"SET_PROPERTIES\"] = \"APP::CART::SET_PROPERTIES\";\r\n    ActionType[\"REMOVE_PROPERTIES\"] = \"APP::CART::REMOVE_PROPERTIES\";\r\n    ActionType[\"CLEAR\"] = \"APP::CART::CLEAR\";\r\n    ActionType[\"ADD_LINE_ITEM\"] = \"APP::CART::ADD_LINE_ITEM\";\r\n    ActionType[\"UPDATE_LINE_ITEM\"] = \"APP::CART::UPDATE_LINE_ITEM\";\r\n    ActionType[\"REMOVE_LINE_ITEM\"] = \"APP::CART::REMOVE_LINE_ITEM\";\r\n    ActionType[\"SET_LINE_ITEM_DISCOUNT\"] = \"APP::CART::SET_LINE_ITEM_DISCOUNT\";\r\n    ActionType[\"REMOVE_LINE_ITEM_DISCOUNT\"] = \"APP::CART::REMOVE_LINE_ITEM_DISCOUNT\";\r\n    ActionType[\"SET_LINE_ITEM_PROPERTIES\"] = \"APP::CART::SET_LINE_ITEM_PROPERTIES\";\r\n    ActionType[\"REMOVE_LINE_ITEM_PROPERTIES\"] = \"APP::CART::REMOVE_LINE_ITEM_PROPERTIES\";\r\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\r\nvar Action;\r\n(function (Action) {\r\n    Action[\"FETCH\"] = \"FETCH\";\r\n    Action[\"UPDATE\"] = \"UPDATE\";\r\n    Action[\"SET_CUSTOMER\"] = \"SET_CUSTOMER\";\r\n    Action[\"REMOVE_CUSTOMER\"] = \"REMOVE_CUSTOMER\";\r\n    Action[\"ADD_CUSTOMER_ADDRESS\"] = \"ADD_CUSTOMER_ADDRESS\";\r\n    Action[\"UPDATE_CUSTOMER_ADDRESS\"] = \"UPDATE_CUSTOMER_ADDRESS\";\r\n    Action[\"SET_DISCOUNT\"] = \"SET_DISCOUNT\";\r\n    Action[\"REMOVE_DISCOUNT\"] = \"REMOVE_DISCOUNT\";\r\n    Action[\"SET_PROPERTIES\"] = \"SET_PROPERTIES\";\r\n    Action[\"REMOVE_PROPERTIES\"] = \"REMOVE_PROPERTIES\";\r\n    Action[\"CLEAR\"] = \"CLEAR\";\r\n    Action[\"ADD_LINE_ITEM\"] = \"ADD_LINE_ITEM\";\r\n    Action[\"UPDATE_LINE_ITEM\"] = \"UPDATE_LINE_ITEM\";\r\n    Action[\"REMOVE_LINE_ITEM\"] = \"REMOVE_LINE_ITEM\";\r\n    Action[\"SET_LINE_ITEM_DISCOUNT\"] = \"SET_LINE_ITEM_DISCOUNT\";\r\n    Action[\"REMOVE_LINE_ITEM_DISCOUNT\"] = \"REMOVE_LINE_ITEM_DISCOUNT\";\r\n    Action[\"SET_LINE_ITEM_PROPERTIES\"] = \"SET_LINE_ITEM_PROPERTIES\";\r\n    Action[\"REMOVE_LINE_ITEM_PROPERTIES\"] = \"REMOVE_LINE_ITEM_PROPERTIES\";\r\n})(Action = exports.Action || (exports.Action = {}));\r\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module Flash\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ActionType;\r\n(function (ActionType) {\r\n    ActionType[\"SHOW\"] = \"APP::FLASH::SHOW\";\r\n    ActionType[\"CLEAR\"] = \"APP::FLASH::CLEAR\";\r\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\r\nvar Action;\r\n(function (Action) {\r\n    Action[\"SHOW\"] = \"SHOW\";\r\n    Action[\"CLEAR\"] = \"CLEAR\";\r\n})(Action = exports.Action || (exports.Action = {}));\r\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module Loading\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ActionType;\r\n(function (ActionType) {\r\n    ActionType[\"START\"] = \"APP::LOADING::START\";\r\n    ActionType[\"STOP\"] = \"APP::LOADING::STOP\";\r\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\r\nvar Action;\r\n(function (Action) {\r\n    Action[\"START\"] = \"START\";\r\n    Action[\"STOP\"] = \"STOP\";\r\n})(Action = exports.Action || (exports.Action = {}));\r\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module Modal\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Action;\r\n(function (Action) {\r\n    Action[\"OPEN\"] = \"OPEN\";\r\n    Action[\"CLOSE\"] = \"CLOSE\";\r\n    Action[\"UPDATE\"] = \"UPDATE\";\r\n})(Action = exports.Action || (exports.Action = {}));\r\nvar ActionType;\r\n(function (ActionType) {\r\n    ActionType[\"OPEN\"] = \"APP::MODAL::OPEN\";\r\n    ActionType[\"CLOSE\"] = \"APP::MODAL::CLOSE\";\r\n    ActionType[\"UPDATE\"] = \"APP::MODAL::UPDATE\";\r\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\r\nvar FooterActionType;\r\n(function (FooterActionType) {\r\n    FooterActionType[\"FOOTER_BUTTON_CLICK\"] = \"APP::MODAL::FOOTER::BUTTON::CLICK\";\r\n    FooterActionType[\"FOOTER_BUTTON_UPDATE\"] = \"APP::MODAL::FOOTER::BUTTON::UPDATE\";\r\n})(FooterActionType = exports.FooterActionType || (exports.FooterActionType = {}));\r\nvar Size;\r\n(function (Size) {\r\n    Size[\"Small\"] = \"small\";\r\n    Size[\"Medium\"] = \"medium\";\r\n    Size[\"Large\"] = \"large\";\r\n    Size[\"Full\"] = \"full\";\r\n})(Size = exports.Size || (exports.Size = {}));\r\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar helper_1 = __webpack_require__(2);\r\nvar types_1 = __webpack_require__(1);\r\nvar Error_1 = __webpack_require__(0);\r\nvar helper_2 = __webpack_require__(6);\r\nvar types_2 = __webpack_require__(7);\r\nfunction push(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: types_1.Group.Navigation,\r\n        type: types_2.ActionType.PUSH,\r\n    });\r\n}\r\nexports.push = push;\r\nfunction replace(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: types_1.Group.Navigation,\r\n        type: types_2.ActionType.REPLACE,\r\n    });\r\n}\r\nexports.replace = replace;\r\nfunction validationError(action) {\r\n    var payload;\r\n    switch (action.type) {\r\n        case types_2.ActionType.REPLACE:\r\n        case types_2.ActionType.PUSH:\r\n            payload = action.payload;\r\n            if (payload === undefined) {\r\n                return Error_1.invalidPayload(action, Error_1.Message.MISSING_PAYLOAD);\r\n            }\r\n            return helper_2.isValidAbsolutePath(payload.path) || helper_2.isValidRelativePath(payload.path)\r\n                ? undefined\r\n                : Error_1.invalidPayload(action, 'Invalid path provided. Expected a relative or absolute https or http path');\r\n        default:\r\n            return Error_1.invalidActionType(action);\r\n    }\r\n}\r\nexports.validationError = validationError;\r\nvar History = /** @class */ (function (_super) {\r\n    __extends(History, _super);\r\n    function History(app) {\r\n        return _super.call(this, app, 'History', types_1.Group.Navigation) || this;\r\n    }\r\n    Object.defineProperty(History.prototype, \"payload\", {\r\n        get: function () {\r\n            return { id: this.id };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    History.prototype.dispatch = function (type, path) {\r\n        var payload = __assign({}, this.payload, { path: path });\r\n        switch (type) {\r\n            case types_2.Action.PUSH:\r\n                this.app.dispatch(push(payload));\r\n                break;\r\n            case types_2.Action.REPLACE:\r\n                this.app.dispatch(replace(payload));\r\n                break;\r\n            default:\r\n                Error_1.throwError(Error_1.ActionType.INVALID_ACTION_TYPE, helper_1.actionWrapper({\r\n                    type: type,\r\n                    group: this.group,\r\n                }));\r\n        }\r\n        return this;\r\n    };\r\n    return History;\r\n}(helper_1.ActionSet));\r\nexports.History = History;\r\nfunction create(app) {\r\n    return new History(app);\r\n}\r\nexports.create = create;\r\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module Redirect\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar helper_1 = __webpack_require__(2);\r\nvar types_1 = __webpack_require__(1);\r\nvar Error_1 = __webpack_require__(0);\r\nvar helper_2 = __webpack_require__(6);\r\nvar types_2 = __webpack_require__(8);\r\nexports.GROUP = types_1.Group.Navigation;\r\nfunction isResourcePayload(resource) {\r\n    // tslint:disable-next-line:no-boolean-literal-compare\r\n    return typeof resource.id === 'string';\r\n}\r\nexports.isResourcePayload = isResourcePayload;\r\nfunction isCreateResourcePayload(resource) {\r\n    // tslint:disable-next-line:no-boolean-literal-compare\r\n    return resource.create === true;\r\n}\r\nexports.isCreateResourcePayload = isCreateResourcePayload;\r\nfunction isProductVariantResourcePayload(resource) {\r\n    var castResource = resource;\r\n    // tslint:disable-next-line:no-boolean-literal-compare\r\n    return castResource.id !== undefined && castResource.variant !== undefined;\r\n}\r\nexports.isProductVariantResourcePayload = isProductVariantResourcePayload;\r\nfunction isProductVariantCreateResourcePayload(resource) {\r\n    if (!isProductVariantResourcePayload(resource)) {\r\n        return false;\r\n    }\r\n    return isCreateResourcePayload(resource.variant);\r\n}\r\nexports.isProductVariantCreateResourcePayload = isProductVariantCreateResourcePayload;\r\nfunction toAdminPath(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: exports.GROUP,\r\n        type: types_2.ActionType.ADMIN_PATH,\r\n    });\r\n}\r\nexports.toAdminPath = toAdminPath;\r\nfunction toAdminSection(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: exports.GROUP,\r\n        type: types_2.ActionType.ADMIN_SECTION,\r\n    });\r\n}\r\nexports.toAdminSection = toAdminSection;\r\nfunction toRemote(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: exports.GROUP,\r\n        type: types_2.ActionType.REMOTE,\r\n    });\r\n}\r\nexports.toRemote = toRemote;\r\nfunction toApp(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: exports.GROUP,\r\n        type: types_2.ActionType.APP,\r\n    });\r\n}\r\nexports.toApp = toApp;\r\nfunction isValidAdminResource(section) {\r\n    if (section === undefined) {\r\n        return false;\r\n    }\r\n    var name = section.name, resource = section.resource;\r\n    if (!name) {\r\n        return false;\r\n    }\r\n    var valid = false;\r\n    helper_1.forEachInEnum(types_2.ResourceType, function (resourceName) {\r\n        if (name === resourceName) {\r\n            valid = true;\r\n        }\r\n    });\r\n    if (!valid) {\r\n        return false;\r\n    }\r\n    return (resource === undefined ||\r\n        isProductVariantResourcePayload(resource) ||\r\n        isProductVariantCreateResourcePayload(resource) ||\r\n        isCreateResourcePayload(resource) ||\r\n        isResourcePayload(resource));\r\n}\r\nexports.isValidAdminResource = isValidAdminResource;\r\nfunction validationError(action) {\r\n    var payload;\r\n    switch (action.type) {\r\n        case types_2.ActionType.ADMIN_PATH:\r\n            payload = action.payload;\r\n            if (payload === undefined) {\r\n                return Error_1.invalidPayload(action, Error_1.Message.MISSING_PAYLOAD);\r\n            }\r\n            return helper_2.isValidRelativePath(payload.path)\r\n                ? undefined\r\n                : Error_1.invalidPayload(action, 'Path is invalid. Expecting relative path');\r\n        case types_2.ActionType.REMOTE:\r\n            payload = action.payload;\r\n            if (payload === undefined) {\r\n                return Error_1.invalidPayload(action, Error_1.Message.MISSING_PAYLOAD);\r\n            }\r\n            return helper_2.isValidAbsolutePath(payload.url)\r\n                ? undefined\r\n                : Error_1.invalidPayload(action, 'Url is invalid. Expecting absolute url');\r\n        case types_2.ActionType.APP:\r\n            payload = action.payload;\r\n            if (payload === undefined) {\r\n                return Error_1.invalidPayload(action, Error_1.Message.MISSING_PAYLOAD);\r\n            }\r\n            return helper_2.isValidRelativePath(payload.path)\r\n                ? undefined\r\n                : Error_1.invalidPayload(action, 'Path is invalid. Expecting relative path');\r\n        case types_2.ActionType.ADMIN_SECTION:\r\n            payload = action.payload;\r\n            if (payload === undefined) {\r\n                return Error_1.invalidPayload(action, Error_1.Message.MISSING_PAYLOAD);\r\n            }\r\n            return isValidAdminResource(payload.section)\r\n                ? undefined\r\n                : Error_1.invalidPayload(action, 'Invalid admin section resource');\r\n        default:\r\n            return Error_1.invalidActionType(action);\r\n    }\r\n}\r\nexports.validationError = validationError;\r\nfunction isAdminPathPayload(payload) {\r\n    return typeof payload === 'object' && payload.hasOwnProperty('path');\r\n}\r\nfunction isAdminSectionPayload(payload) {\r\n    return (typeof payload === 'object' &&\r\n        typeof payload.section === 'object' &&\r\n        payload.section.hasOwnProperty('name'));\r\n}\r\nfunction isRemotePayload(payload) {\r\n    return typeof payload === 'object' && payload.hasOwnProperty('url');\r\n}\r\nvar Redirect = /** @class */ (function (_super) {\r\n    __extends(Redirect, _super);\r\n    function Redirect(app) {\r\n        return _super.call(this, app, 'Redirect', types_1.Group.Navigation) || this;\r\n    }\r\n    Object.defineProperty(Redirect.prototype, \"payload\", {\r\n        get: function () {\r\n            return { id: this.id };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Redirect.prototype.dispatch = function (action, payload) {\r\n        switch (action) {\r\n            case types_2.Action.ADMIN_PATH:\r\n                var adminPathPayload = isAdminPathPayload(payload) ? payload : { path: payload };\r\n                this.app.dispatch(toAdminPath(__assign({}, this.payload, adminPathPayload)));\r\n                break;\r\n            case types_2.Action.ADMIN_SECTION:\r\n                var adminSectionPayload = isAdminSectionPayload(payload)\r\n                    ? payload\r\n                    : { section: payload };\r\n                this.app.dispatch(toAdminSection(__assign({}, this.payload, adminSectionPayload)));\r\n                break;\r\n            case types_2.Action.APP:\r\n                this.app.dispatch(toApp(__assign({}, this.payload, { path: payload })));\r\n                break;\r\n            case types_2.Action.REMOTE:\r\n                var remotePayload = isRemotePayload(payload) ? payload : { url: payload };\r\n                this.app.dispatch(toRemote(__assign({}, this.payload, remotePayload)));\r\n                break;\r\n            default:\r\n                Error_1.throwError(Error_1.ActionType.INVALID_ACTION_TYPE, helper_1.actionWrapper({\r\n                    group: this.group,\r\n                    type: action,\r\n                }));\r\n        }\r\n        return this;\r\n    };\r\n    return Redirect;\r\n}(helper_1.ActionSet));\r\nexports.Redirect = Redirect;\r\nfunction create(app) {\r\n    return new Redirect(app);\r\n}\r\nexports.create = create;\r\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module Print\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ActionType;\r\n(function (ActionType) {\r\n    ActionType[\"APP\"] = \"APP::PRINT::APP\";\r\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\r\nvar Action;\r\n(function (Action) {\r\n    Action[\"APP\"] = \"APP\";\r\n})(Action = exports.Action || (exports.Action = {}));\r\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module ResourcePicker\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Action;\r\n(function (Action) {\r\n    Action[\"OPEN\"] = \"OPEN\";\r\n    Action[\"SELECT\"] = \"SELECT\";\r\n    Action[\"CLOSE\"] = \"CLOSE\";\r\n    Action[\"UPDATE\"] = \"UPDATE\";\r\n    Action[\"CANCEL\"] = \"CANCEL\";\r\n})(Action = exports.Action || (exports.Action = {}));\r\nvar ActionType;\r\n(function (ActionType) {\r\n    ActionType[\"OPEN\"] = \"APP::RESOURCE_PICKER::OPEN\";\r\n    ActionType[\"SELECT\"] = \"APP::RESOURCE_PICKER::SELECT\";\r\n    ActionType[\"CLOSE\"] = \"APP::RESOURCE_PICKER::CLOSE\";\r\n    ActionType[\"UPDATE\"] = \"APP::RESOURCE_PICKER::UPDATE\";\r\n    ActionType[\"CANCEL\"] = \"APP::RESOURCE_PICKER::CANCEL\";\r\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\r\nvar CollectionSortOrder;\r\n(function (CollectionSortOrder) {\r\n    CollectionSortOrder[\"Manual\"] = \"MANUAL\";\r\n    CollectionSortOrder[\"BestSelling\"] = \"BEST_SELLING\";\r\n    CollectionSortOrder[\"AlphaAsc\"] = \"ALPHA_ASC\";\r\n    CollectionSortOrder[\"AlphaDesc\"] = \"ALPHA_DESC\";\r\n    CollectionSortOrder[\"PriceDesc\"] = \"PRICE_DESC\";\r\n    CollectionSortOrder[\"PriceAsc\"] = \"PRICE_ASC\";\r\n    CollectionSortOrder[\"CreatedDesc\"] = \"CREATED_DESC\";\r\n    CollectionSortOrder[\"Created\"] = \"CREATED\";\r\n})(CollectionSortOrder = exports.CollectionSortOrder || (exports.CollectionSortOrder = {}));\r\nvar FulfillmentServiceType;\r\n(function (FulfillmentServiceType) {\r\n    FulfillmentServiceType[\"GiftCard\"] = \"GIFT_CARD\";\r\n    FulfillmentServiceType[\"Manual\"] = \"MANUAL\";\r\n    FulfillmentServiceType[\"ThirdParty\"] = \"THIRD_PARTY\";\r\n})(FulfillmentServiceType = exports.FulfillmentServiceType || (exports.FulfillmentServiceType = {}));\r\nvar WeightUnit;\r\n(function (WeightUnit) {\r\n    WeightUnit[\"Kilograms\"] = \"KILOGRAMS\";\r\n    WeightUnit[\"Grams\"] = \"GRAMS\";\r\n    WeightUnit[\"Pounds\"] = \"POUNDS\";\r\n    WeightUnit[\"Ounces\"] = \"OUNCES\";\r\n})(WeightUnit = exports.WeightUnit || (exports.WeightUnit = {}));\r\nvar ProductVariantInventoryPolicy;\r\n(function (ProductVariantInventoryPolicy) {\r\n    ProductVariantInventoryPolicy[\"Deny\"] = \"DENY\";\r\n    ProductVariantInventoryPolicy[\"Continue\"] = \"CONTINUE\";\r\n})(ProductVariantInventoryPolicy = exports.ProductVariantInventoryPolicy || (exports.ProductVariantInventoryPolicy = {}));\r\nvar ProductVariantInventoryManagement;\r\n(function (ProductVariantInventoryManagement) {\r\n    ProductVariantInventoryManagement[\"Shopify\"] = \"SHOPIFY\";\r\n    ProductVariantInventoryManagement[\"NotManaged\"] = \"NOT_MANAGED\";\r\n    ProductVariantInventoryManagement[\"FulfillmentService\"] = \"FULFILLMENT_SERVICE\";\r\n})(ProductVariantInventoryManagement = exports.ProductVariantInventoryManagement || (exports.ProductVariantInventoryManagement = {}));\r\nvar ResourceType;\r\n(function (ResourceType) {\r\n    ResourceType[\"Product\"] = \"product\";\r\n    ResourceType[\"ProductVariant\"] = \"variant\";\r\n    ResourceType[\"Collection\"] = \"collection\";\r\n})(ResourceType = exports.ResourceType || (exports.ResourceType = {}));\r\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Action;\r\n(function (Action) {\r\n    Action[\"UPDATE\"] = \"UPDATE\";\r\n})(Action = exports.Action || (exports.Action = {}));\r\nvar ActionType;\r\n(function (ActionType) {\r\n    ActionType[\"UPDATE\"] = \"APP::TITLEBAR::UPDATE\";\r\n})(ActionType = exports.ActionType || (exports.ActionType = {}));\r\nvar ButtonsActionType;\r\n(function (ButtonsActionType) {\r\n    ButtonsActionType[\"BUTTON_CLICK\"] = \"APP::TITLEBAR::BUTTONS::BUTTON::CLICK\";\r\n    ButtonsActionType[\"BUTTON_UPDATE\"] = \"APP::TITLEBAR::BUTTONS::BUTTON::UPDATE\";\r\n    ButtonsActionType[\"BUTTON_GROUP_UPDATE\"] = \"APP::TITLEBAR::BUTTONS::BUTTONGROUP::UPDATE\";\r\n    ButtonsActionType[\"BREADCRUMBS_CLICK\"] = \"APP::TITLEBAR::BREADCRUMBS::BUTTON::CLICK\";\r\n    ButtonsActionType[\"BREADCRUMBS_UPDATE\"] = \"APP::TITLEBAR::BREADCRUMBS::BUTTON::UPDATE\";\r\n})(ButtonsActionType = exports.ButtonsActionType || (exports.ButtonsActionType = {}));\r\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result[\"default\"] = mod;\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(1));\r\nvar Button = __importStar(__webpack_require__(3));\r\nexports.Button = Button;\r\nvar ButtonGroup = __importStar(__webpack_require__(4));\r\nexports.ButtonGroup = ButtonGroup;\r\nvar Cart = __importStar(__webpack_require__(34));\r\nexports.Cart = Cart;\r\nvar Error = __importStar(__webpack_require__(0));\r\nexports.Error = Error;\r\nvar Flash = __importStar(__webpack_require__(36));\r\nexports.Flash = Flash;\r\nvar Loading = __importStar(__webpack_require__(38));\r\nexports.Loading = Loading;\r\nvar Modal = __importStar(__webpack_require__(40));\r\nexports.Modal = Modal;\r\nvar Navigation = __importStar(__webpack_require__(43));\r\nexports.Navigation = Navigation;\r\nvar History = __importStar(__webpack_require__(45));\r\nexports.History = History;\r\nvar Redirect = __importStar(__webpack_require__(46));\r\nexports.Redirect = Redirect;\r\nvar Print = __importStar(__webpack_require__(25));\r\nexports.Print = Print;\r\nvar ResourcePicker = __importStar(__webpack_require__(48));\r\nexports.ResourcePicker = ResourcePicker;\r\nvar TitleBar = __importStar(__webpack_require__(50));\r\nexports.TitleBar = TitleBar;\r\nvar validator_1 = __webpack_require__(10);\r\nexports.isAppBridgeAction = validator_1.isAppBridgeAction;\r\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(47));\r\n__export(__webpack_require__(21));\r\n\n\n/***/ }),\n/* 26 */,\n/* 27 */,\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar helper_1 = __webpack_require__(2);\r\nvar types_1 = __webpack_require__(1);\r\nvar types_2 = __webpack_require__(11);\r\nfunction errorActionWrapperWithId(type, action, message) {\r\n    var castPayload = action.payload;\r\n    return helper_1.actionWrapper({\r\n        type: type,\r\n        group: types_1.Group.Error,\r\n        payload: {\r\n            action: action,\r\n            message: message,\r\n            type: type,\r\n            id: castPayload && castPayload.id ? castPayload.id : undefined,\r\n        },\r\n    });\r\n}\r\nvar Message;\r\n(function (Message) {\r\n    Message[\"MISSING_PAYLOAD\"] = \"Missing payload\";\r\n    Message[\"INVALID_PAYLOAD_ID\"] = \"Id in payload is missing or invalid\";\r\n})(Message = exports.Message || (exports.Message = {}));\r\nfunction invalidPayload(action, message) {\r\n    return errorActionWrapperWithId(types_2.ActionType.INVALID_PAYLOAD, action, message || \"The action's payload is missing required properties or has invalid properties\");\r\n}\r\nexports.invalidPayload = invalidPayload;\r\nfunction invalidActionType(action, message) {\r\n    return helper_1.actionWrapper({\r\n        group: types_1.Group.Error,\r\n        payload: {\r\n            action: action,\r\n            message: message || 'The action type is invalid or unsupported',\r\n            type: types_2.ActionType.INVALID_ACTION_TYPE,\r\n        },\r\n        type: types_2.ActionType.INVALID_ACTION_TYPE,\r\n    });\r\n}\r\nexports.invalidActionType = invalidActionType;\r\nfunction invalidAction(action, message) {\r\n    return helper_1.actionWrapper({\r\n        group: types_1.Group.Error,\r\n        payload: {\r\n            action: action,\r\n            message: message || \"The action's has missing/invalid values for `group`, `type` or `version`\",\r\n            type: types_2.ActionType.INVALID_ACTION,\r\n        },\r\n        type: types_2.ActionType.INVALID_ACTION,\r\n    });\r\n}\r\nexports.invalidAction = invalidAction;\r\nfunction unexpectedAction(action, message) {\r\n    return helper_1.actionWrapper({\r\n        group: types_1.Group.Error,\r\n        payload: {\r\n            action: action,\r\n            message: message || 'Action cannot be called at this time',\r\n            type: types_2.ActionType.UNEXPECTED_ACTION,\r\n        },\r\n        type: types_2.ActionType.UNEXPECTED_ACTION,\r\n    });\r\n}\r\nexports.unexpectedAction = unexpectedAction;\r\nfunction unsupportedOperationAction(action, message) {\r\n    return errorActionWrapperWithId(types_2.ActionType.UNSUPPORTED_OPERATION, action, message || 'The action type is unsupported');\r\n}\r\nexports.unsupportedOperationAction = unsupportedOperationAction;\r\nfunction persistenceAction(action, message) {\r\n    return errorActionWrapperWithId(types_2.ActionType.PERSISTENCE, action, message || 'Action cannot be persisted on server');\r\n}\r\nexports.persistenceAction = persistenceAction;\r\nfunction networkAction(action, message) {\r\n    return errorActionWrapperWithId(types_2.ActionType.NETWORK, action, message || 'Network error');\r\n}\r\nexports.networkAction = networkAction;\r\nfunction permissionAction(action, message) {\r\n    return errorActionWrapperWithId(types_2.ActionType.PERMISSION, action, message || 'Action is not permitted');\r\n}\r\nexports.permissionAction = permissionAction;\r\nfunction isErrorEventName(eventName) {\r\n    var match = helper_1.findMatchInEnum(types_2.Action, eventName);\r\n    return typeof match === 'string';\r\n}\r\nexports.isErrorEventName = isErrorEventName;\r\nvar AppBridgeError = /** @class */ (function () {\r\n    function AppBridgeError(message) {\r\n        this.name = 'AppBridgeError';\r\n        this.message = message;\r\n        if (typeof Error.captureStackTrace === 'function') {\r\n            Error.captureStackTrace(this, this.constructor);\r\n        }\r\n        else {\r\n            this.stack = new Error(this.message).stack;\r\n        }\r\n    }\r\n    return AppBridgeError;\r\n}());\r\nexports.AppBridgeError = AppBridgeError;\r\nAppBridgeError.prototype = Object.create(Error.prototype);\r\nfunction fromAction(message, type, action) {\r\n    var errorMessage = message ? type + \": \" + message : type;\r\n    var error = new AppBridgeError(errorMessage);\r\n    error.action = action;\r\n    error.type = type;\r\n    return error;\r\n}\r\nexports.fromAction = fromAction;\r\nfunction throwError() {\r\n    var type = arguments[0];\r\n    var message;\r\n    var action;\r\n    if (typeof arguments[1] === 'string') {\r\n        message = arguments[1];\r\n    }\r\n    else {\r\n        action = arguments[1];\r\n        message = arguments[2] || '';\r\n    }\r\n    throw fromAction(message, type, action);\r\n}\r\nexports.throwError = throwError;\r\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction mergeProps(obj, newObj) {\r\n    if (newObj === undefined) {\r\n        return undefined;\r\n    }\r\n    // If setting to a different object type, don't merge any props\r\n    if (!Object.getPrototypeOf(obj).isPrototypeOf(newObj)) {\r\n        return newObj;\r\n    }\r\n    var clone = {};\r\n    Object.keys(newObj).forEach(function (key) {\r\n        var exists = obj.hasOwnProperty(key);\r\n        if (!exists) {\r\n            clone[key] = newObj[key];\r\n        }\r\n        else {\r\n            if (typeof obj[key] === 'object' && !Array.isArray(obj[key])) {\r\n                clone[key] = mergeProps(obj[key], newObj[key]);\r\n            }\r\n            else {\r\n                clone[key] = newObj[key];\r\n            }\r\n        }\r\n    });\r\n    // Copy old props that are not present in new object only if this is a simple object\r\n    Object.keys(obj).forEach(function (key) {\r\n        var exists = newObj.hasOwnProperty(key);\r\n        if (!exists) {\r\n            clone[key] = obj[key];\r\n        }\r\n    });\r\n    // Set prototype of cloned object to match original\r\n    Object.setPrototypeOf(clone, Object.getPrototypeOf(obj));\r\n    return clone;\r\n}\r\nexports.default = mergeProps;\r\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Convert a number or array of integers to a string of padded hex octets.\r\n */\r\nfunction asHex(value) {\r\n    return Array.from(value)\r\n        .map(function (i) { return (\"00\" + i.toString(16)).slice(-2); })\r\n        .join('');\r\n}\r\n/**\r\n * Attempt to securely generate random bytes/\r\n */\r\nfunction getRandomBytes(size) {\r\n    // SPRNG\r\n    if (typeof Uint8Array === 'function' && window.crypto) {\r\n        var buffer = new Uint8Array(size);\r\n        var randomValues = window.crypto.getRandomValues(buffer);\r\n        if (randomValues) {\r\n            return randomValues;\r\n        }\r\n    }\r\n    // Insecure random\r\n    return Array.from(new Array(size), function () { return (Math.random() * 255) | 0; });\r\n}\r\n/**\r\n * Generate a RFC4122-compliant v4 UUID.\r\n *\r\n * @see http://www.ietf.org/rfc/rfc4122.txt\r\n */\r\nfunction generateUuid() {\r\n    var version = 64;\r\n    var clockSeqHiAndReserved = getRandomBytes(1);\r\n    var timeHiAndVersion = getRandomBytes(2);\r\n    clockSeqHiAndReserved[0] &= 63 | 128;\r\n    // tslint:disable-next-line:binary-expression-operand-order\r\n    timeHiAndVersion[0] &= 15 | version;\r\n    return [\r\n        asHex(getRandomBytes(4)),\r\n        '-',\r\n        asHex(getRandomBytes(2)),\r\n        '-',\r\n        asHex(timeHiAndVersion),\r\n        '-',\r\n        asHex(clockSeqHiAndReserved),\r\n        asHex(getRandomBytes(1)),\r\n        '-',\r\n        asHex(getRandomBytes(6)),\r\n    ].join('');\r\n}\r\nexports.generateUuid = generateUuid;\r\n// Default\r\nexports.default = generateUuid;\r\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"name\":\"@shopify/app-bridge\",\"version\":\"0.7.3\",\"types\":\"index.d.ts\",\"main\":\"index.js\",\"files\":[\"actions.js\",\"actions.js.map\",\"actions/\",\"client/\",\"index.d.ts\",\"index.js\",\"index.js.map\",\"host.js\",\"host.js.map\",\"host/\",\"types/*\",\"util/\"],\"private\":false,\"publishConfig\":{\"access\":\"public\",\"@shopify:registry\":\"https://registry.npmjs.org\"},\"repository\":\"git@github.com:Shopify/app-bridge.git\",\"author\":\"Shopify Inc.\",\"license\":\"MIT\",\"scripts\":{\"build\":\"NODE_ENV=production webpack -p && tsc --project ./tsconfig.build.json --emitDeclarationOnly && echo \\\"/**\\n * @module client\\n */\\n\\nimport createClientApp from './client';\\nexport * from './client';\\nexport default createClientApp;\\n\\\" > index.d.ts\",\"build:docs\":\"typedoc src/actions --out docs/actions -name app-bridge/actions && typedoc src/host -name app-bridge/host --out docs/host && typedoc src/client -name app-bridge/client --out docs/client\",\"check\":\"tsc -p ./tsconfig.json --pretty --noEmit\",\"clean\":\"rm -rf ./**/*.d.ts ./actions* ./client* ./host* ./index* ./util\",\"lint\":\"tslint -c ./tslint.json -p ./tsconfig.json -t codeFrame\",\"prepublishOnly\":\"yarn run clean && yarn run build\",\"start\":\"webpack-dev-server\",\"test\":\"jest 'src'\",\"test:CI\":\"CI=true yarn test:coverage\",\"test:coverage\":\"yarn test --coverage --outputFile=coverage --maxWorkers 2\",\"test:watch\":\"yarn test --watch\",\"watch\":\"webpack --progress --watch\"},\"devDependencies\":{\"@shopify/shopify-express\":\"^1.0.0-alpha.7\",\"@types/enzyme\":\"^2.8.12\",\"@types/jest\":\"^22.2.0\",\"@types/react\":\"^16.0.40\",\"@types/react-dom\":\"^16.0.3\",\"@types/react-hot-loader\":\"^3.0.4\",\"@types/react-redux\":\"^5.0.9\",\"@types/react-router-dom\":\"^4.0.8\",\"@types/react-router-redux\":\"^5.0.8\",\"@types/react-test-renderer\":\"15.5.4\",\"@types/react-transition-group\":\"^2.0.6\",\"@types/webpack-env\":\"^1.13.1\",\"awesome-typescript-loader\":\"^3.4.1\",\"babel-plugin-system-import-transformer\":\"^3.1.0\",\"css-loader\":\"^0.28.7\",\"enzyme\":\"3.3.0\",\"enzyme-adapter-react-15\":\"^1.0.5\",\"express-session\":\"^1.15.6\",\"hoist-non-react-statics\":\"^2.5.0\",\"html-webpack-plugin\":\"^2.30.1\",\"jest\":\"22.4.2\",\"postcss-shopify\":\"^1.0.0\",\"prettier\":\"1.12.0\",\"react\":\"^15.5.4\",\"react-dom\":\"^15.5.4\",\"react-redux\":\"^5.0.6\",\"react-test-renderer\":\"15.5.4\",\"react-transition-group\":\"^2.2.1\",\"redux\":\"^3.7.2\",\"redux-devtools-extension\":\"^2.13.2\",\"style-loader\":\"^0.19.0\",\"ts-jest\":\"^22.4.1\",\"tslint\":\"^5.9.1\",\"tslint-config-shopify\":\"^3.0.1\",\"typedoc\":\"^0.10.0\",\"typedoc-plugin-external-module-name\":\"^1.1.1\",\"typedoc-plugin-markdown\":\"^1.0.14\",\"typescript\":\"2.8.1\",\"webpack\":\"^3.10.0\",\"webpack-dev-server\":\"^2.9.5\",\"webpack-fix-default-import-plugin\":\"^1.0.3\"},\"prettier\":{\"bracketSpacing\":false,\"printWidth\":100,\"singleQuote\":true,\"trailingComma\":\"all\"},\"jest\":{\"globals\":{\"ts-jest\":{\"babelConfig\":{\"plugins\":[\"babel-plugin-system-import-transformer\"],\"sourceMaps\":\"inline\"}}},\"setupTestFrameworkScriptFile\":\"./test/setup.js\",\"testRegex\":\".*\\\\.test\\\\.tsx?$\",\"testURL\":\"https://app-bridge.myshopify.io/\",\"transform\":{\".tsx?$\":\"<rootDir>/../../node_modules/ts-jest/preprocessor.js\"},\"moduleFileExtensions\":[\"js\",\"jsx\",\"json\",\"ts\",\"tsx\"],\"collectCoverageFrom\":[\"src/**/*.{js,jsx,ts,tsx}\",\"!**/node_modules/**\",\"!**/index.{ts,tsx}\",\"!**/types.ts\"],\"moduleDirectories\":[\"<rootDir>/node_modules\",\"./node_modules\",\"./src\"],\"moduleNameMapper\":{\"app-bridge/info\":\"<rootDir>/package.json\"}}}\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module Button\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar helper_1 = __webpack_require__(2);\r\nvar types_1 = __webpack_require__(1);\r\nvar Error_1 = __webpack_require__(0);\r\nvar types_2 = __webpack_require__(13);\r\nfunction getSafeButtonProps(props) {\r\n    return helper_1.sanitizeProps(props, ['label', 'disabled', 'id', 'icon', 'style']);\r\n}\r\nexports.getSafeButtonProps = getSafeButtonProps;\r\nfunction clickButton(group, component, payload) {\r\n    var id = component.id;\r\n    var action = helper_1.getEventNameSpace(group, types_2.Action.CLICK, component);\r\n    var buttonPayload = {\r\n        id: id,\r\n        payload: payload,\r\n    };\r\n    return helper_1.actionWrapper({ type: action, group: group, payload: buttonPayload });\r\n}\r\nexports.clickButton = clickButton;\r\nfunction update(group, component, props) {\r\n    var id = component.id;\r\n    var label = props.label;\r\n    var action = helper_1.getEventNameSpace(group, types_2.Action.UPDATE, component);\r\n    var buttonPayload = __assign({ id: id,\r\n        label: label }, getSafeButtonProps(props));\r\n    return helper_1.actionWrapper({ type: action, group: group, payload: buttonPayload });\r\n}\r\nexports.update = update;\r\nfunction validationError(action) {\r\n    if (!action.hasOwnProperty('payload')) {\r\n        return Error_1.invalidPayload(action, Error_1.Message.MISSING_PAYLOAD);\r\n    }\r\n    var payload;\r\n    switch (action.type) {\r\n        case types_2.ActionType.CLICK:\r\n            payload = action.payload;\r\n            return typeof payload.id === 'string'\r\n                ? undefined\r\n                : Error_1.invalidPayload(action, Error_1.Message.INVALID_PAYLOAD_ID);\r\n        case types_2.ActionType.UPDATE:\r\n            payload = action.payload;\r\n            return isValidButtonProps(payload) ? undefined : Error_1.invalidPayload(action);\r\n        default:\r\n            return Error_1.invalidActionType(action);\r\n    }\r\n}\r\nexports.validationError = validationError;\r\nfunction isValidButtonProps(button) {\r\n    return typeof button.id === 'string' && typeof button.label === 'string';\r\n}\r\nexports.isValidButtonProps = isValidButtonProps;\r\nvar Button = /** @class */ (function (_super) {\r\n    __extends(Button, _super);\r\n    function Button(app, options) {\r\n        var _this = _super.call(this, app, types_1.ComponentType.Button, types_1.Group.Button) || this;\r\n        _this.disabled = false;\r\n        _this.set(options, false);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Button.prototype, \"options\", {\r\n        get: function () {\r\n            return {\r\n                disabled: this.disabled,\r\n                icon: this.icon,\r\n                label: this.label,\r\n                style: this.style,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Button.prototype, \"payload\", {\r\n        get: function () {\r\n            return __assign({ id: this.id }, this.options);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Button.prototype.set = function (options, shouldUpdate) {\r\n        if (shouldUpdate === void 0) { shouldUpdate = true; }\r\n        var mergedOptions = helper_1.getMergedProps(this.options, options);\r\n        var label = mergedOptions.label, disabled = mergedOptions.disabled, icon = mergedOptions.icon, style = mergedOptions.style;\r\n        if (!this.validateOptions(mergedOptions)) {\r\n            return this;\r\n        }\r\n        this.label = label;\r\n        this.disabled = !!disabled;\r\n        this.icon = icon;\r\n        this.style = style;\r\n        if (shouldUpdate) {\r\n            this.dispatch(types_2.Action.UPDATE);\r\n        }\r\n        return this;\r\n    };\r\n    Button.prototype.dispatch = function (action, payload) {\r\n        switch (action) {\r\n            case types_2.Action.CLICK:\r\n                this.app.dispatch(clickButton(this.group, this.component, payload));\r\n                break;\r\n            case types_2.Action.UPDATE:\r\n                var updateAction = update(this.group, this.component, this.payload);\r\n                this.app.dispatch(updateAction);\r\n                break;\r\n            default:\r\n                Error_1.throwError(Error_1.ActionType.INVALID_ACTION_TYPE, helper_1.actionWrapper({\r\n                    group: this.group,\r\n                    payload: this.payload,\r\n                    type: action,\r\n                }));\r\n        }\r\n        return this;\r\n    };\r\n    Button.prototype.validateOptions = function (options) {\r\n        var buttonProps = __assign({ id: this.id }, options);\r\n        if (!isValidButtonProps(buttonProps)) {\r\n            var errorAction = update(this.group, this.component, buttonProps);\r\n            Error_1.throwError(Error_1.ActionType.INVALID_OPTIONS, errorAction);\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    return Button;\r\n}(helper_1.ActionSet));\r\nexports.Button = Button;\r\nfunction create(app, options) {\r\n    return new Button(app, options);\r\n}\r\nexports.create = create;\r\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module ButtonGroup\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar buttonHelper_1 = __webpack_require__(5);\r\nvar helper_1 = __webpack_require__(2);\r\nvar types_1 = __webpack_require__(1);\r\nvar Button_1 = __webpack_require__(3);\r\nvar Error_1 = __webpack_require__(0);\r\nvar types_2 = __webpack_require__(14);\r\nfunction update(group, component, props) {\r\n    return buttonActionWrapper(group, component, types_2.Action.UPDATE, props);\r\n}\r\nexports.update = update;\r\nfunction isGroupedButton(options) {\r\n    var castOptions = options;\r\n    return castOptions.buttons && castOptions.buttons.length > 0 && castOptions.label !== undefined;\r\n}\r\nexports.isGroupedButton = isGroupedButton;\r\nfunction isGroupedButtonPayload(payload) {\r\n    var castOptions = payload;\r\n    return (Array.isArray(castOptions.buttons) &&\r\n        typeof castOptions.id === 'string' &&\r\n        typeof castOptions.label === 'string');\r\n}\r\nexports.isGroupedButtonPayload = isGroupedButtonPayload;\r\nfunction getSafeButtonGroupProps(props) {\r\n    return helper_1.sanitizeProps(props, ['label', 'disabled', 'buttons', 'id']);\r\n}\r\nexports.getSafeButtonGroupProps = getSafeButtonGroupProps;\r\nfunction validationError(action) {\r\n    if (!action.hasOwnProperty('payload')) {\r\n        return Error_1.invalidPayload(action, Error_1.Message.MISSING_PAYLOAD);\r\n    }\r\n    switch (action.type) {\r\n        case types_2.ActionType.UPDATE:\r\n            var payload = action.payload;\r\n            return isValidButtonGroupProps(payload) ? undefined : Error_1.invalidPayload(action);\r\n        default:\r\n            return Error_1.invalidActionType(action);\r\n    }\r\n}\r\nexports.validationError = validationError;\r\nfunction isValidButtonGroupProps(buttonGroup) {\r\n    if (typeof buttonGroup.id !== 'string' ||\r\n        typeof buttonGroup.label !== 'string' ||\r\n        !Array.isArray(buttonGroup.buttons)) {\r\n        return false;\r\n    }\r\n    for (var _i = 0, _a = buttonGroup.buttons; _i < _a.length; _i++) {\r\n        var button = _a[_i];\r\n        if (!Button_1.isValidButtonProps(button)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexports.isValidButtonGroupProps = isValidButtonGroupProps;\r\nvar ButtonGroup = /** @class */ (function (_super) {\r\n    __extends(ButtonGroup, _super);\r\n    function ButtonGroup(app, options) {\r\n        var _this = _super.call(this, app, types_1.ComponentType.ButtonGroup, types_1.Group.ButtonGroup) || this;\r\n        _this.disabled = false;\r\n        _this.buttonsOptions = [];\r\n        _this.buttons = [];\r\n        _this.set(options, false);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ButtonGroup.prototype, \"options\", {\r\n        get: function () {\r\n            return {\r\n                buttons: this.buttonsOptions,\r\n                disabled: this.disabled,\r\n                label: this.label,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ButtonGroup.prototype, \"payload\", {\r\n        get: function () {\r\n            return __assign({}, this.options, { buttons: this.buttons, id: this.id });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ButtonGroup.prototype.set = function (options, shouldUpdate) {\r\n        if (shouldUpdate === void 0) { shouldUpdate = true; }\r\n        var mergedOptions = helper_1.getMergedProps(this.options, options);\r\n        var label = mergedOptions.label, disabled = mergedOptions.disabled, buttons = mergedOptions.buttons;\r\n        if (!this.validateOptions(mergedOptions)) {\r\n            return this;\r\n        }\r\n        this.label = label;\r\n        this.disabled = !!disabled;\r\n        this.buttons = this.getButtons(buttons);\r\n        if (shouldUpdate) {\r\n            this.dispatch(types_2.Action.UPDATE);\r\n        }\r\n        return this;\r\n    };\r\n    ButtonGroup.prototype.dispatch = function (action) {\r\n        switch (action) {\r\n            case types_2.Action.UPDATE:\r\n                var updateAction = update(this.group, this.component, this.payload);\r\n                this.app.dispatch(updateAction);\r\n                break;\r\n            default:\r\n                Error_1.throwError(Error_1.ActionType.INVALID_ACTION_TYPE, helper_1.actionWrapper({\r\n                    group: this.group,\r\n                    type: action,\r\n                }));\r\n        }\r\n        return this;\r\n    };\r\n    ButtonGroup.prototype.updateButtons = function (newPayload) {\r\n        if (!this.buttons || this.buttons.length === 0) {\r\n            return;\r\n        }\r\n        var updated;\r\n        for (var _i = 0, _a = this.buttons; _i < _a.length; _i++) {\r\n            var action = _a[_i];\r\n            updated = helper_1.updateActionFromPayload(action, Button_1.getSafeButtonProps(newPayload));\r\n            if (updated) {\r\n                break;\r\n            }\r\n        }\r\n        if (updated) {\r\n            this.dispatch(types_2.Action.UPDATE);\r\n        }\r\n    };\r\n    ButtonGroup.prototype.getSingleButton = function (button) {\r\n        return buttonHelper_1.getSingleButton(this, button, this.subgroups, this.updateButtons);\r\n    };\r\n    ButtonGroup.prototype.getButtons = function (buttonOptions) {\r\n        var _this = this;\r\n        var buttons = [];\r\n        if (!buttonOptions) {\r\n            return [];\r\n        }\r\n        buttonOptions.forEach(function (button) {\r\n            var singleButton = buttonHelper_1.getSingleButton(_this, button, _this.subgroups, _this.updateButtons);\r\n            buttons.push(singleButton);\r\n        });\r\n        this.buttonsOptions = buttonOptions;\r\n        return buttons;\r\n    };\r\n    ButtonGroup.prototype.validateOptions = function (options) {\r\n        var buttonGroupProps = __assign({ id: this.id }, options);\r\n        if (!isValidButtonGroupProps(buttonGroupProps)) {\r\n            var errorAction = update(this.group, this.component, buttonGroupProps);\r\n            Error_1.throwError(Error_1.ActionType.INVALID_OPTIONS, errorAction);\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    return ButtonGroup;\r\n}(helper_1.ActionSetWithChildren));\r\nexports.ButtonGroup = ButtonGroup;\r\nfunction create(app, options) {\r\n    return new ButtonGroup(app, options);\r\n}\r\nexports.create = create;\r\nfunction buttonActionWrapper(group, component, eventName, props, payload) {\r\n    var id = component.id;\r\n    var label = props.label;\r\n    var action = helper_1.getEventNameSpace(group, eventName, component);\r\n    var buttonPayload = __assign({ id: id,\r\n        label: label }, getSafeButtonGroupProps(props), { payload: payload });\r\n    return helper_1.actionWrapper({ type: action, group: group, payload: buttonPayload });\r\n}\r\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(35));\r\n__export(__webpack_require__(15));\r\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module Cart\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar helper_1 = __webpack_require__(2);\r\nvar types_1 = __webpack_require__(1);\r\nvar Error_1 = __webpack_require__(0);\r\nvar types_2 = __webpack_require__(15);\r\n/**\r\n * Validation\r\n */\r\nfunction isValidAddress(address) {\r\n    return (helper_1.isValidOptionalString(address.address1) &&\r\n        helper_1.isValidOptionalString(address.address2) &&\r\n        helper_1.isValidOptionalString(address.city) &&\r\n        helper_1.isValidOptionalString(address.company) &&\r\n        helper_1.isValidOptionalString(address.firstName) &&\r\n        helper_1.isValidOptionalString(address.lastName) &&\r\n        helper_1.isValidOptionalString(address.phone) &&\r\n        helper_1.isValidOptionalString(address.provice) &&\r\n        helper_1.isValidOptionalString(address.country) &&\r\n        helper_1.isValidOptionalString(address.zip) &&\r\n        helper_1.isValidOptionalString(address.name) &&\r\n        helper_1.isValidOptionalString(address.proviceCode) &&\r\n        helper_1.isValidOptionalString(address.countryCode));\r\n}\r\nfunction isValidAddresses(addresses) {\r\n    if (!addresses) {\r\n        return true;\r\n    }\r\n    return Array.isArray(addresses) && addresses.every(isValidAddress);\r\n}\r\nfunction isValidCart(cart) {\r\n    return ((cart.cartDiscount === undefined || isValidDiscount(cart.cartDiscount)) &&\r\n        (cart.customer === undefined ||\r\n            isValidCustomer(cart.customer) ||\r\n            isValidAddresses(cart.customer.addresses)) &&\r\n        helper_1.isValidOptionalString(cart.grandTotal) &&\r\n        (cart.lineItems === undefined || isValidLineItems(cart.lineItems)) &&\r\n        isValidNoteAttributes(cart.noteAttributes) &&\r\n        helper_1.isValidOptionalString(cart.subTotal) &&\r\n        helper_1.isValidOptionalString(cart.taxTotal));\r\n}\r\nfunction isValidCustomer(customer) {\r\n    return (helper_1.isValidOptionalNumber(customer.id) &&\r\n        helper_1.isValidOptionalString(customer.email) &&\r\n        helper_1.isValidOptionalString(customer.firstName) &&\r\n        helper_1.isValidOptionalString(customer.lastName) &&\r\n        helper_1.isValidOptionalString(customer.note));\r\n}\r\nfunction isValidDiscount(discount) {\r\n    return (helper_1.isValidOptionalNumber(discount.amount) &&\r\n        helper_1.isValidOptionalString(discount.discountDescription) &&\r\n        helper_1.isValidOptionalString(discount.type));\r\n}\r\nfunction isValidLineItem(lineItem) {\r\n    return (helper_1.isValidOptionalNumber(lineItem.price) &&\r\n        typeof lineItem.quantity === 'number' &&\r\n        helper_1.isValidOptionalString(lineItem.title) &&\r\n        helper_1.isValidOptionalNumber(lineItem.variantId));\r\n}\r\nfunction isValidLineItems(lineItems) {\r\n    if (!lineItems) {\r\n        return true;\r\n    }\r\n    return Array.isArray(lineItems) && lineItems.every(isValidLineItem);\r\n}\r\nfunction isValidNoteAttributes(noteAttributes) {\r\n    return (noteAttributes === undefined ||\r\n        (Array.isArray(noteAttributes) &&\r\n            noteAttributes.every(function (note) { return typeof note.name === 'string' && typeof note.value === 'string'; })));\r\n}\r\nfunction isValidProperties(properties) {\r\n    return (typeof properties === 'object' &&\r\n        !Array.isArray(properties) &&\r\n        Object.keys(properties).every(function (key) { return typeof properties[key] === 'string'; }));\r\n}\r\nfunction isValidPropertiesKey(keys) {\r\n    return Array.isArray(keys) && keys.every(function (key) { return typeof key === 'string'; });\r\n}\r\nfunction validationError(action) {\r\n    if (!action.payload || typeof action.payload.id !== 'string') {\r\n        return Error_1.invalidPayload(action, 'Missing payload id');\r\n    }\r\n    var payload;\r\n    switch (action.type) {\r\n        case types_2.ActionType.FETCH:\r\n            return undefined;\r\n        case types_2.ActionType.UPDATE:\r\n            payload = action.payload;\r\n            return !payload.data || !isValidCart(payload.data)\r\n                ? Error_1.invalidPayload(action, 'Invalid update payload')\r\n                : undefined;\r\n        case types_2.ActionType.SET_CUSTOMER:\r\n            payload = action.payload;\r\n            return !payload.data || !isValidCustomer(payload.data)\r\n                ? Error_1.invalidPayload(action, 'Invalid set customer payload')\r\n                : undefined;\r\n        case types_2.ActionType.REMOVE_CUSTOMER:\r\n            return undefined;\r\n        case types_2.ActionType.ADD_CUSTOMER_ADDRESS:\r\n            payload = action.payload;\r\n            return !payload.data || !isValidAddress(payload.data)\r\n                ? Error_1.invalidPayload(action, 'Invalid add customer address payload')\r\n                : undefined;\r\n        case types_2.ActionType.UPDATE_CUSTOMER_ADDRESS:\r\n            payload = action.payload;\r\n            return !payload.data || typeof payload.index !== 'number' || !isValidAddress(payload.data)\r\n                ? Error_1.invalidPayload(action, 'Invalid update customer address payload')\r\n                : undefined;\r\n        case types_2.ActionType.SET_DISCOUNT:\r\n            payload = action.payload;\r\n            return !payload.data || !isValidDiscount(payload.data)\r\n                ? Error_1.invalidPayload(action, 'Invalid set discount payload')\r\n                : undefined;\r\n        case types_2.ActionType.REMOVE_DISCOUNT:\r\n            return undefined;\r\n        case types_2.ActionType.SET_PROPERTIES:\r\n            payload = action.payload;\r\n            return !payload.data || !isValidProperties(payload.data)\r\n                ? Error_1.invalidPayload(action, 'Invalid add properties payload')\r\n                : undefined;\r\n        case types_2.ActionType.REMOVE_PROPERTIES:\r\n            payload = action.payload;\r\n            return !payload.data || !isValidPropertiesKey(payload.data)\r\n                ? Error_1.invalidPayload(action, 'Invalid remove properties payload')\r\n                : undefined;\r\n        case types_2.ActionType.CLEAR:\r\n            return undefined;\r\n        case types_2.ActionType.ADD_LINE_ITEM:\r\n            payload = action.payload;\r\n            return !payload.data || !isValidLineItem(payload.data)\r\n                ? Error_1.invalidPayload(action, 'Invalid add line item payload')\r\n                : undefined;\r\n        case types_2.ActionType.UPDATE_LINE_ITEM:\r\n            payload = action.payload;\r\n            return !payload.data ||\r\n                typeof payload.index !== 'number' ||\r\n                typeof payload.data.quantity !== 'number'\r\n                ? Error_1.invalidPayload(action, 'Invalid update line item payload')\r\n                : undefined;\r\n        case types_2.ActionType.REMOVE_LINE_ITEM:\r\n            payload = action.payload;\r\n            return typeof payload.index !== 'number'\r\n                ? Error_1.invalidPayload(action, 'Invalid remove line item payload')\r\n                : undefined;\r\n        case types_2.ActionType.SET_LINE_ITEM_DISCOUNT:\r\n            payload = action.payload;\r\n            return !payload.data || typeof payload.index !== 'number' || !isValidDiscount(payload.data)\r\n                ? Error_1.invalidPayload(action, 'Invalid set line item discount payload')\r\n                : undefined;\r\n        case types_2.ActionType.REMOVE_LINE_ITEM_DISCOUNT:\r\n            payload = action.payload;\r\n            return typeof payload.index !== 'number'\r\n                ? Error_1.invalidPayload(action, 'Invalid remove line item discount payload')\r\n                : undefined;\r\n        case types_2.ActionType.SET_LINE_ITEM_PROPERTIES:\r\n            payload = action.payload;\r\n            return !payload.data || typeof payload.index !== 'number' || !isValidProperties(payload.data)\r\n                ? Error_1.invalidPayload(action, 'Invalid add line item properties payload')\r\n                : undefined;\r\n        case types_2.ActionType.REMOVE_LINE_ITEM_PROPERTIES:\r\n            payload = action.payload;\r\n            return !payload.data ||\r\n                typeof payload.index !== 'number' ||\r\n                !isValidPropertiesKey(payload.data)\r\n                ? Error_1.invalidPayload(action, 'Invalid remove line item properties payload')\r\n                : undefined;\r\n        default:\r\n            return Error_1.invalidActionType(action);\r\n    }\r\n}\r\nexports.validationError = validationError;\r\n/**\r\n * Cart\r\n */\r\nvar Cart = /** @class */ (function (_super) {\r\n    __extends(Cart, _super);\r\n    function Cart(app, options) {\r\n        return _super.call(this, app, types_1.Group.Cart, types_1.Group.Cart, options ? options.id : undefined) || this;\r\n    }\r\n    Cart.prototype.dispatch = function (action, payload) {\r\n        switch (action) {\r\n            case types_2.Action.FETCH:\r\n                this.dispatchCartAction(types_2.ActionType.FETCH);\r\n                break;\r\n            case types_2.Action.UPDATE:\r\n                this.dispatchCartAction(types_2.ActionType.UPDATE, payload);\r\n                break;\r\n            case types_2.Action.SET_CUSTOMER:\r\n                this.dispatchCartAction(types_2.ActionType.SET_CUSTOMER, payload);\r\n                break;\r\n            case types_2.Action.REMOVE_CUSTOMER:\r\n                this.dispatchCartAction(types_2.ActionType.REMOVE_CUSTOMER, payload);\r\n                break;\r\n            case types_2.Action.ADD_CUSTOMER_ADDRESS:\r\n                this.dispatchCartAction(types_2.ActionType.ADD_CUSTOMER_ADDRESS, payload);\r\n                break;\r\n            case types_2.Action.UPDATE_CUSTOMER_ADDRESS:\r\n                this.dispatchCartAction(types_2.ActionType.UPDATE_CUSTOMER_ADDRESS, payload);\r\n                break;\r\n            case types_2.Action.SET_DISCOUNT:\r\n                this.dispatchCartAction(types_2.ActionType.SET_DISCOUNT, payload);\r\n                break;\r\n            case types_2.Action.REMOVE_DISCOUNT:\r\n                this.dispatchCartAction(types_2.ActionType.REMOVE_DISCOUNT, payload);\r\n                break;\r\n            case types_2.Action.SET_PROPERTIES:\r\n                this.dispatchCartAction(types_2.ActionType.SET_PROPERTIES, payload);\r\n                break;\r\n            case types_2.Action.REMOVE_PROPERTIES:\r\n                this.dispatchCartAction(types_2.ActionType.REMOVE_PROPERTIES, payload);\r\n                break;\r\n            case types_2.Action.CLEAR:\r\n                this.dispatchCartAction(types_2.ActionType.CLEAR, payload);\r\n                break;\r\n            case types_2.Action.ADD_LINE_ITEM:\r\n                this.dispatchCartAction(types_2.ActionType.ADD_LINE_ITEM, payload);\r\n                break;\r\n            case types_2.Action.UPDATE_LINE_ITEM:\r\n                this.dispatchCartAction(types_2.ActionType.UPDATE_LINE_ITEM, payload);\r\n                break;\r\n            case types_2.Action.REMOVE_LINE_ITEM:\r\n                this.dispatchCartAction(types_2.ActionType.REMOVE_LINE_ITEM, payload);\r\n                break;\r\n            case types_2.Action.SET_LINE_ITEM_DISCOUNT:\r\n                this.dispatchCartAction(types_2.ActionType.SET_LINE_ITEM_DISCOUNT, payload);\r\n                break;\r\n            case types_2.Action.REMOVE_LINE_ITEM_DISCOUNT:\r\n                this.dispatchCartAction(types_2.ActionType.REMOVE_LINE_ITEM_DISCOUNT, payload);\r\n                break;\r\n            case types_2.Action.SET_LINE_ITEM_PROPERTIES:\r\n                this.dispatchCartAction(types_2.ActionType.SET_LINE_ITEM_PROPERTIES, payload);\r\n                break;\r\n            case types_2.Action.REMOVE_LINE_ITEM_PROPERTIES:\r\n                this.dispatchCartAction(types_2.ActionType.REMOVE_LINE_ITEM_PROPERTIES, payload);\r\n                break;\r\n            default:\r\n                Error_1.throwError(Error_1.ActionType.INVALID_ACTION_TYPE, helper_1.actionWrapper({\r\n                    group: this.group,\r\n                    type: action,\r\n                }));\r\n        }\r\n        return this;\r\n    };\r\n    Cart.prototype.dispatchCartAction = function (type, payload) {\r\n        this.app.dispatch(helper_1.actionWrapper({\r\n            type: type,\r\n            group: types_1.Group.Cart,\r\n            payload: __assign({}, (payload || {}), { id: this.id }),\r\n        }));\r\n    };\r\n    return Cart;\r\n}(helper_1.ActionSet));\r\nexports.Cart = Cart;\r\nfunction create(app, options) {\r\n    return new Cart(app, options);\r\n}\r\nexports.create = create;\r\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(37));\r\n__export(__webpack_require__(16));\r\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module Flash\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar helper_1 = __webpack_require__(2);\r\nvar types_1 = __webpack_require__(1);\r\nvar Error_1 = __webpack_require__(0);\r\nvar types_2 = __webpack_require__(16);\r\nfunction show(flashMessage) {\r\n    return helper_1.actionWrapper({\r\n        group: types_1.Group.Flash,\r\n        payload: flashMessage,\r\n        type: types_2.ActionType.SHOW,\r\n    });\r\n}\r\nexports.show = show;\r\nfunction clear(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: types_1.Group.Flash,\r\n        type: types_2.ActionType.CLEAR,\r\n    });\r\n}\r\nexports.clear = clear;\r\nfunction validationError(action) {\r\n    var payload;\r\n    switch (action.type) {\r\n        case types_2.ActionType.CLEAR:\r\n            payload = action.payload;\r\n            return payload === undefined || (payload.id === undefined || typeof payload.id === 'string')\r\n                ? undefined\r\n                : Error_1.invalidPayload(action, 'Id in payload is invalid');\r\n        case types_2.ActionType.SHOW:\r\n            payload = action.payload;\r\n            return payload !== undefined &&\r\n                (payload.id === undefined || typeof payload.id === 'string') &&\r\n                isValidFlashProps(payload)\r\n                ? undefined\r\n                : Error_1.invalidPayload(action);\r\n        default:\r\n            return Error_1.invalidActionType(action);\r\n    }\r\n}\r\nexports.validationError = validationError;\r\nfunction isValidFlashProps(props) {\r\n    return typeof props.message === 'string' && typeof props.duration === 'number';\r\n}\r\nvar Flash = /** @class */ (function (_super) {\r\n    __extends(Flash, _super);\r\n    function Flash(app, options) {\r\n        var _this = _super.call(this, app, types_1.Group.Flash, types_1.Group.Flash) || this;\r\n        _this.message = '';\r\n        _this.duration = 3000;\r\n        _this.set(options);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Flash.prototype, \"options\", {\r\n        get: function () {\r\n            return {\r\n                duration: this.duration,\r\n                isDismissible: this.isDismissible,\r\n                isError: this.isError,\r\n                message: this.message,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Flash.prototype, \"payload\", {\r\n        get: function () {\r\n            return __assign({ id: this.id }, this.options);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Flash.prototype.set = function (options) {\r\n        var mergedOptions = helper_1.getMergedProps(this.options, options);\r\n        var message = mergedOptions.message, isDismissible = mergedOptions.isDismissible, duration = mergedOptions.duration, isError = mergedOptions.isError;\r\n        if (!this.validateOptions(mergedOptions)) {\r\n            return this;\r\n        }\r\n        this.message = message;\r\n        this.isDismissible = isDismissible;\r\n        this.duration = duration;\r\n        this.isError = isError;\r\n        return this;\r\n    };\r\n    Flash.prototype.dispatch = function (action) {\r\n        switch (action) {\r\n            case types_2.Action.SHOW:\r\n                var openAction = show(this.payload);\r\n                this.app.dispatch(openAction);\r\n                break;\r\n            case types_2.Action.CLEAR:\r\n                this.app.dispatch(clear({ id: this.id }));\r\n                break;\r\n            default:\r\n                Error_1.throwError(Error_1.ActionType.INVALID_ACTION_TYPE, helper_1.actionWrapper({\r\n                    group: this.group,\r\n                    type: action,\r\n                }));\r\n        }\r\n        return this;\r\n    };\r\n    Flash.prototype.validateOptions = function (options) {\r\n        if (!isValidFlashProps(options)) {\r\n            var errorAction = helper_1.actionWrapper({\r\n                group: types_1.Group.Flash,\r\n                payload: __assign({ id: this.id }, options),\r\n            });\r\n            Error_1.throwError(Error_1.ActionType.INVALID_OPTIONS, errorAction);\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    return Flash;\r\n}(helper_1.ActionSet));\r\nexports.Flash = Flash;\r\nfunction create(app, options) {\r\n    return new Flash(app, options);\r\n}\r\nexports.create = create;\r\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(39));\r\n__export(__webpack_require__(17));\r\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module Loading\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar helper_1 = __webpack_require__(2);\r\nvar types_1 = __webpack_require__(1);\r\nvar Error_1 = __webpack_require__(0);\r\nvar types_2 = __webpack_require__(17);\r\nfunction start(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: types_1.Group.Loading,\r\n        type: types_2.ActionType.START,\r\n    });\r\n}\r\nexports.start = start;\r\nfunction stop(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: types_1.Group.Loading,\r\n        type: types_2.ActionType.STOP,\r\n    });\r\n}\r\nexports.stop = stop;\r\nfunction validationError(action) {\r\n    switch (action.type) {\r\n        case types_2.ActionType.START:\r\n        case types_2.ActionType.STOP:\r\n            // No validation since there should not be a payload\r\n            return undefined;\r\n        default:\r\n            return Error_1.invalidActionType(action);\r\n    }\r\n}\r\nexports.validationError = validationError;\r\nvar Loading = /** @class */ (function (_super) {\r\n    __extends(Loading, _super);\r\n    function Loading(app) {\r\n        return _super.call(this, app, types_1.Group.Loading, types_1.Group.Loading) || this;\r\n    }\r\n    Object.defineProperty(Loading.prototype, \"payload\", {\r\n        get: function () {\r\n            return { id: this.id };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Loading.prototype.dispatch = function (action) {\r\n        switch (action) {\r\n            case types_2.Action.START:\r\n                this.app.dispatch(start(this.payload));\r\n                break;\r\n            case types_2.Action.STOP:\r\n                this.app.dispatch(stop(this.payload));\r\n                break;\r\n            default:\r\n                Error_1.throwError(Error_1.ActionType.INVALID_ACTION_TYPE, helper_1.actionWrapper({\r\n                    group: this.group,\r\n                    type: action,\r\n                }));\r\n        }\r\n        return this;\r\n    };\r\n    return Loading;\r\n}(helper_1.ActionSet));\r\nexports.Loading = Loading;\r\nfunction create(app) {\r\n    return new Loading(app);\r\n}\r\nexports.create = create;\r\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(41));\r\n__export(__webpack_require__(18));\r\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar safe_redirect_1 = __webpack_require__(42);\r\nvar buttonHelper_1 = __webpack_require__(5);\r\nvar helper_1 = __webpack_require__(2);\r\nvar types_1 = __webpack_require__(1);\r\nvar Button_1 = __webpack_require__(3);\r\nvar Error_1 = __webpack_require__(0);\r\nvar helper_2 = __webpack_require__(6);\r\nvar types_2 = __webpack_require__(18);\r\nexports.GROUP = types_1.Group.Modal;\r\nvar FOOTER_BUTTON_PROPS = {\r\n    group: exports.GROUP,\r\n    subgroups: ['Footer'],\r\n    type: types_1.ComponentType.Button,\r\n};\r\nfunction openModal(modalPayload) {\r\n    return helper_1.actionWrapper({\r\n        group: exports.GROUP,\r\n        payload: modalPayload,\r\n        type: types_2.ActionType.OPEN,\r\n    });\r\n}\r\nexports.openModal = openModal;\r\nfunction closeModal(modalClosePayload) {\r\n    return helper_1.actionWrapper({\r\n        group: exports.GROUP,\r\n        payload: modalClosePayload,\r\n        type: types_2.ActionType.CLOSE,\r\n    });\r\n}\r\nexports.closeModal = closeModal;\r\nfunction clickFooterButton(id, payload) {\r\n    var component = __assign({ id: id }, FOOTER_BUTTON_PROPS);\r\n    return Button_1.clickButton(exports.GROUP, component, payload);\r\n}\r\nexports.clickFooterButton = clickFooterButton;\r\nfunction update(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: exports.GROUP,\r\n        type: types_2.ActionType.UPDATE,\r\n    });\r\n}\r\nexports.update = update;\r\nfunction isValidSrc(options, localOrigin) {\r\n    var url = options.url, path = options.path;\r\n    if (!url && !path) {\r\n        return false;\r\n    }\r\n    if (path && !helper_2.isValidRelativePath(path)) {\r\n        return false;\r\n    }\r\n    if (url) {\r\n        if (!localOrigin) {\r\n            return false;\r\n        }\r\n        if (!helper_2.isValidAbsolutePath(url)) {\r\n            return false;\r\n        }\r\n        var hostName = void 0;\r\n        try {\r\n            hostName = new URL(localOrigin).hostname;\r\n        }\r\n        catch (error) {\r\n            return false;\r\n        }\r\n        var isSafeSrc = safe_redirect_1.isSafe(url, {\r\n            requireAbsolute: true,\r\n            requireSSL: true,\r\n            whitelist: [hostName],\r\n        });\r\n        if (!isSafeSrc) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexports.isValidSrc = isValidSrc;\r\nfunction validationError(action, localOrigin) {\r\n    var payload;\r\n    switch (action.type) {\r\n        case types_2.ActionType.OPEN:\r\n            payload = action.payload;\r\n            if (payload === undefined) {\r\n                return Error_1.invalidPayload(action, Error_1.Message.MISSING_PAYLOAD);\r\n            }\r\n            if (payload.id && typeof payload.id !== 'string') {\r\n                return Error_1.invalidPayload(action, Error_1.Message.INVALID_PAYLOAD_ID);\r\n            }\r\n            return isValidModalProps(payload, localOrigin) ? undefined : Error_1.invalidPayload(action);\r\n        case types_2.ActionType.UPDATE:\r\n            payload = action.payload;\r\n            if (payload === undefined) {\r\n                return Error_1.invalidPayload(action, Error_1.Message.MISSING_PAYLOAD);\r\n            }\r\n            if (typeof payload.id !== 'string') {\r\n                return Error_1.invalidPayload(action, Error_1.Message.INVALID_PAYLOAD_ID);\r\n            }\r\n            // Id is always required when updating\r\n            return isValidModalProps(payload, localOrigin) ? undefined : Error_1.invalidPayload(action);\r\n        case types_2.ActionType.CLOSE:\r\n            payload = action.payload;\r\n            if (payload && payload.id && typeof payload.id !== 'string') {\r\n                return Error_1.invalidPayload(action, Error_1.Message.INVALID_PAYLOAD_ID);\r\n            }\r\n            return undefined;\r\n        case types_2.FooterActionType.FOOTER_BUTTON_CLICK:\r\n            return Button_1.validationError(__assign({}, action, { type: Button_1.ActionType.CLICK }));\r\n        case types_2.FooterActionType.FOOTER_BUTTON_UPDATE:\r\n            return Button_1.validationError(__assign({}, action, { type: Button_1.ActionType.UPDATE }));\r\n        default:\r\n            return Error_1.invalidActionType(action);\r\n    }\r\n}\r\nexports.validationError = validationError;\r\nfunction isValidModalProps(props, localOrigin) {\r\n    if (props === undefined) {\r\n        return false;\r\n    }\r\n    if (isIframeModal(props) &&\r\n        (typeof localOrigin !== 'string' || !isValidSrc(props, localOrigin))) {\r\n        return false;\r\n    }\r\n    return ((isMessageModal(props) || isIframeModal(props)) &&\r\n        isValidModalFooter(props.footer) &&\r\n        isValidModalSize(props.size));\r\n}\r\nexports.isValidModalProps = isValidModalProps;\r\nfunction isValidModalFooter(footer) {\r\n    if (footer === undefined || !footer.hasOwnProperty('buttons')) {\r\n        return true;\r\n    }\r\n    if (footer.hasOwnProperty('buttons') &&\r\n        (Array.isArray(footer.buttons) || typeof footer.buttons !== 'object')) {\r\n        return false;\r\n    }\r\n    var _a = footer.buttons, secondary = _a.secondary, primary = _a.primary;\r\n    if (primary && !Button_1.isValidButtonProps(primary)) {\r\n        return false;\r\n    }\r\n    if (secondary && !Array.isArray(secondary)) {\r\n        return false;\r\n    }\r\n    else if (Array.isArray(secondary)) {\r\n        for (var _i = 0, secondary_1 = secondary; _i < secondary_1.length; _i++) {\r\n            var button = secondary_1[_i];\r\n            if (!Button_1.isValidButtonProps(button)) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexports.isValidModalFooter = isValidModalFooter;\r\nfunction isValidModalSize(size) {\r\n    if (size === undefined) {\r\n        return true;\r\n    }\r\n    var valid = false;\r\n    helper_1.forEachInEnum(types_2.Size, function (sizeOption) {\r\n        if (size === sizeOption) {\r\n            valid = true;\r\n        }\r\n    });\r\n    return valid;\r\n}\r\nexports.isValidModalSize = isValidModalSize;\r\nfunction isIframeModal(options) {\r\n    return (typeof options.url === 'string' ||\r\n        typeof options.path === 'string');\r\n}\r\nexports.isIframeModal = isIframeModal;\r\nfunction isMessageModal(options) {\r\n    return typeof options.message === 'string';\r\n}\r\nexports.isMessageModal = isMessageModal;\r\nvar Modal = /** @class */ (function (_super) {\r\n    __extends(Modal, _super);\r\n    function Modal() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.size = types_2.Size.Small;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Modal.prototype, \"footer\", {\r\n        get: function () {\r\n            if (!this.footerPrimary && !this.footerSecondary) {\r\n                return undefined;\r\n            }\r\n            return {\r\n                buttons: {\r\n                    primary: this.footerPrimary,\r\n                    secondary: this.footerSecondary,\r\n                },\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Modal.prototype, \"footerOptions\", {\r\n        get: function () {\r\n            if (!this.footerPrimaryOptions && !this.footerSecondaryOptions) {\r\n                return undefined;\r\n            }\r\n            return {\r\n                buttons: {\r\n                    primary: this.footerPrimaryOptions,\r\n                    secondary: this.footerSecondaryOptions,\r\n                },\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Modal.prototype.close = function () {\r\n        this.app.dispatch(closeModal({ id: this.id }));\r\n    };\r\n    Modal.prototype.setFooterPrimaryButton = function (newOptions, updateCb) {\r\n        var _this = this;\r\n        var subgroups = FOOTER_BUTTON_PROPS.subgroups;\r\n        this.footerPrimaryOptions = this.getChildButton(newOptions, this.footerPrimaryOptions);\r\n        this.footerPrimary = this.footerPrimaryOptions\r\n            ? buttonHelper_1.getSingleButton(this, this.footerPrimaryOptions, subgroups, function (newPayload) {\r\n                _this.updatePrimaryFooterButton(newPayload, updateCb);\r\n            })\r\n            : undefined;\r\n    };\r\n    Modal.prototype.setFooterSecondaryButtons = function (newOptions, updateCb) {\r\n        var _this = this;\r\n        var subgroups = FOOTER_BUTTON_PROPS.subgroups;\r\n        var newButtons = newOptions || [];\r\n        var currentOptions = (this.footerOptions && this.footerOptions.buttons.secondary) || [];\r\n        this.footerSecondaryOptions = this.getUpdatedChildActions(newButtons, currentOptions);\r\n        this.footerSecondary = this.footerSecondaryOptions\r\n            ? this.footerSecondaryOptions.map(function (action) {\r\n                return buttonHelper_1.getSingleButton(_this, action, subgroups, function (newPayload) {\r\n                    _this.updateSecondaryFooterButton(newPayload, updateCb);\r\n                });\r\n            })\r\n            : undefined;\r\n    };\r\n    Modal.prototype.getChildButton = function (newAction, currentAction) {\r\n        var newButtons = newAction ? [newAction] : [];\r\n        var currentButtons = currentAction ? [currentAction] : [];\r\n        var updatedButton = this.getUpdatedChildActions(newButtons, currentButtons);\r\n        return updatedButton ? updatedButton[0] : undefined;\r\n    };\r\n    Modal.prototype.updatePrimaryFooterButton = function (newPayload, updateCb) {\r\n        if (!this.footer || !this.footer.buttons.primary) {\r\n            return;\r\n        }\r\n        if (helper_1.updateActionFromPayload(this.footer.buttons.primary, Button_1.getSafeButtonProps(newPayload))) {\r\n            updateCb();\r\n        }\r\n    };\r\n    Modal.prototype.updateSecondaryFooterButton = function (newPayload, updateCb) {\r\n        if (!this.footer || !this.footer.buttons || !this.footer.buttons.secondary) {\r\n            return;\r\n        }\r\n        var updated;\r\n        for (var _i = 0, _a = this.footer.buttons.secondary; _i < _a.length; _i++) {\r\n            var action = _a[_i];\r\n            updated = helper_1.updateActionFromPayload(action, Button_1.getSafeButtonProps(newPayload));\r\n            if (updated) {\r\n                break;\r\n            }\r\n        }\r\n        if (updated) {\r\n            updateCb();\r\n        }\r\n    };\r\n    Modal.prototype.validateOptions = function (options) {\r\n        var props = __assign({ id: this.id }, options);\r\n        if (!isValidModalProps(options, this.app.localOrigin)) {\r\n            var errorAction = update(props);\r\n            Error_1.throwError(Error_1.ActionType.INVALID_OPTIONS, errorAction);\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    return Modal;\r\n}(helper_1.ActionSetWithChildren));\r\nexports.Modal = Modal;\r\nvar ModalMessage = /** @class */ (function (_super) {\r\n    __extends(ModalMessage, _super);\r\n    function ModalMessage(app, options) {\r\n        var _this = _super.call(this, app, exports.GROUP, exports.GROUP) || this;\r\n        _this.set(options, false);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ModalMessage.prototype, \"payload\", {\r\n        get: function () {\r\n            return __assign({}, this.options, { footer: this.footer, id: this.id });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ModalMessage.prototype, \"options\", {\r\n        get: function () {\r\n            return {\r\n                footer: this.footerOptions,\r\n                message: this.message,\r\n                size: this.size,\r\n                title: this.title,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ModalMessage.prototype.set = function (options, shouldUpdate) {\r\n        var _this = this;\r\n        if (shouldUpdate === void 0) { shouldUpdate = true; }\r\n        var mergedOptions = helper_1.getMergedProps(this.options, options);\r\n        var title = mergedOptions.title, footer = mergedOptions.footer, message = mergedOptions.message, size = mergedOptions.size;\r\n        if (!this.validateOptions(mergedOptions)) {\r\n            return this;\r\n        }\r\n        this.title = title;\r\n        this.message = message;\r\n        this.size = size;\r\n        this.setFooterPrimaryButton(footer ? footer.buttons.primary : undefined, function () {\r\n            _this.dispatch(types_2.Action.UPDATE);\r\n        });\r\n        this.setFooterSecondaryButtons(footer ? footer.buttons.secondary : undefined, function () {\r\n            _this.dispatch(types_2.Action.UPDATE);\r\n        });\r\n        if (shouldUpdate) {\r\n            this.dispatch(types_2.Action.UPDATE);\r\n        }\r\n        return this;\r\n    };\r\n    ModalMessage.prototype.dispatch = function (action) {\r\n        switch (action) {\r\n            case types_2.Action.OPEN:\r\n                this.app.dispatch(openModal(this.payload));\r\n                break;\r\n            case types_2.Action.CLOSE:\r\n                this.close();\r\n                break;\r\n            case types_2.Action.UPDATE:\r\n                this.app.dispatch(update(this.payload));\r\n                break;\r\n            default:\r\n                Error_1.throwError(Error_1.ActionType.INVALID_ACTION_TYPE, helper_1.actionWrapper({\r\n                    group: this.group,\r\n                    type: action,\r\n                }));\r\n        }\r\n        return this;\r\n    };\r\n    return ModalMessage;\r\n}(Modal));\r\nexports.ModalMessage = ModalMessage;\r\nvar ModalIframe = /** @class */ (function (_super) {\r\n    __extends(ModalIframe, _super);\r\n    function ModalIframe(app, options) {\r\n        var _this = _super.call(this, app, exports.GROUP, exports.GROUP) || this;\r\n        _this.set(options, false);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ModalIframe.prototype, \"payload\", {\r\n        get: function () {\r\n            return __assign({}, this.options, { footer: this.footer, id: this.id });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ModalIframe.prototype, \"options\", {\r\n        get: function () {\r\n            return {\r\n                footer: this.footerOptions,\r\n                path: this.path,\r\n                size: this.size,\r\n                title: this.title,\r\n                url: this.url,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ModalIframe.prototype.set = function (options, shouldUpdate) {\r\n        var _this = this;\r\n        if (shouldUpdate === void 0) { shouldUpdate = true; }\r\n        var mergedOptions = helper_1.getMergedProps(this.options, options);\r\n        var title = mergedOptions.title, footer = mergedOptions.footer, path = mergedOptions.path, url = mergedOptions.url, size = mergedOptions.size;\r\n        if (!this.validateOptions(mergedOptions)) {\r\n            return this;\r\n        }\r\n        this.title = title;\r\n        this.url = url;\r\n        this.path = path;\r\n        this.size = size;\r\n        this.setFooterPrimaryButton(footer ? footer.buttons.primary : undefined, function () {\r\n            _this.dispatch(types_2.Action.UPDATE);\r\n        });\r\n        this.setFooterSecondaryButtons(footer ? footer.buttons.secondary : undefined, function () {\r\n            _this.dispatch(types_2.Action.UPDATE);\r\n        });\r\n        if (shouldUpdate) {\r\n            this.dispatch(types_2.Action.UPDATE);\r\n        }\r\n        return this;\r\n    };\r\n    ModalIframe.prototype.dispatch = function (action) {\r\n        switch (action) {\r\n            case types_2.Action.OPEN:\r\n                this.app.dispatch(openModal(this.payload));\r\n                break;\r\n            case types_2.Action.CLOSE:\r\n                this.close();\r\n                break;\r\n            case types_2.Action.UPDATE:\r\n                this.app.dispatch(update(this.payload));\r\n                break;\r\n            default:\r\n                Error_1.throwError(Error_1.ActionType.INVALID_ACTION_TYPE, helper_1.actionWrapper({\r\n                    group: this.group,\r\n                    type: action,\r\n                }));\r\n        }\r\n        return this;\r\n    };\r\n    return ModalIframe;\r\n}(Modal));\r\nexports.ModalIframe = ModalIframe;\r\nexports.create = function (app, options) {\r\n    if (isIframeModal(options)) {\r\n        return new ModalIframe(app, options);\r\n    }\r\n    return new ModalMessage(app, options);\r\n};\r\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar FILE_URI_MATCH = /\\/\\/\\//;\r\nvar INVALID_RELATIVE_URL = /[/\\\\][/\\\\]/;\r\nvar VALID_PROTOCOLS = ['https:', 'http:'];\r\nvar DUMMY_HOSTNAME = 'http://test.com';\r\nfunction isSafe(redirectUrl, _a) {\r\n    var _b = _a === void 0 ? {} : _a, _c = _b.whitelist, whitelist = _c === void 0 ? [] : _c, _d = _b.subdomains, subdomains = _d === void 0 ? [] : _d, matchPath = _b.matchPath, requireAbsolute = _b.requireAbsolute, requireSSL = _b.requireSSL;\r\n    if (FILE_URI_MATCH.test(redirectUrl)) {\r\n        return false;\r\n    }\r\n    if (redirectUrl.startsWith('/')) {\r\n        if (whitelist.length > 0 || subdomains.length > 0 || requireAbsolute || requireSSL) {\r\n            return false;\r\n        }\r\n        if (matchPath) {\r\n            // Creating a new URL expands the pathname in case of things like `/a/../b`\r\n            return pathMatches(new URL(redirectUrl, DUMMY_HOSTNAME), redirectUrl, matchPath);\r\n        }\r\n        return !INVALID_RELATIVE_URL.test(redirectUrl);\r\n    }\r\n    var url;\r\n    try {\r\n        url = new URL(redirectUrl);\r\n    }\r\n    catch (error) {\r\n        return false;\r\n    }\r\n    if (!VALID_PROTOCOLS.includes(url.protocol)) {\r\n        return false;\r\n    }\r\n    if (requireSSL && url.protocol !== 'https:') {\r\n        return false;\r\n    }\r\n    if (url.username || url.password) {\r\n        return false;\r\n    }\r\n    if (matchPath && !pathMatches(url, redirectUrl, matchPath)) {\r\n        return false;\r\n    }\r\n    if (!hostIsValid(url, whitelist, subdomains)) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nexports.isSafe = isSafe;\r\nfunction hostIsValid(url, whitelist, subdomains) {\r\n    if (!subdomains.every(function (subdomain) { return subdomain.startsWith('.'); })) {\r\n        throw new TypeError('Subdomains must begin with .');\r\n    }\r\n    var hostname = url.hostname;\r\n    return ((whitelist.length === 0 && subdomains.length === 0) ||\r\n        whitelist.includes(hostname) ||\r\n        subdomains.some(function (subdomain) { return hostname.endsWith(subdomain); }));\r\n}\r\nfunction pathMatches(url, originalUrl, matcher) {\r\n    var pathname = url.pathname;\r\n    // Gets just the unresolve pathname, i.e., `http://foo.com/a/../b => /a/../b\r\n    var originalPathname = originalUrl.replace(url.origin, '').split('?')[0];\r\n    return typeof matcher === 'string'\r\n        ? pathname === matcher && originalPathname === matcher\r\n        : matcher.test(pathname) && matcher.test(originalPathname);\r\n}\r\nfunction makeSafe(url, fallback, options) {\r\n    return isSafe(url, options) ? encodeURI(url) : fallback;\r\n}\r\nexports.makeSafe = makeSafe;\r\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar validator_1 = __importDefault(__webpack_require__(44));\r\nexports.validationError = validator_1.default;\r\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar helper_1 = __webpack_require__(2);\r\nvar Error_1 = __webpack_require__(0);\r\nvar actions_1 = __webpack_require__(19);\r\nvar types_1 = __webpack_require__(7);\r\nvar actions_2 = __webpack_require__(20);\r\nvar types_2 = __webpack_require__(8);\r\nfunction validationError(action) {\r\n    if (helper_1.findMatchInEnum(types_2.ActionType, action.type)) {\r\n        return actions_2.validationError(action);\r\n    }\r\n    if (helper_1.findMatchInEnum(types_1.ActionType, action.type)) {\r\n        return actions_1.validationError(action);\r\n    }\r\n    return Error_1.invalidActionType(action);\r\n}\r\nexports.default = validationError;\r\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(19));\r\n__export(__webpack_require__(7));\r\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(20));\r\n__export(__webpack_require__(8));\r\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module Print\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar helper_1 = __webpack_require__(2);\r\nvar types_1 = __webpack_require__(1);\r\nvar Error_1 = __webpack_require__(0);\r\nvar types_2 = __webpack_require__(21);\r\nfunction app() {\r\n    return helper_1.actionWrapper({\r\n        group: types_1.Group.Print,\r\n        type: types_2.ActionType.APP,\r\n    });\r\n}\r\nexports.app = app;\r\nfunction validationError(action) {\r\n    switch (action.type) {\r\n        case types_2.ActionType.APP:\r\n            // No validation since there should not be a payload\r\n            return undefined;\r\n        default:\r\n            return Error_1.invalidActionType(action);\r\n    }\r\n}\r\nexports.validationError = validationError;\r\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(49));\r\n__export(__webpack_require__(22));\r\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module ResourcePicker\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Error_1 = __webpack_require__(0);\r\nvar helper_1 = __webpack_require__(2);\r\nvar types_1 = __webpack_require__(1);\r\nvar types_2 = __webpack_require__(22);\r\nexports.GROUP = types_1.Group.ResourcePicker;\r\nfunction select(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: exports.GROUP,\r\n        type: types_2.ActionType.SELECT,\r\n    });\r\n}\r\nexports.select = select;\r\nfunction open(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: exports.GROUP,\r\n        type: types_2.ActionType.OPEN,\r\n    });\r\n}\r\nexports.open = open;\r\nfunction cancel(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: exports.GROUP,\r\n        type: types_2.ActionType.CANCEL,\r\n    });\r\n}\r\nexports.cancel = cancel;\r\nfunction close(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: exports.GROUP,\r\n        type: types_2.ActionType.CANCEL,\r\n    });\r\n}\r\nexports.close = close;\r\nfunction update(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: exports.GROUP,\r\n        type: types_2.ActionType.UPDATE,\r\n    });\r\n}\r\nexports.update = update;\r\nfunction isValidResourceType(resourceType) {\r\n    return helper_1.findMatchInEnum(types_2.ResourceType, resourceType);\r\n}\r\nfunction validationError(action) {\r\n    var payload;\r\n    switch (action.type) {\r\n        case types_2.ActionType.UPDATE:\r\n        case types_2.ActionType.OPEN:\r\n            payload = action.payload;\r\n            return payload !== undefined &&\r\n                payload.id !== undefined &&\r\n                typeof payload.id === 'string' &&\r\n                isValidResourceType(payload.resourceType)\r\n                ? undefined\r\n                : Error_1.invalidPayload(action);\r\n        case types_2.ActionType.SELECT:\r\n            payload = action.payload;\r\n            return payload !== undefined &&\r\n                payload.id !== undefined &&\r\n                typeof payload.id === 'string' &&\r\n                Array.isArray(payload.selection)\r\n                ? undefined\r\n                : Error_1.invalidPayload(action);\r\n        case types_2.ActionType.CANCEL:\r\n        case types_2.ActionType.CLOSE:\r\n            return undefined;\r\n        default:\r\n            return Error_1.invalidActionType(action);\r\n    }\r\n}\r\nexports.validationError = validationError;\r\nvar ResourcePicker = /** @class */ (function (_super) {\r\n    __extends(ResourcePicker, _super);\r\n    function ResourcePicker(app, options, resourceType) {\r\n        var _this = _super.call(this, app, exports.GROUP, exports.GROUP) || this;\r\n        _this.selection = [];\r\n        if (!isValidResourceType(resourceType)) {\r\n            var errorAction = helper_1.actionWrapper({\r\n                group: exports.GROUP,\r\n                payload: __assign({ id: _this.id }, options, { resourceType: resourceType }),\r\n            });\r\n            Error_1.throwError(Error_1.ActionType.INVALID_OPTIONS, errorAction);\r\n        }\r\n        _this.resourceType = resourceType;\r\n        _this.set(options, false);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ResourcePicker.prototype, \"payload\", {\r\n        get: function () {\r\n            return __assign({}, this.options, { id: this.id, resourceType: this.resourceType });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ResourcePicker.prototype, \"options\", {\r\n        get: function () {\r\n            var options = {\r\n                initialQuery: this.initialQuery,\r\n                selectMultiple: this.selectMultiple,\r\n                showHidden: this.showHidden,\r\n            };\r\n            if (this.resourceType === types_2.ResourceType.Product) {\r\n                var productOptions = __assign({}, options, { showVariants: this.showVariants });\r\n                return productOptions;\r\n            }\r\n            return options;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ResourcePicker.prototype.set = function (options, shouldUpdate) {\r\n        if (shouldUpdate === void 0) { shouldUpdate = true; }\r\n        var mergedOptions = helper_1.getMergedProps(this.options, options);\r\n        var initialQuery = mergedOptions.initialQuery, _a = mergedOptions.showHidden, showHidden = _a === void 0 ? false : _a, _b = mergedOptions.showVariants, showVariants = _b === void 0 ? true : _b, _c = mergedOptions.selectMultiple, selectMultiple = _c === void 0 ? true : _c;\r\n        this.initialQuery = initialQuery;\r\n        this.showHidden = Boolean(showHidden);\r\n        this.showVariants = Boolean(showVariants);\r\n        this.selectMultiple = Boolean(selectMultiple);\r\n        if (shouldUpdate) {\r\n            this.update();\r\n        }\r\n        return this;\r\n    };\r\n    ResourcePicker.prototype.dispatch = function (action, selection) {\r\n        if (action === types_2.Action.OPEN) {\r\n            this.open();\r\n        }\r\n        else if (action === types_2.Action.UPDATE) {\r\n            this.update();\r\n        }\r\n        else if (action === types_2.Action.CLOSE || action === types_2.Action.CANCEL) {\r\n            this.cancel();\r\n        }\r\n        else if (action === types_2.Action.SELECT) {\r\n            this.selection = selection;\r\n            this.app.dispatch(select({ id: this.id, selection: this.selection }));\r\n        }\r\n        else {\r\n            Error_1.throwError(Error_1.ActionType.INVALID_ACTION_TYPE, helper_1.actionWrapper({\r\n                group: this.group,\r\n                type: action,\r\n            }));\r\n        }\r\n        return this;\r\n    };\r\n    ResourcePicker.prototype.update = function () {\r\n        this.app.dispatch(update(this.payload));\r\n    };\r\n    ResourcePicker.prototype.open = function () {\r\n        this.app.dispatch(open(this.payload));\r\n    };\r\n    ResourcePicker.prototype.cancel = function () {\r\n        this.app.dispatch(cancel({ id: this.id }));\r\n    };\r\n    ResourcePicker.prototype.close = function () {\r\n        this.cancel();\r\n    };\r\n    return ResourcePicker;\r\n}(helper_1.ActionSet));\r\nexports.ResourcePicker = ResourcePicker;\r\nexports.create = function (app, baseOptions) {\r\n    var resourceType = baseOptions.resourceType, _a = baseOptions.options, options = _a === void 0 ? {} : _a;\r\n    return new ResourcePicker(app, options, resourceType);\r\n};\r\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__export(__webpack_require__(51));\r\n__export(__webpack_require__(23));\r\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * @module TitleBar\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Button_1 = __webpack_require__(3);\r\nvar ButtonGroup_1 = __webpack_require__(4);\r\nvar buttonGroupHelper_1 = __webpack_require__(52);\r\nvar buttonHelper_1 = __webpack_require__(5);\r\nvar helper_1 = __webpack_require__(2);\r\nvar types_1 = __webpack_require__(1);\r\nvar Error_1 = __webpack_require__(0);\r\nvar types_2 = __webpack_require__(23);\r\nexports.GROUP = types_1.Group.TitleBar;\r\nvar TITLEBAR_BUTTON_PROPS = {\r\n    group: exports.GROUP,\r\n    subgroups: ['Buttons'],\r\n};\r\nvar BREADCRUMB_BUTTON_PROPS = {\r\n    group: exports.GROUP,\r\n    subgroups: ['Breadcrumbs'],\r\n    type: types_1.ComponentType.Button,\r\n};\r\nfunction clickActionButton(id, payload) {\r\n    var type = types_1.ComponentType.Button;\r\n    var component = __assign({ id: id, type: type }, TITLEBAR_BUTTON_PROPS);\r\n    return Button_1.clickButton(exports.GROUP, component, payload);\r\n}\r\nexports.clickActionButton = clickActionButton;\r\nfunction clickBreadcrumb(id, payload) {\r\n    var component = __assign({ id: id }, BREADCRUMB_BUTTON_PROPS);\r\n    return Button_1.clickButton(exports.GROUP, component, payload);\r\n}\r\nexports.clickBreadcrumb = clickBreadcrumb;\r\nfunction update(payload) {\r\n    return helper_1.actionWrapper({\r\n        payload: payload,\r\n        group: exports.GROUP,\r\n        type: types_2.ActionType.UPDATE,\r\n    });\r\n}\r\nexports.update = update;\r\nfunction isValidTitleBarPayload(payload) {\r\n    if (!payload) {\r\n        return false;\r\n    }\r\n    return ((payload.id === undefined || typeof payload.id === 'string') && isValidTitleBarProps(payload));\r\n}\r\nexports.isValidTitleBarPayload = isValidTitleBarPayload;\r\nfunction isValidTitleBarProps(props) {\r\n    return ((typeof props.title === 'string' || props.title === undefined) &&\r\n        isValidTitleBarButtons(props.buttons) &&\r\n        isValidTitleBarBreadcrumbs(props.breadcrumbs));\r\n}\r\nexports.isValidTitleBarProps = isValidTitleBarProps;\r\nfunction isValidTitleBarButtons(buttons) {\r\n    if (buttons === undefined) {\r\n        return true;\r\n    }\r\n    if (typeof buttons !== 'object' || Array.isArray(buttons)) {\r\n        return false;\r\n    }\r\n    var primary = buttons.primary;\r\n    var secondary = buttons.secondary;\r\n    if (primary && !Button_1.isValidButtonProps(primary)) {\r\n        return false;\r\n    }\r\n    if (secondary !== undefined && !Array.isArray(secondary)) {\r\n        return false;\r\n    }\r\n    if (Array.isArray(secondary)) {\r\n        for (var _i = 0, secondary_1 = secondary; _i < secondary_1.length; _i++) {\r\n            var button = secondary_1[_i];\r\n            if (ButtonGroup_1.isGroupedButtonPayload(button) && ButtonGroup_1.isValidButtonGroupProps(button)) {\r\n                continue;\r\n            }\r\n            else if (!ButtonGroup_1.isGroupedButtonPayload(button) && Button_1.isValidButtonProps(button)) {\r\n                continue;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nexports.isValidTitleBarButtons = isValidTitleBarButtons;\r\nfunction isValidTitleBarBreadcrumbs(button) {\r\n    if (button === undefined || Button_1.isValidButtonProps(button)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nexports.isValidTitleBarBreadcrumbs = isValidTitleBarBreadcrumbs;\r\nfunction validationError(action) {\r\n    var payload;\r\n    switch (action.type) {\r\n        case types_2.ActionType.UPDATE:\r\n            payload = action.payload;\r\n            if (payload === undefined) {\r\n                return Error_1.invalidPayload(action, Error_1.Message.MISSING_PAYLOAD);\r\n            }\r\n            if (typeof payload.id !== 'string') {\r\n                return Error_1.invalidPayload(action, Error_1.Message.INVALID_PAYLOAD_ID);\r\n            }\r\n            return isValidTitleBarPayload(payload) ? undefined : Error_1.invalidPayload(action);\r\n        case types_2.ButtonsActionType.BUTTON_CLICK:\r\n        case types_2.ButtonsActionType.BREADCRUMBS_CLICK:\r\n            return Button_1.validationError(__assign({}, action, { type: Button_1.ActionType.CLICK }));\r\n        case types_2.ButtonsActionType.BUTTON_UPDATE:\r\n        case types_2.ButtonsActionType.BREADCRUMBS_UPDATE:\r\n            return Button_1.validationError(__assign({}, action, { type: Button_1.ActionType.UPDATE }));\r\n        case types_2.ButtonsActionType.BUTTON_GROUP_UPDATE:\r\n            return ButtonGroup_1.validationError(__assign({}, action, { type: ButtonGroup_1.ActionType.UPDATE }));\r\n        default:\r\n            return Error_1.invalidActionType(action);\r\n    }\r\n}\r\nexports.validationError = validationError;\r\nvar TitleBar = /** @class */ (function (_super) {\r\n    __extends(TitleBar, _super);\r\n    function TitleBar(app, options) {\r\n        var _this = _super.call(this, app, exports.GROUP, exports.GROUP) || this;\r\n        // Trigger 'update' on creation\r\n        _this.set(options);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(TitleBar.prototype, \"buttons\", {\r\n        get: function () {\r\n            if (!this.primary && !this.secondary) {\r\n                return undefined;\r\n            }\r\n            return {\r\n                primary: this.primary,\r\n                secondary: this.secondary,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TitleBar.prototype, \"buttonsOptions\", {\r\n        get: function () {\r\n            if (!this.primaryOptions && !this.secondaryOptions) {\r\n                return undefined;\r\n            }\r\n            return {\r\n                primary: this.primaryOptions,\r\n                secondary: this.secondaryOptions,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TitleBar.prototype, \"options\", {\r\n        get: function () {\r\n            return {\r\n                breadcrumbs: this.breadcrumbsOption,\r\n                buttons: this.buttonsOptions,\r\n                title: this.title,\r\n            };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TitleBar.prototype, \"payload\", {\r\n        get: function () {\r\n            return __assign({}, this.options, { breadcrumbs: this.breadcrumb, buttons: this.buttons, id: this.id });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TitleBar.prototype.set = function (options, shouldUpdate) {\r\n        if (shouldUpdate === void 0) { shouldUpdate = true; }\r\n        var mergedOptions = helper_1.getMergedProps(this.options, options);\r\n        var title = mergedOptions.title, buttons = mergedOptions.buttons, breadcrumbs = mergedOptions.breadcrumbs;\r\n        if (!this.validateOptions(mergedOptions)) {\r\n            return this;\r\n        }\r\n        this.title = title;\r\n        this.setBreadcrumbs(breadcrumbs);\r\n        this.setPrimaryButton(buttons ? buttons.primary : undefined);\r\n        this.setSecondaryButton(buttons ? buttons.secondary : undefined);\r\n        if (shouldUpdate) {\r\n            this.dispatch(types_2.Action.UPDATE);\r\n        }\r\n        return this;\r\n    };\r\n    TitleBar.prototype.dispatch = function (action) {\r\n        switch (action) {\r\n            case types_2.Action.UPDATE:\r\n                this.app.dispatch(update(this.payload));\r\n                break;\r\n            default:\r\n                Error_1.throwError(Error_1.ActionType.INVALID_ACTION_TYPE, helper_1.actionWrapper({\r\n                    group: this.group,\r\n                    type: action,\r\n                }));\r\n        }\r\n        return this;\r\n    };\r\n    TitleBar.prototype.getButton = function (button, subgroups, updateCb) {\r\n        if (button instanceof ButtonGroup_1.ButtonGroup) {\r\n            return buttonGroupHelper_1.getGroupedButton(this, button, subgroups, updateCb);\r\n        }\r\n        return buttonHelper_1.getSingleButton(this, button, subgroups, updateCb);\r\n    };\r\n    TitleBar.prototype.updatePrimaryButton = function (newPayload) {\r\n        if (!this.primary) {\r\n            return;\r\n        }\r\n        if (helper_1.updateActionFromPayload(this.primary, Button_1.getSafeButtonProps(newPayload))) {\r\n            this.dispatch(types_2.Action.UPDATE);\r\n        }\r\n    };\r\n    TitleBar.prototype.updateSecondaryButtons = function (newPayload) {\r\n        if (!this.secondary) {\r\n            return;\r\n        }\r\n        var buttonToUpdate = this.secondary.find(function (action) { return action.id === newPayload.id; });\r\n        if (!buttonToUpdate) {\r\n            return;\r\n        }\r\n        var updated = false;\r\n        if (ButtonGroup_1.isGroupedButtonPayload(newPayload)) {\r\n            updated = helper_1.updateActionFromPayload(buttonToUpdate, ButtonGroup_1.getSafeButtonGroupProps(newPayload));\r\n        }\r\n        else {\r\n            updated = helper_1.updateActionFromPayload(buttonToUpdate, Button_1.getSafeButtonProps(newPayload));\r\n        }\r\n        if (updated) {\r\n            this.dispatch(types_2.Action.UPDATE);\r\n        }\r\n    };\r\n    TitleBar.prototype.updateBreadcrumbButton = function (newPayload) {\r\n        if (!this.breadcrumb) {\r\n            return;\r\n        }\r\n        if (helper_1.updateActionFromPayload(this.breadcrumb, Button_1.getSafeButtonProps(newPayload))) {\r\n            this.dispatch(types_2.Action.UPDATE);\r\n        }\r\n    };\r\n    TitleBar.prototype.setPrimaryButton = function (newOptions) {\r\n        this.primaryOptions = this.getChildButton(newOptions, this.primaryOptions);\r\n        this.primary = this.primaryOptions\r\n            ? this.getButton(this.primaryOptions, TITLEBAR_BUTTON_PROPS.subgroups, this.updatePrimaryButton)\r\n            : undefined;\r\n    };\r\n    TitleBar.prototype.setSecondaryButton = function (newOptions) {\r\n        var _this = this;\r\n        var newButtons = newOptions || [];\r\n        var currentButtons = this.secondaryOptions || [];\r\n        this.secondaryOptions = this.getUpdatedChildActions(newButtons, currentButtons);\r\n        this.secondary = this.secondaryOptions\r\n            ? this.secondaryOptions.map(function (action) {\r\n                return _this.getButton(action, TITLEBAR_BUTTON_PROPS.subgroups, _this.updateSecondaryButtons);\r\n            })\r\n            : undefined;\r\n    };\r\n    TitleBar.prototype.setBreadcrumbs = function (breadcrumb) {\r\n        this.breadcrumbsOption = this.getChildButton(breadcrumb, this.breadcrumbsOption);\r\n        this.breadcrumb = this.breadcrumbsOption\r\n            ? this.getButton(this.breadcrumbsOption, BREADCRUMB_BUTTON_PROPS.subgroups, this.updateBreadcrumbButton)\r\n            : undefined;\r\n    };\r\n    TitleBar.prototype.getChildButton = function (newAction, currentAction) {\r\n        var newButtons = newAction ? [newAction] : [];\r\n        var currentButtons = currentAction ? [currentAction] : [];\r\n        var updatedButton = this.getUpdatedChildActions(newButtons, currentButtons);\r\n        return updatedButton ? updatedButton[0] : undefined;\r\n    };\r\n    TitleBar.prototype.validateOptions = function (options) {\r\n        var props = __assign({ id: this.id }, options);\r\n        if (!isValidTitleBarProps(options)) {\r\n            var errorAction = update(props);\r\n            Error_1.throwError(Error_1.ActionType.INVALID_OPTIONS, errorAction);\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    return TitleBar;\r\n}(helper_1.ActionSetWithChildren));\r\nexports.TitleBar = TitleBar;\r\nfunction create(app, options) {\r\n    return new TitleBar(app, options);\r\n}\r\nexports.create = create;\r\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar ButtonGroup_1 = __webpack_require__(4);\r\nfunction getGroupedButton(action, button, subgroups, updateCb) {\r\n    action.addChild(button, action.group, subgroups);\r\n    var id = button.id, label = button.label, disabled = button.disabled, buttons = button.buttons;\r\n    action.subscribeToChild(button, ButtonGroup_1.Action.UPDATE, updateCb);\r\n    return { id: id, label: label, buttons: buttons, disabled: disabled };\r\n}\r\nexports.getGroupedButton = getGroupedButton;\r\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// actions.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\t(function (module) {\n \t\t  if (module.exports\n \t\t    && !module.exports.__esModule\n \t\t    && module.exports.default === undefined\n \t\t  ) {\n \t\t    if (module.exports.headers\n \t\t      && module.exports.headers.common\n \t\t      && module.exports.headers.common.Accept\n \t\t      && module.exports.adapter\n \t\t      && module.exports.transformRequest\n \t\t      && module.exports.transformResponse\n \t\t    ) {\n \t\t      return;\n \t\t    }\n \t\t    module.exports.default = module.exports;\n \t\t  }\n \t\t})(module);\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 24);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 852003608eb42383a33a","export * from './actions';\nexport * from './types';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Error/index.ts","/**\n * @module Types\n */\n\nimport {ClientApplication} from '../client';\nimport {ActionSet} from './helper';\nimport {ErrorAction} from './Error/actions';\n\nexport enum Group {\n  Button = 'Button',\n  ButtonGroup = 'ButtonGroup',\n  Cart = 'Cart',\n  Error = 'Error',\n  Flash = 'Flash',\n  Loading = 'Loading',\n  Modal = 'Modal',\n  Navigation = 'Navigation',\n  Print = 'Print',\n  TitleBar = 'TitleBar',\n  ResourcePicker = 'Resource_Picker',\n}\n\nexport enum ComponentType {\n  Button = 'Button',\n  ButtonGroup = 'ButtonGroup',\n}\n\nexport interface AnyAction {\n  type: any;\n  [extraProps: string]: any;\n}\n\nexport interface MetaAction extends AnyAction {\n  readonly version: string;\n  readonly group: string;\n  readonly type: string;\n  payload?: any;\n}\n\nexport interface ClickAction extends MetaAction {\n  payload: {\n    id: string;\n    payload?: any;\n  };\n}\n\nexport interface ActionCallback {\n  (data: any): void;\n}\n\nexport interface ErrorCallback {\n  (data: ErrorAction): void;\n}\n\nexport interface UpdateSubscribe {\n  (group: string, subgroups: string[]): void;\n}\n\nexport interface Unsubscribe {\n  (): void;\n}\n\nexport interface ErrorSubscriber {\n  (callback: ErrorCallback): Unsubscribe;\n}\n\nexport interface ActionSubscription {\n  component: Component;\n  eventType: string;\n  callback: ActionCallback;\n  unsubscribe: Unsubscribe;\n  updateSubscribe: UpdateSubscribe;\n}\n\nexport interface UpdateSubscription {\n  (subscriptionToRemove: ActionSubscription, group: string, subgroups: string[]): void;\n}\n\nexport interface Component {\n  readonly id: string;\n  readonly type: string;\n  subgroups?: string[];\n}\n\nexport interface ActionSetInterface extends Component {\n  readonly app: ClientApplication<any>;\n  readonly defaultGroup: string;\n  group: string;\n  component: Component;\n  subscriptions: ActionSubscription[];\n  updateSubscription: UpdateSubscription;\n  error: ErrorSubscriber;\n  subscribe(\n    eventName: string,\n    callback: ActionCallback,\n    component?: Component,\n    currentIndex?: number,\n  ): Unsubscribe;\n  unsubscribe(resetOnly: boolean): ActionSetInterface;\n}\n\nexport interface DispatchAction {\n  type: string;\n  payload: any;\n}\n\nexport interface SimpleDispatch {\n  dispatch(action: string): ActionSet;\n}\n\nexport interface ComplexDispatch<P> {\n  dispatch(action: string, payload: P): ActionSet;\n}\n\nexport interface ActionSetProps<T, P> extends SimpleDispatch {\n  options: T;\n  payload: P;\n  set(options: Partial<T>): ActionSet;\n}\n\nexport interface ActionSetPayload<P> extends SimpleDispatch {\n  payload: P;\n}\n\nexport interface ActionSetOptions<T> {\n  options: T;\n  set(options: Partial<T>): ActionSet;\n}\n\n// @ts-ignore: Need to declare a generic without using its type\nexport interface Dispatch<S> {\n  <A extends AnyAction>(action: A): A;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/types.ts","import {\n  isErrorEventName,\n  throwError,\n  Action as ErrorActions,\n  ActionType as ErrorActionType,\n} from '../actions/Error';\nimport {ClientApplication} from '../client';\nimport {removeFromCollection} from '../util/collection';\nimport {PREFIX} from './constants';\nimport mergeProps, {Indexable} from './merge';\nimport {\n  ActionCallback,\n  ActionSetInterface,\n  ActionSubscription,\n  Component,\n  ErrorCallback,\n  Group,\n  Unsubscribe,\n} from './types';\nimport generateUuid from './uuid';\nconst info = require('app-bridge/info');\n\nconst SEPARATOR = '::';\n\nexport function actionWrapper(action: any): any {\n  return {...action, version: getVersion()};\n}\nexport function getVersion() {\n  return info.version;\n}\n\nexport function getEventNameSpace(group: string, eventName: string, component?: Component): string {\n  let eventNameSpace = group.toUpperCase();\n  if (component) {\n    const {subgroups, type} = component;\n    if (subgroups && subgroups.length > 0) {\n      eventNameSpace += eventNameSpace.length > 0 ? SEPARATOR : '';\n      subgroups.forEach((subgroup, index) => {\n        eventNameSpace += `${subgroup.toUpperCase()}${\n          index < subgroups.length - 1 ? SEPARATOR : ''\n        }`;\n      });\n    }\n    if (type !== group && type) {\n      eventNameSpace += `${eventNameSpace.length > 0 ? SEPARATOR : ''}${type.toUpperCase()}`;\n    }\n  }\n  if (eventNameSpace) {\n    eventNameSpace += `${eventNameSpace.length > 0 ? SEPARATOR : ''}${eventName.toUpperCase()}`;\n  }\n\n  return `${PREFIX}${SEPARATOR}${eventNameSpace}`;\n}\n\nexport function isValidOptionalNumber(value?: number): boolean {\n  return value === null || value === undefined || typeof value === 'number';\n}\n\nexport function isValidOptionalString(value?: string): boolean {\n  return value === null || value === undefined || typeof value === 'string';\n}\n\nexport abstract class ActionSet implements ActionSetInterface {\n  readonly id: string;\n  readonly type: string;\n  readonly app: ClientApplication<any>;\n  readonly defaultGroup: string;\n  group!: string;\n  subgroups: string[] = [];\n  subscriptions: ActionSubscription[] = [];\n\n  constructor(app: ClientApplication<any>, type: string, group: string, id?: string) {\n    if (!app) {\n      throwError(ErrorActionType.INVALID_OPTIONS, 'Missing required `app`');\n    }\n\n    this.id = id || generateUuid();\n    this.app = app;\n    this.type = type;\n    this.group = group;\n    this.defaultGroup = group;\n  }\n\n  get component(): Component {\n    return {\n      id: this.id,\n      subgroups: this.subgroups,\n      type: this.type,\n    };\n  }\n\n  updateSubscription(\n    subscriptionToRemove: ActionSubscription,\n    group: string,\n    subgroups: string[],\n  ): Unsubscribe {\n    const {eventType, callback, component} = subscriptionToRemove;\n    let currentIndex;\n    currentIndex = this.subscriptions.findIndex(\n      subscription => subscription === subscriptionToRemove,\n    );\n    if (currentIndex >= 0) {\n      this.subscriptions[currentIndex].unsubscribe();\n    } else {\n      currentIndex = undefined;\n    }\n    this.group = group;\n    this.subgroups = subgroups;\n\n    Object.assign(component, {subgroups: this.subgroups});\n\n    return this.subscribe(eventType, callback, component, currentIndex);\n  }\n\n  error(callback: ErrorCallback): Unsubscribe {\n    const subscriptionIndices: number[] = [];\n    forEachInEnum(ErrorActions, eventNameSpace => {\n      // Keep track of subscription index so we can call unsubscribe later\n      // This ensure it will continue to work even when the subscription has been updated\n      subscriptionIndices.push(this.subscriptions.length);\n      this.subscribe(eventNameSpace, callback);\n    });\n\n    return () => {\n      const subscriptionsToRemove = subscriptionIndices.map(index => this.subscriptions[index]);\n\n      subscriptionsToRemove.forEach(toRemove => {\n        removeFromCollection(this.subscriptions, toRemove, (removed: ActionSubscription) => {\n          removed.unsubscribe();\n        });\n      });\n    };\n  }\n\n  subscribe(\n    eventName: string,\n    callback: ActionCallback,\n    component?: Component,\n    currentIndex?: number,\n  ): Unsubscribe {\n    const eventComponent = component || this.component;\n    const eventType = eventName.toUpperCase();\n    const boundedCallback = typeof currentIndex === 'number' ? callback : callback.bind(this);\n\n    let eventNameSpace;\n    if (isErrorEventName(eventName)) {\n      eventNameSpace = getEventNameSpace(Group.Error, eventName, {\n        ...eventComponent,\n        type: '',\n      });\n    } else {\n      eventNameSpace = getEventNameSpace(this.group, eventName, eventComponent);\n    }\n\n    const unsubscribe = this.app.subscribe(\n      eventNameSpace,\n      boundedCallback,\n      component ? component.id : this.id,\n    );\n    const subscription: ActionSubscription = {\n      eventType,\n      unsubscribe,\n      callback: boundedCallback,\n      component: eventComponent,\n      updateSubscribe: (group, subgroups) =>\n        this.updateSubscription.call(this, subscription, group, subgroups),\n    };\n\n    if (\n      typeof currentIndex === 'number' &&\n      currentIndex >= 0 &&\n      currentIndex < this.subscriptions.length\n    ) {\n      this.subscriptions[currentIndex] = subscription;\n    } else {\n      this.subscriptions.push(subscription);\n    }\n\n    return unsubscribe;\n  }\n\n  unsubscribe(resetOnly = false) {\n    unsubscribeActions(this.subscriptions, this.defaultGroup, resetOnly);\n\n    return this;\n  }\n}\n\nexport abstract class ActionSetWithChildren extends ActionSet {\n  children: ActionSetChildAction[] = [];\n  unsubscribe(unsubscribeChildren = true, resetParentOnly = false) {\n    unsubscribeActions(this.subscriptions, this.defaultGroup, resetParentOnly);\n    this.children.forEach(child => {\n      if (ActionSetWithChildren.prototype.isPrototypeOf(child)) {\n        (child as ActionSetWithChildren).unsubscribe(\n          unsubscribeChildren,\n          unsubscribeChildren ? false : true,\n        );\n      } else {\n        child.unsubscribe(unsubscribeChildren ? false : true);\n      }\n    });\n\n    return this;\n  }\n  getChild(id: string): ActionSetChildAction | undefined {\n    const childIndex = this.children.findIndex(child => child.id === id);\n\n    return childIndex >= 0 ? this.children[childIndex] : undefined;\n  }\n\n  getChildIndex(id: string): number {\n    return this.children.findIndex(child => child.id === id);\n  }\n\n  getChildSubscriptions(id: string, eventType?: string): ActionSubscription[] {\n    return this.subscriptions.filter(\n      sub => sub.component.id === id && (!eventType || eventType === sub.eventType),\n    );\n  }\n\n  addChild(child: ActionSetChildAction, group: string, subgroups: string[]) {\n    const {subscriptions} = child;\n    const existingChild = this.getChild(child.id);\n    // Add child if it doesn't already exist\n    if (!existingChild) {\n      this.children.push(child);\n    }\n    if (!subscriptions || (group === child.group && subgroups === child.subgroups)) {\n      return this;\n    }\n\n    subscriptions.forEach((subscription: ActionSubscription) => {\n      const {updateSubscribe} = subscription;\n      updateSubscribe(group, subgroups);\n    });\n\n    // Update child's group and subgroups\n    Object.assign(child, {group, subgroups});\n\n    // Update child's children subscriptions\n    if (ActionSetWithChildren.prototype.isPrototypeOf(child)) {\n      (child as ActionSetWithChildren).children.forEach(c => this.addChild(c, group, subgroups));\n    }\n\n    return this;\n  }\n\n  removeChild(id: string) {\n    removeFromCollection(this.children, this.getChild(id), () => {\n      const toBeRemoved = this.subscriptions.filter(subs => subs.component.id === id);\n      toBeRemoved.forEach(toRemove => {\n        removeFromCollection(this.subscriptions, toRemove, (removed: ActionSubscription) => {\n          removed.unsubscribe();\n        });\n      });\n    });\n\n    return this;\n  }\n\n  subscribeToChild(\n    child: ActionSetChildAction,\n    eventName: string | string[],\n    callback: (childData: any) => void,\n  ) {\n    const boundedCallback = callback.bind(this);\n    if (eventName instanceof Array) {\n      eventName.forEach(e => this.subscribeToChild(child, e, callback));\n\n      return this;\n    }\n    if (typeof eventName !== 'string') {\n      return this;\n    }\n    const eventType = eventName.toUpperCase();\n    const currentSubscriptions = this.getChildSubscriptions(child.id, eventType);\n    if (currentSubscriptions.length > 0) {\n      // Subscription is already there, simply update it\n      currentSubscriptions.forEach(subs => subs.updateSubscribe(this.group, child.subgroups));\n    } else {\n      const childComponent = {\n        id: child.id,\n        subgroups: child.subgroups,\n        type: child.type,\n      };\n      this.subscribe(eventType, boundedCallback, childComponent);\n    }\n\n    return this;\n  }\n\n  getUpdatedChildActions<A extends ActionSetChildAction>(\n    newActions: A[],\n    currentActions: A[],\n  ): A[] | undefined {\n    if (newActions.length === 0) {\n      while (currentActions.length > 0) {\n        const action = currentActions.pop();\n        if (!action) {\n          break;\n        }\n        this.removeChild(action.id);\n      }\n\n      return undefined;\n    }\n    // Only allow unique actions\n    const uniqueActions = newActions.filter(\n      (action, index, actionsArr) => index === actionsArr.indexOf(action),\n    );\n    const newActionIds = uniqueActions.map(action => action.id);\n    // Remove unused actions\n    const unusedActions = currentActions.filter(action => {\n      return newActionIds.indexOf(action.id) < 0;\n    });\n\n    while (unusedActions.length > 0) {\n      const action = unusedActions.pop();\n      if (!action) {\n        break;\n      }\n      this.removeChild(action.id);\n    }\n\n    return uniqueActions;\n  }\n}\n\nexport type ActionSetChildAction = ActionSet | ActionSetWithChildren;\n\nfunction unsubscribeActions(\n  subscriptions: ActionSubscription[],\n  defaultGroup: string,\n  reassign = false,\n) {\n  subscriptions.forEach(subscription => {\n    if (reassign) {\n      const {updateSubscribe} = subscription;\n      // TODO: Support cases where we don't wipe out group and subgroups to defaults\n      updateSubscribe(defaultGroup, []);\n    } else {\n      const {unsubscribe} = subscription;\n      unsubscribe();\n    }\n  });\n  if (!reassign) {\n    subscriptions.length = 0;\n  }\n}\n\nexport function sanitizeProps<Prop, Key extends keyof Prop>(\n  obj: Prop,\n  keys: Key[],\n): Pick<Prop, Key> {\n  const newObj: any = {};\n  keys.forEach(key => {\n    if (obj.hasOwnProperty(key)) {\n      newObj[key] = obj[key];\n    }\n  });\n\n  return newObj;\n}\n\nexport function updateActionFromPayload<A extends Partial<ActionSetInterface>>(\n  action: A,\n  newProps: A,\n): boolean {\n  const {id} = action;\n  if (id === newProps.id) {\n    // Merge new properties\n    Object.assign(action, getMergedProps(action, newProps));\n\n    return true;\n  }\n\n  return false;\n}\n\nexport function getMergedProps<Prop extends Indexable>(props: Prop, newProps: Partial<Prop>): Prop {\n  const merged = mergeProps(props, newProps);\n  if (!merged) {\n    // tslint:disable-next-line:prefer-object-spread\n    const cloned = Object.assign(props, newProps);\n\n    return cloned;\n  }\n\n  return merged as Prop;\n}\n\nexport function forEachInEnum<E extends Indexable>(types: E, callback: (prop: string) => void) {\n  Object.keys(types).forEach((key: string) => {\n    callback(types[key]);\n  });\n}\n\nexport function findMatchInEnum<E extends Indexable>(types: E, lookup: string): string | undefined {\n  const match = Object.keys(types).find((key: string) => {\n    return lookup === types[key];\n  });\n\n  return match ? types[match] : undefined;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/helper.ts","export * from './actions';\nexport * from './types';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Button/index.ts","export * from './actions';\nexport * from './types';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/ButtonGroup/index.ts","import {Action as ButtonAction, Button, Payload} from '../actions/Button';\nimport {ActionSetWithChildren} from './helper';\n\nexport function getSingleButton(\n  action: ActionSetWithChildren,\n  button: Button,\n  subgroups: string[],\n  updateCb: (newPayload: Payload) => void,\n): Payload {\n  action.addChild(button, action.group, subgroups);\n\n  action.subscribeToChild(button, ButtonAction.UPDATE, updateCb);\n\n  return button.payload;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/buttonHelper.ts","export function isValidRelativePath(path?: string) {\n  return typeof path === 'string' && (path === '' || path.charAt(0) === '/');\n}\n\nexport function isValidAbsolutePath(path?: string) {\n  return typeof path === 'string' && path.match('^https?://');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Navigation/helper.ts","/**\n * @module History\n */\n\nexport enum ActionType {\n  PUSH = 'APP::NAVIGATION::HISTORY::PUSH',\n  REPLACE = 'APP::NAVIGATION::HISTORY::REPLACE',\n}\n\nexport enum Action {\n  PUSH = 'PUSH',\n  REPLACE = 'REPLACE',\n}\n\nexport interface Payload {\n  id?: string;\n  path: string;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Navigation/History/types.ts","export interface BasePayload {\n  id?: string;\n}\n\nexport interface BaseAdminPayload extends BasePayload {\n  newContext?: boolean;\n}\n\nexport interface AppPayload extends BasePayload {\n  path: string;\n}\n\nexport interface AdminPathPayload extends BaseAdminPayload {\n  path: string;\n}\n\nexport interface RemotePayload extends BaseAdminPayload {\n  url: string;\n}\n\nexport interface CreateResource {\n  create: boolean;\n}\n\nexport interface ResourceInfo {\n  id: string;\n}\n\nexport interface Section {\n  name: ResourceType;\n  resource?: CreateResource | ResourceInfo | ProductVariantResource;\n}\n\nexport interface AdminSectionPayload extends BaseAdminPayload {\n  section: Section;\n}\n\nexport interface ProductVariantResource extends ResourceInfo {\n  variant: CreateResource | ResourceInfo;\n}\n\nexport enum Action {\n  ADMIN_PATH = 'ADMIN::PATH',\n  ADMIN_SECTION = 'ADMIN::SECTION',\n  REMOTE = 'REMOTE',\n  APP = 'APP',\n}\n\nexport enum ActionType {\n  ADMIN_SECTION = 'APP::NAVIGATION::REDIRECT::ADMIN::SECTION',\n  ADMIN_PATH = 'APP::NAVIGATION::REDIRECT::ADMIN::PATH',\n  REMOTE = 'APP::NAVIGATION::REDIRECT::REMOTE',\n  APP = 'APP::NAVIGATION::REDIRECT::APP',\n}\n\nexport enum ResourceType {\n  Product = 'products',\n  Collection = 'collections',\n  Order = 'orders',\n  Customer = 'customers',\n  Discount = 'discounts',\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Navigation/Redirect/types.ts","/**\n * @module util\n */\n\n/**\n * Add an item to a collection, return a function that can then be used to\n * remove the item from the collection. Optionally accepting a callback that is\n * invoked when the item is removed from the collection.\n */\nexport function addAndRemoveFromCollection<T>(collection: T[], item: T, then?: Function) {\n  collection.push(item);\n\n  return () => {\n    return removeFromCollection(collection, item, then);\n  };\n}\n\n/**\n * Remove the item from the collection. Optionally accepting a callback that is\n * invoked when the item is removed from the collection.\n */\nexport function removeFromCollection<T>(collection: T[], item: T, then?: Function): boolean {\n  const idx = collection.findIndex(i => i === item);\n\n  if (idx >= 0) {\n    collection.splice(idx, 1);\n    if (then) {\n      then(item);\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/collection.ts","import * as Actions from '../actions';\nimport {MetaAction} from '../actions/types';\nimport {invalidAction, ErrorAction} from '../actions/Error';\nimport {PREFIX} from './constants';\nimport {Indexable} from './merge';\nconst MANDATORY_ACTION_PROPS = ['group', 'type', 'version'];\n\nexport function isAppBridgeAction(action: any): action is MetaAction {\n  return (\n    action instanceof Object &&\n    action.hasOwnProperty('type') &&\n    action.type.toString().startsWith(PREFIX)\n  );\n}\n\nexport function isFromApp(action: any) {\n  if (typeof action !== 'object' || typeof action.source !== 'object') {\n    return false;\n  }\n\n  return typeof action.source.apiKey === 'string';\n}\n\nexport function isAppMessage(event: any) {\n  if (typeof event !== 'object' || !event.data || typeof event.data !== 'object') {\n    return false;\n  }\n\n  const {data} = event;\n\n  return data.hasOwnProperty('type') && (data.type === 'getState' || data.type === 'dispatch');\n}\n\nexport function validatedActionPayload<A extends MetaAction>(\n  action: A,\n  origin?: string,\n): ErrorAction | A {\n  switch (action.group) {\n    case Actions.Group.Button:\n      return Actions.Button.validationError(action) || action;\n\n    case Actions.Group.ButtonGroup:\n      return Actions.ButtonGroup.validationError(action) || action;\n\n    case Actions.Group.Cart:\n      return Actions.Cart.validationError(action) || action;\n\n    case Actions.Group.Flash:\n      return Actions.Flash.validationError(action) || action;\n\n    case Actions.Group.Modal:\n      return Actions.Modal.validationError(action, origin) || action;\n\n    case Actions.Group.TitleBar:\n      return Actions.TitleBar.validationError(action) || action;\n\n    case Actions.Group.Navigation:\n      return Actions.Navigation.validationError(action) || action;\n\n    case Actions.Group.Error:\n      return action;\n\n    case Actions.Group.Print:\n      return Actions.Print.validationError(action) || action;\n\n    case Actions.Group.Loading:\n      return Actions.Loading.validationError(action) || action;\n\n    case Actions.Group.ResourcePicker:\n      return Actions.ResourcePicker.validationError(action) || action;\n    default:\n      return invalidAction(action, 'Unknown or unsupported action group');\n  }\n}\n\nexport function validatedAction<A extends Indexable>(action: A, origin?: string): ErrorAction | A {\n  if (!isAppBridgeAction(action)) {\n    return action;\n  }\n\n  for (const prop of MANDATORY_ACTION_PROPS) {\n    if (!action.hasOwnProperty(prop) || typeof action[prop] !== 'string') {\n      return invalidAction(action, `Missing or invalid ${prop}`);\n    }\n  }\n\n  return validatedActionPayload(action, origin);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/validator.ts","import {AnyAction, MetaAction} from '../types';\n\nexport enum Action {\n  INVALID_ACTION = 'INVALID_ACTION',\n  INVALID_ACTION_TYPE = 'INVALID_ACTION_TYPE',\n  INVALID_OPTIONS = 'INVALID_OPTIONS',\n  INVALID_PAYLOAD = 'INVALID_PAYLOAD',\n  UNEXPECTED_ACTION = 'UNEXPECTED_ACTION',\n  PERSISTENCE = 'PERSISTENCE',\n  UNSUPPORTED_OPERATION = 'UNSUPPORTED_OPERATION',\n  NETWORK = 'NETWORK',\n  PERMISSION = 'PERMISSION',\n}\n\nexport enum ActionType {\n  INVALID_ACTION = 'APP::ERROR::INVALID_ACTION',\n  INVALID_ACTION_TYPE = 'APP::ERROR::INVALID_ACTION_TYPE',\n  INVALID_PAYLOAD = 'APP::ERROR::INVALID_PAYLOAD',\n  INVALID_OPTIONS = 'APP::ERROR::INVALID_OPTIONS',\n  UNEXPECTED_ACTION = 'APP::ERROR::UNEXPECTED_ACTION',\n  PERSISTENCE = 'APP::ERROR::PERSISTENCE',\n  UNSUPPORTED_OPERATION = 'APP::ERROR::UNSUPPORTED_OPERATION',\n  NETWORK = 'APP::ERROR::NETWORK',\n  PERMISSION = 'APP::ERROR::PERMISSION',\n}\n\nexport enum AppActionType {\n  INVALID_CONFIG = 'APP::ERROR:INVALID_CONFIG',\n  MISSING_CONFIG = 'APP::APP_ERROR::MISSING_CONFIG',\n  MISSING_APP_BRIDGE_MIDDLEWARE = 'APP::APP_ERROR::MISSING_APP_BRIDGE_MIDDLEWARE',\n}\n\nexport type Payload = MetaAction | AnyAction;\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Error/types.ts","export const PREFIX = 'APP';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/constants.ts","/**\n * @module Button\n */\n\nexport enum Action {\n  CLICK = 'CLICK',\n  UPDATE = 'UPDATE',\n}\n\nexport enum ActionType {\n  CLICK = 'APP::BUTTON::CLICK',\n  UPDATE = 'APP::BUTTON::UPDATE',\n}\n\nexport enum Icon {\n  Print = 'print',\n}\n\nexport enum Style {\n  Danger = 'danger',\n}\n\nexport interface Presentation {\n  icon?: Icon;\n  style?: Style;\n}\n\nexport interface Options extends Presentation {\n  label: string;\n  disabled?: boolean;\n}\n\nexport interface Payload extends Options {\n  readonly id: string;\n}\n\nexport interface ClickPayload {\n  readonly id: string;\n  payload?: any;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Button/types.ts","/**\n * @module ButtonGroup\n */\n\nimport {Button, Payload as ButtonPayload} from '../Button';\n\nexport enum Action {\n  UPDATE = 'UPDATE',\n}\n\nexport enum ActionType {\n  UPDATE = 'APP::BUTTON::UPDATE',\n}\n\nexport interface Options {\n  label: string;\n  disabled?: boolean;\n  buttons: Button[];\n}\n\nexport interface Payload {\n  readonly id: string;\n  label: string;\n  disabled?: boolean;\n  buttons: ButtonPayload[];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/ButtonGroup/types.ts","/**\n * @module Cart\n */\n\nexport enum ActionType {\n  FETCH = 'APP::CART::FETCH',\n  UPDATE = 'APP::CART::UPDATE',\n  SET_CUSTOMER = 'APP::CART::SET_CUSTOMER',\n  REMOVE_CUSTOMER = 'APP::CART::REMOVE_CUSTOMER',\n  ADD_CUSTOMER_ADDRESS = 'APP::CART::ADD_CUSTOMER_ADDRESS',\n  UPDATE_CUSTOMER_ADDRESS = 'APP::CART::UPDATE_CUSTOMER_ADDRESS',\n  SET_DISCOUNT = 'APP::CART::SET_DISCOUNT',\n  REMOVE_DISCOUNT = 'APP::CART::REMOVE_DISCOUNT',\n  SET_PROPERTIES = 'APP::CART::SET_PROPERTIES',\n  REMOVE_PROPERTIES = 'APP::CART::REMOVE_PROPERTIES',\n  CLEAR = 'APP::CART::CLEAR',\n  ADD_LINE_ITEM = 'APP::CART::ADD_LINE_ITEM',\n  UPDATE_LINE_ITEM = 'APP::CART::UPDATE_LINE_ITEM',\n  REMOVE_LINE_ITEM = 'APP::CART::REMOVE_LINE_ITEM',\n  SET_LINE_ITEM_DISCOUNT = 'APP::CART::SET_LINE_ITEM_DISCOUNT',\n  REMOVE_LINE_ITEM_DISCOUNT = 'APP::CART::REMOVE_LINE_ITEM_DISCOUNT',\n  SET_LINE_ITEM_PROPERTIES = 'APP::CART::SET_LINE_ITEM_PROPERTIES',\n  REMOVE_LINE_ITEM_PROPERTIES = 'APP::CART::REMOVE_LINE_ITEM_PROPERTIES',\n}\n\nexport enum Action {\n  FETCH = 'FETCH',\n  UPDATE = 'UPDATE',\n  SET_CUSTOMER = 'SET_CUSTOMER',\n  REMOVE_CUSTOMER = 'REMOVE_CUSTOMER',\n  ADD_CUSTOMER_ADDRESS = 'ADD_CUSTOMER_ADDRESS',\n  UPDATE_CUSTOMER_ADDRESS = 'UPDATE_CUSTOMER_ADDRESS',\n  SET_DISCOUNT = 'SET_DISCOUNT',\n  REMOVE_DISCOUNT = 'REMOVE_DISCOUNT',\n  SET_PROPERTIES = 'SET_PROPERTIES',\n  REMOVE_PROPERTIES = 'REMOVE_PROPERTIES',\n  CLEAR = 'CLEAR',\n  ADD_LINE_ITEM = 'ADD_LINE_ITEM',\n  UPDATE_LINE_ITEM = 'UPDATE_LINE_ITEM',\n  REMOVE_LINE_ITEM = 'REMOVE_LINE_ITEM',\n  SET_LINE_ITEM_DISCOUNT = 'SET_LINE_ITEM_DISCOUNT',\n  REMOVE_LINE_ITEM_DISCOUNT = 'REMOVE_LINE_ITEM_DISCOUNT',\n  SET_LINE_ITEM_PROPERTIES = 'SET_LINE_ITEM_PROPERTIES',\n  REMOVE_LINE_ITEM_PROPERTIES = 'REMOVE_LINE_ITEM_PROPERTIES',\n}\n\nexport interface Data {\n  cartDiscount?: Discount;\n  customer?: CustomerWithAddresses;\n  grandTotal?: string;\n  lineItems?: LineItem[];\n  noteAttributes?: NoteAttributes;\n  subTotal?: string;\n  taxTotal?: string;\n}\n\nexport interface Payload {\n  readonly data: Data;\n}\n\nexport interface Options {\n  readonly id?: string;\n}\n\nexport interface AddCustomerAddressPayload {\n  readonly data: Address;\n}\n\nexport interface AddLineItemPayload {\n  readonly data: LineItem;\n}\n\nexport interface SetCustomerPayload {\n  readonly data: Customer;\n}\n\nexport interface UpdateCustomerAddressPayload {\n  readonly data: Address;\n  readonly index: number;\n}\n\nexport interface SetDiscountPayload {\n  readonly data: Discount;\n}\n\nexport interface SetPropertiesPayload {\n  readonly data: Properties;\n}\n\nexport interface RemovePropertiesPayload {\n  readonly data: string[];\n}\n\nexport interface UpdateLineItemData {\n  quantity: number;\n}\nexport interface UpdateLineItemPayload {\n  readonly data: UpdateLineItemData;\n  readonly index: number;\n}\n\nexport interface RemoveLineItemPayload {\n  readonly index: number;\n}\n\nexport interface SetLineItemDiscountPayload {\n  readonly data: Discount;\n  readonly index: number;\n}\n\nexport interface RemoveLineItemDiscountPayload {\n  readonly index: number;\n}\n\nexport interface SetLineItemPropertiesPayload {\n  readonly data: Properties;\n  readonly index: number;\n}\n\nexport interface RemoveLineItemPropertiesPayload {\n  readonly data: string[];\n  readonly index: number;\n}\n\n/**\n * Cart types\n */\n\nexport interface Customer {\n  id?: number;\n  email?: string;\n  firstName?: string;\n  lastName?: string;\n  note?: string;\n}\n\nexport interface CustomerWithAddresses extends Customer {\n  addresses?: Address[];\n}\n\nexport interface Address {\n  address1?: string;\n  address2?: string;\n  city?: string;\n  company?: string;\n  firstName?: string;\n  lastName?: string;\n  phone?: string;\n  provice?: string;\n  country?: string;\n  zip?: string;\n  name?: string;\n  proviceCode?: string;\n  countryCode?: string;\n}\n\nexport interface Discount {\n  amount?: number;\n  discountDescription?: string;\n  type?: string;\n}\n\nexport interface LineItem {\n  price?: number;\n  quantity: number;\n  title?: string;\n  variantId?: number;\n}\n\nexport type NoteAttributes = Array<{\n  name: string;\n  value: string;\n}>;\n\nexport interface Properties {\n  [index: string]: string;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Cart/types.ts","/**\n * @module Flash\n */\n\nexport enum ActionType {\n  SHOW = 'APP::FLASH::SHOW',\n  CLEAR = 'APP::FLASH::CLEAR',\n}\n\nexport enum Action {\n  SHOW = 'SHOW',\n  CLEAR = 'CLEAR',\n}\n\nexport interface Options {\n  duration: number;\n  isDismissible?: boolean;\n  isError?: boolean;\n  message: string;\n}\n\nexport interface ClearPayload {\n  readonly id?: string;\n}\n\nexport interface Payload extends Options {\n  readonly id?: string;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Flash/types.ts","/**\n * @module Loading\n */\n\nexport enum ActionType {\n  START = 'APP::LOADING::START',\n  STOP = 'APP::LOADING::STOP',\n}\n\nexport enum Action {\n  START = 'START',\n  STOP = 'STOP',\n}\n\nexport interface Payload {\n  readonly id?: string;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Loading/types.ts","/**\n * @module Modal\n */\n\nimport {Button, Payload as ButtonPayload} from '../Button';\n\nexport enum Action {\n  OPEN = 'OPEN',\n  CLOSE = 'CLOSE',\n  UPDATE = 'UPDATE',\n}\n\nexport enum ActionType {\n  OPEN = 'APP::MODAL::OPEN',\n  CLOSE = 'APP::MODAL::CLOSE',\n  UPDATE = 'APP::MODAL::UPDATE',\n}\n\nexport enum FooterActionType {\n  FOOTER_BUTTON_CLICK = 'APP::MODAL::FOOTER::BUTTON::CLICK',\n  FOOTER_BUTTON_UPDATE = 'APP::MODAL::FOOTER::BUTTON::UPDATE',\n}\n\nexport enum Size {\n  Small = 'small',\n  Medium = 'medium',\n  Large = 'large',\n  Full = 'full',\n}\n\nexport interface BasePayload {\n  readonly id?: string;\n  size?: Size;\n  title?: string;\n  footer?: Footer;\n}\n\nexport interface MessagePayload extends BasePayload {\n  message: string;\n}\n\nexport interface IframePayload extends BasePayload {\n  url?: string;\n  path?: string;\n}\n\nexport interface ClosePayload {\n  readonly id?: string;\n}\n\nexport interface FooterOptions {\n  buttons: {\n    primary?: Button;\n    secondary?: Button[];\n  };\n}\n\nexport interface Footer {\n  buttons: {\n    primary?: ButtonPayload;\n    secondary?: ButtonPayload[];\n  };\n}\n\nexport interface MessageOptions extends MessagePayload {\n  footer?: FooterOptions;\n}\n\nexport interface IframeOptions extends IframePayload {\n  footer?: FooterOptions;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Modal/types.ts","/**\n * @module History\n */\nimport {ClientApplication} from '../../../client';\nimport {actionWrapper, ActionSet} from '../../helper';\nimport {ComplexDispatch, Group, MetaAction} from '../../types';\nimport {\n  invalidActionType,\n  invalidPayload,\n  throwError,\n  ActionType as ErrorActionType,\n  ErrorAction,\n  Message as ErrorMessage,\n} from '../../Error';\nimport {isValidAbsolutePath, isValidRelativePath} from '../helper';\nimport {Action, ActionType, Payload} from './types';\n\nexport interface HistoryAction extends MetaAction {\n  payload: Payload;\n}\n\nexport function push(payload: Payload): HistoryAction {\n  return actionWrapper({\n    payload,\n    group: Group.Navigation,\n    type: ActionType.PUSH,\n  });\n}\n\nexport function replace(payload: Payload): HistoryAction {\n  return actionWrapper({\n    payload,\n    group: Group.Navigation,\n    type: ActionType.REPLACE,\n  });\n}\n\nexport function validationError(action: HistoryAction | MetaAction): undefined | ErrorAction {\n  let payload;\n  switch (action.type) {\n    case ActionType.REPLACE:\n    case ActionType.PUSH:\n      payload = (action as HistoryAction).payload;\n      if (payload === undefined) {\n        return invalidPayload(action, ErrorMessage.MISSING_PAYLOAD);\n      }\n\n      return isValidAbsolutePath(payload.path) || isValidRelativePath(payload.path)\n        ? undefined\n        : invalidPayload(\n            action,\n            'Invalid path provided. Expected a relative or absolute https or http path',\n          );\n    default:\n      return invalidActionType(action);\n  }\n}\n\nexport class History extends ActionSet implements ComplexDispatch<string> {\n  constructor(app: ClientApplication<any>) {\n    super(app, 'History', Group.Navigation);\n  }\n\n  get payload() {\n    return {id: this.id};\n  }\n\n  dispatch(type: Action, path: string) {\n    const payload = {...this.payload, path};\n    switch (type) {\n      case Action.PUSH:\n        this.app.dispatch(push(payload));\n        break;\n\n      case Action.REPLACE:\n        this.app.dispatch(replace(payload));\n        break;\n\n      default:\n        throwError(\n          ErrorActionType.INVALID_ACTION_TYPE,\n          actionWrapper({\n            type,\n            group: this.group,\n          }),\n        );\n    }\n\n    return this;\n  }\n}\n\nexport function create(app: ClientApplication<any>) {\n  return new History(app);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Navigation/History/actions.ts","/**\n * @module Redirect\n */\n\nimport {ClientApplication} from '../../../client';\nimport {actionWrapper, forEachInEnum, ActionSet} from '../../helper';\nimport {ComplexDispatch, Group, MetaAction} from '../../types';\nimport {\n  invalidActionType,\n  invalidPayload,\n  throwError,\n  ActionType as ErrorActionType,\n  ErrorAction,\n  Message as ErrorMessage,\n} from '../../Error';\nimport {isValidAbsolutePath, isValidRelativePath} from '../helper';\nimport {\n  Action,\n  ActionType,\n  AdminPathPayload,\n  AdminSectionPayload,\n  AppPayload,\n  CreateResource,\n  ProductVariantResource,\n  RemotePayload,\n  ResourceInfo,\n  ResourceType,\n  Section,\n} from './types';\n\nexport const GROUP = Group.Navigation;\n\nexport interface ActionBase extends MetaAction {\n  readonly group: typeof GROUP;\n}\n\nexport interface AdminPathAction extends ActionBase {\n  readonly type: typeof ActionType.ADMIN_PATH;\n  readonly payload: AdminPathPayload;\n}\n\nexport interface AdminSectionAction extends ActionBase {\n  readonly type: typeof ActionType.ADMIN_SECTION;\n  readonly payload: AdminSectionPayload;\n}\n\nexport interface AppAction extends ActionBase {\n  readonly type: typeof ActionType.APP;\n  readonly payload: AdminPathPayload;\n}\n\nexport interface RemoteAction extends ActionBase {\n  readonly type: typeof ActionType.REMOTE;\n  readonly payload: RemotePayload;\n}\n\nexport type RedirectAction =\n  | AdminPathAction\n  | RemoteAction\n  | AppAction\n  | AdminSectionAction\n  | MetaAction;\n\nexport function isResourcePayload(resource: ResourceInfo | object): resource is ResourceInfo {\n  // tslint:disable-next-line:no-boolean-literal-compare\n  return typeof (resource as ResourceInfo).id === 'string';\n}\n\nexport function isCreateResourcePayload(\n  resource: CreateResource | object,\n): resource is CreateResource {\n  // tslint:disable-next-line:no-boolean-literal-compare\n  return (resource as CreateResource).create === true;\n}\n\nexport function isProductVariantResourcePayload(\n  resource: ProductVariantResource | object,\n): resource is ProductVariantResource {\n  const castResource = resource as ProductVariantResource;\n\n  // tslint:disable-next-line:no-boolean-literal-compare\n  return castResource.id !== undefined && castResource.variant !== undefined;\n}\n\nexport function isProductVariantCreateResourcePayload(\n  resource: ProductVariantResource | object,\n): resource is ProductVariantResource & {variant: CreateResource} {\n  if (!isProductVariantResourcePayload(resource)) {\n    return false;\n  }\n\n  return isCreateResourcePayload(resource.variant);\n}\n\nexport function toAdminPath(payload: AdminPathPayload): AdminPathAction {\n  return actionWrapper({\n    payload,\n    group: GROUP,\n    type: ActionType.ADMIN_PATH,\n  });\n}\n\nexport function toAdminSection(payload: AdminSectionPayload): AdminSectionAction {\n  return actionWrapper({\n    payload,\n    group: GROUP,\n    type: ActionType.ADMIN_SECTION,\n  });\n}\n\nexport function toRemote(payload: RemotePayload): RemoteAction {\n  return actionWrapper({\n    payload,\n    group: GROUP,\n    type: ActionType.REMOTE,\n  });\n}\n\nexport function toApp(payload: AppPayload): AppAction {\n  return actionWrapper({\n    payload,\n    group: GROUP,\n    type: ActionType.APP,\n  });\n}\n\nexport function isValidAdminResource(section?: Section) {\n  if (section === undefined) {\n    return false;\n  }\n  const {name, resource} = section;\n  if (!name) {\n    return false;\n  }\n\n  let valid = false;\n  forEachInEnum(ResourceType, resourceName => {\n    if (name === resourceName) {\n      valid = true;\n    }\n  });\n\n  if (!valid) {\n    return false;\n  }\n\n  return (\n    resource === undefined ||\n    isProductVariantResourcePayload(resource) ||\n    isProductVariantCreateResourcePayload(resource) ||\n    isCreateResourcePayload(resource) ||\n    isResourcePayload(resource)\n  );\n}\n\nexport function validationError(action: RedirectAction): undefined | ErrorAction {\n  let payload;\n  switch (action.type) {\n    case ActionType.ADMIN_PATH:\n      payload = (action as AdminPathAction).payload;\n      if (payload === undefined) {\n        return invalidPayload(action, ErrorMessage.MISSING_PAYLOAD);\n      }\n\n      return isValidRelativePath(payload.path)\n        ? undefined\n        : invalidPayload(action, 'Path is invalid. Expecting relative path');\n\n    case ActionType.REMOTE:\n      payload = (action as RemoteAction).payload;\n      if (payload === undefined) {\n        return invalidPayload(action, ErrorMessage.MISSING_PAYLOAD);\n      }\n\n      return isValidAbsolutePath(payload.url)\n        ? undefined\n        : invalidPayload(action, 'Url is invalid. Expecting absolute url');\n\n    case ActionType.APP:\n      payload = (action as AppAction).payload;\n      if (payload === undefined) {\n        return invalidPayload(action, ErrorMessage.MISSING_PAYLOAD);\n      }\n\n      return isValidRelativePath(payload.path)\n        ? undefined\n        : invalidPayload(action, 'Path is invalid. Expecting relative path');\n\n    case ActionType.ADMIN_SECTION:\n      payload = (action as AdminSectionAction).payload;\n      if (payload === undefined) {\n        return invalidPayload(action, ErrorMessage.MISSING_PAYLOAD);\n      }\n\n      return isValidAdminResource(payload.section)\n        ? undefined\n        : invalidPayload(action, 'Invalid admin section resource');\n\n    default:\n      return invalidActionType(action);\n  }\n}\n\nfunction isAdminPathPayload(payload: any): payload is AdminPathPayload {\n  return typeof payload === 'object' && payload.hasOwnProperty('path');\n}\n\nfunction isAdminSectionPayload(payload: any): payload is AdminSectionPayload {\n  return (\n    typeof payload === 'object' &&\n    typeof payload.section === 'object' &&\n    payload.section.hasOwnProperty('name')\n  );\n}\n\nfunction isRemotePayload(payload: any): payload is RemotePayload {\n  return typeof payload === 'object' && payload.hasOwnProperty('url');\n}\n\nexport class Redirect extends ActionSet implements ComplexDispatch<Section | string> {\n  constructor(app: ClientApplication<any>) {\n    super(app, 'Redirect', Group.Navigation);\n  }\n\n  get payload() {\n    return {id: this.id};\n  }\n\n  dispatch(action: Action.ADMIN_SECTION, payload: Section | AdminSectionPayload): ActionSet;\n\n  dispatch(action: Action.ADMIN_PATH, payload: string | AdminPathPayload): ActionSet;\n\n  dispatch(action: Action.REMOTE, payload: string | RemotePayload): ActionSet;\n\n  dispatch(action: Action.APP, payload: string): ActionSet;\n\n  dispatch(\n    action: Action,\n    payload: Section | string | AdminSectionPayload | AdminPathPayload | RemotePayload,\n  ) {\n    switch (action) {\n      case Action.ADMIN_PATH:\n        const adminPathPayload = isAdminPathPayload(payload) ? payload : {path: payload as string};\n        this.app.dispatch(toAdminPath({...this.payload, ...adminPathPayload}));\n        break;\n\n      case Action.ADMIN_SECTION:\n        const adminSectionPayload = isAdminSectionPayload(payload)\n          ? payload\n          : {section: payload as Section};\n        this.app.dispatch(toAdminSection({...this.payload, ...adminSectionPayload}));\n        break;\n\n      case Action.APP:\n        this.app.dispatch(toApp({...this.payload, path: payload as string}));\n        break;\n\n      case Action.REMOTE:\n        const remotePayload = isRemotePayload(payload) ? payload : {url: payload as string};\n        this.app.dispatch(toRemote({...this.payload, ...remotePayload}));\n        break;\n\n      default:\n        throwError(\n          ErrorActionType.INVALID_ACTION_TYPE,\n          actionWrapper({\n            group: this.group,\n            type: action,\n          }),\n        );\n    }\n\n    return this;\n  }\n}\n\nexport function create(app: ClientApplication<any>) {\n  return new Redirect(app);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Navigation/Redirect/actions.ts","/**\n * @module Print\n */\n\nexport enum ActionType {\n  APP = 'APP::PRINT::APP',\n}\n\nexport enum Action {\n  APP = 'APP',\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Print/types.ts","/**\n * @module ResourcePicker\n */\n\nexport enum Action {\n  OPEN = 'OPEN',\n  SELECT = 'SELECT',\n  CLOSE = 'CLOSE', // Deprecated in 0.5.0\n  UPDATE = 'UPDATE',\n  CANCEL = 'CANCEL',\n}\n\nexport enum ActionType {\n  OPEN = 'APP::RESOURCE_PICKER::OPEN',\n  SELECT = 'APP::RESOURCE_PICKER::SELECT',\n  CLOSE = 'APP::RESOURCE_PICKER::CLOSE', // Deprecated in 0.5.0\n  UPDATE = 'APP::RESOURCE_PICKER::UPDATE',\n  CANCEL = 'APP::RESOURCE_PICKER::CANCEL',\n}\n\nexport type Money = string;\n\nexport enum CollectionSortOrder {\n  Manual = 'MANUAL',\n  BestSelling = 'BEST_SELLING',\n  AlphaAsc = 'ALPHA_ASC',\n  AlphaDesc = 'ALPHA_DESC',\n  PriceDesc = 'PRICE_DESC',\n  PriceAsc = 'PRICE_ASC',\n  CreatedDesc = 'CREATED_DESC',\n  Created = 'CREATED',\n}\n\nexport enum FulfillmentServiceType {\n  GiftCard = 'GIFT_CARD',\n  Manual = 'MANUAL',\n  ThirdParty = 'THIRD_PARTY',\n}\n\nexport enum WeightUnit {\n  Kilograms = 'KILOGRAMS',\n  Grams = 'GRAMS',\n  Pounds = 'POUNDS',\n  Ounces = 'OUNCES',\n}\n\nexport enum ProductVariantInventoryPolicy {\n  Deny = 'DENY',\n  Continue = 'CONTINUE',\n}\n\nexport enum ProductVariantInventoryManagement {\n  Shopify = 'SHOPIFY',\n  NotManaged = 'NOT_MANAGED',\n  FulfillmentService = 'FULFILLMENT_SERVICE',\n}\n\nexport interface Image {\n  id: string;\n  altText?: string;\n  originalSrc: string;\n}\n\nexport interface Resource {\n  id: string;\n  updatedAt: string;\n}\n\nexport interface Collection extends Resource {\n  availablePublicationCount: number;\n  description: string;\n  descriptionHtml: string;\n  handle: string;\n  id: string;\n  image?: Image | null;\n  productsAutomaticallySortedCount: number;\n  productsCount: number;\n  productsManuallySortedCount: number;\n  publicationCount: number;\n  seo: {\n    description?: string | null;\n    title?: string | null;\n  };\n  sortOrder: CollectionSortOrder;\n  storefrontId: string;\n  templateSuffix?: string | null;\n  title: string;\n}\n\nexport interface ProductVariant extends Resource {\n  availableForSale: boolean;\n  barcode?: string | null;\n  compareAtPrice?: Money | null;\n  createdAt: string;\n  displayName: string;\n  fulfillmentService?: {\n    id: string;\n    inventoryManagement: boolean;\n    productBased: boolean;\n    serviceName: string;\n    type: FulfillmentServiceType;\n  };\n  image?: Image | null;\n  inventoryItem: {id: string};\n  inventoryManagement: ProductVariantInventoryManagement;\n  inventoryPolicy: ProductVariantInventoryPolicy;\n  inventoryQuantity?: number | null;\n  position: number;\n  price: Money;\n  product: Partial<Product>;\n  requiresShipping: boolean;\n  selectedOptions: {value?: string | null}[];\n  sku?: string | null;\n  taxable: boolean;\n  title: string;\n  weight?: number | null;\n  weightUnit: WeightUnit;\n}\n\nexport interface Product extends Resource {\n  availablePublicationCount: number;\n  createdAt: string;\n  descriptionHtml: string;\n  handle: string;\n  hasOnlyDefaultVariant: boolean;\n  images: Image[];\n  options: {\n    id: string;\n    name: string;\n    position: number;\n    values: string[];\n  }[];\n  productType: string;\n  publishedAt?: string | null;\n  tags: string[];\n  templateSuffix?: string | null;\n  title: string;\n  totalInventory: number;\n  tracksInventory: boolean;\n  variants: Partial<ProductVariant>[];\n  vendor: string;\n}\n\nexport interface CancelPayload {\n  readonly id?: string;\n}\n\nexport type ClosePayload = CancelPayload;\n\nexport interface Payload {\n  readonly id?: string;\n  initialQuery?: string;\n  selectMultiple?: boolean;\n  showHidden?: boolean;\n  showVariants?: boolean;\n  resourceType: ResourceType;\n}\n\nexport type ResourceSelection = Product | ProductVariant | Collection;\n\nexport interface SelectPayload {\n  readonly id?: string;\n  selection: ResourceSelection[];\n}\n\nexport interface Options {\n  initialQuery?: string;\n  showHidden?: boolean;\n  selectMultiple?: boolean;\n}\n\nexport interface ProductOptions extends Options {\n  showVariants?: boolean;\n}\n\nexport interface BaseOptions {\n  resourceType: ResourceType;\n  options?: Options | ProductOptions;\n}\n\nexport enum ResourceType {\n  Product = 'product',\n  ProductVariant = 'variant',\n  Collection = 'collection',\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/ResourcePicker/types.ts","/**\n * @module TitleBar\n */\nimport {Button, Payload as ButtonPayload} from '../Button';\nimport {ButtonGroup, Payload as ButtonGroupPayload} from '../ButtonGroup';\n\nexport enum Action {\n  UPDATE = 'UPDATE',\n}\n\nexport enum ActionType {\n  UPDATE = 'APP::TITLEBAR::UPDATE',\n}\n\nexport enum ButtonsActionType {\n  BUTTON_CLICK = 'APP::TITLEBAR::BUTTONS::BUTTON::CLICK',\n  BUTTON_UPDATE = 'APP::TITLEBAR::BUTTONS::BUTTON::UPDATE',\n  BUTTON_GROUP_UPDATE = 'APP::TITLEBAR::BUTTONS::BUTTONGROUP::UPDATE',\n  BREADCRUMBS_CLICK = 'APP::TITLEBAR::BREADCRUMBS::BUTTON::CLICK',\n  BREADCRUMBS_UPDATE = 'APP::TITLEBAR::BREADCRUMBS::BUTTON::UPDATE',\n}\n\nexport interface Breadcrumb {\n  content: string;\n  url: string;\n}\n\nexport interface ButtonsOptions {\n  primary?: Button;\n  secondary?: (ButtonGroup | Button)[];\n}\n\nexport interface Options {\n  title?: string;\n  buttons?: ButtonsOptions;\n  breadcrumbs?: Button;\n}\n\nexport interface ButtonsPayload {\n  primary?: ButtonPayload;\n  secondary?: (ButtonPayload | ButtonGroupPayload)[];\n}\n\nexport interface Payload {\n  readonly id?: string;\n  title?: string;\n  buttons?: ButtonsPayload;\n  breadcrumbs?: ButtonPayload;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/TitleBar/types.ts","export * from './types';\nimport * as Button from './Button';\nimport * as ButtonGroup from './ButtonGroup';\nimport * as Cart from './Cart';\nimport * as Error from './Error';\nimport * as Flash from './Flash';\nimport * as Loading from './Loading';\nimport * as Modal from './Modal';\nimport * as Navigation from './Navigation';\nimport * as History from './Navigation/History';\nimport * as Redirect from './Navigation/Redirect';\nimport * as Print from './Print';\nimport * as ResourcePicker from './ResourcePicker';\nimport * as TitleBar from './TitleBar';\n\nimport {isAppBridgeAction} from './validator';\n\nexport {\n  isAppBridgeAction,\n  Button,\n  ButtonGroup,\n  Cart,\n  Error,\n  Flash,\n  Navigation,\n  History,\n  Loading,\n  Modal,\n  Print,\n  Redirect,\n  ResourcePicker,\n  TitleBar,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/index.ts","export * from './actions';\nexport * from './types';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Print/index.ts","import {actionWrapper, findMatchInEnum} from '../helper';\nimport {Group, MetaAction} from '../types';\nimport {Action, ActionType as Type, Payload} from './types';\n\nfunction errorActionWrapperWithId<A extends MetaAction>(type: Type, action: A, message?: string) {\n  const castPayload = (action as MetaAction).payload;\n\n  return actionWrapper({\n    type,\n    group: Group.Error,\n    payload: {\n      action,\n      message,\n      type,\n      id: castPayload && castPayload.id ? castPayload.id : undefined,\n    },\n  });\n}\n\nexport enum Message {\n  MISSING_PAYLOAD = 'Missing payload',\n  INVALID_PAYLOAD_ID = 'Id in payload is missing or invalid',\n}\n\nexport interface ErrorAction extends MetaAction {\n  payload: {\n    type: typeof Type;\n    action: Payload;\n  };\n}\n\nexport function invalidPayload<A extends MetaAction>(action: A, message?: string): ErrorAction {\n  return errorActionWrapperWithId(\n    Type.INVALID_PAYLOAD,\n    action,\n    message || \"The action's payload is missing required properties or has invalid properties\",\n  );\n}\n\nexport function invalidActionType<A extends MetaAction>(action: A, message?: string): ErrorAction {\n  return actionWrapper({\n    group: Group.Error,\n    payload: {\n      action,\n      message: message || 'The action type is invalid or unsupported',\n      type: Type.INVALID_ACTION_TYPE,\n    },\n    type: Type.INVALID_ACTION_TYPE,\n  });\n}\n\nexport function invalidAction<A extends MetaAction>(action: A, message?: string): ErrorAction {\n  return actionWrapper({\n    group: Group.Error,\n    payload: {\n      action,\n      message:\n        message || \"The action's has missing/invalid values for `group`, `type` or `version`\",\n      type: Type.INVALID_ACTION,\n    },\n    type: Type.INVALID_ACTION,\n  });\n}\n\nexport function unexpectedAction<A extends MetaAction>(action: A, message?: string): ErrorAction {\n  return actionWrapper({\n    group: Group.Error,\n    payload: {\n      action,\n      message: message || 'Action cannot be called at this time',\n      type: Type.UNEXPECTED_ACTION,\n    },\n    type: Type.UNEXPECTED_ACTION,\n  });\n}\n\nexport function unsupportedOperationAction<A extends MetaAction>(\n  action: A,\n  message?: string,\n): ErrorAction {\n  return errorActionWrapperWithId(\n    Type.UNSUPPORTED_OPERATION,\n    action,\n    message || 'The action type is unsupported',\n  );\n}\n\nexport function persistenceAction<A extends MetaAction>(action: A, message?: string): ErrorAction {\n  return errorActionWrapperWithId(\n    Type.PERSISTENCE,\n    action,\n    message || 'Action cannot be persisted on server',\n  );\n}\n\nexport function networkAction<A extends MetaAction>(action: A, message?: string): ErrorAction {\n  return errorActionWrapperWithId(Type.NETWORK, action, message || 'Network error');\n}\n\nexport function permissionAction<A extends MetaAction>(action: A, message?: string): ErrorAction {\n  return errorActionWrapperWithId(Type.PERMISSION, action, message || 'Action is not permitted');\n}\n\nexport function isErrorEventName(eventName: string) {\n  const match = findMatchInEnum(Action, eventName);\n\n  return typeof match === 'string';\n}\n\nexport class AppBridgeError {\n  message: string;\n  name: string;\n  stack!: any;\n  action?: Payload;\n  type?: string;\n\n  constructor(message: string) {\n    this.name = 'AppBridgeError';\n    this.message = message;\n\n    if (typeof Error.captureStackTrace === 'function') {\n      Error.captureStackTrace(this, this.constructor);\n    } else {\n      this.stack = new Error(this.message).stack;\n    }\n  }\n}\n\nAppBridgeError.prototype = Object.create(Error.prototype);\n\nexport function fromAction(message: string, type: string, action?: Payload) {\n  const errorMessage = message ? `${type}: ${message}` : type;\n  const error = new AppBridgeError(errorMessage);\n\n  error.action = action;\n  error.type = type;\n\n  return error;\n}\n\nexport function throwError(type: Type | string, action: Payload, message?: string): void;\nexport function throwError(type: Type | string, message: string): void;\nexport function throwError() {\n  const type = arguments[0];\n  let message;\n  let action;\n\n  if (typeof arguments[1] === 'string') {\n    message = arguments[1];\n  } else {\n    action = arguments[1];\n    message = arguments[2] || '';\n  }\n  throw fromAction(message, type, action);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Error/actions.ts","export interface Indexable {\n  [key: string]: any;\n}\n\nexport default function mergeProps<T extends Indexable, T2 extends Indexable>(\n  obj: T,\n  newObj: T2,\n): T | T2 | undefined {\n  if (newObj === undefined) {\n    return undefined;\n  }\n  // If setting to a different object type, don't merge any props\n  if (!Object.getPrototypeOf(obj).isPrototypeOf(newObj)) {\n    return newObj;\n  }\n\n  const clone: any = {};\n\n  Object.keys(newObj).forEach(key => {\n    const exists = obj.hasOwnProperty(key);\n    if (!exists) {\n      clone[key] = newObj[key];\n    } else {\n      if (typeof obj[key] === 'object' && !Array.isArray(obj[key])) {\n        clone[key] = mergeProps(obj[key] as Indexable, newObj[key] as Indexable);\n      } else {\n        clone[key] = newObj[key];\n      }\n    }\n  });\n\n  // Copy old props that are not present in new object only if this is a simple object\n  Object.keys(obj).forEach(key => {\n    const exists = newObj.hasOwnProperty(key);\n    if (!exists) {\n      clone[key] = obj[key];\n    }\n  });\n\n  // Set prototype of cloned object to match original\n  Object.setPrototypeOf(clone, Object.getPrototypeOf(obj));\n\n  return clone;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/merge.ts","/**\n * Convert a number or array of integers to a string of padded hex octets.\n */\nfunction asHex(value: number[] | Uint8Array): string {\n  return Array.from(value)\n    .map(i => `00${i.toString(16)}`.slice(-2))\n    .join('');\n}\n\n/**\n * Attempt to securely generate random bytes/\n */\nfunction getRandomBytes(size: number): number[] | Uint8Array {\n  // SPRNG\n  if (typeof Uint8Array === 'function' && window.crypto) {\n    const buffer = new Uint8Array(size);\n    const randomValues = window.crypto.getRandomValues(buffer) as Uint8Array;\n\n    if (randomValues) {\n      return randomValues;\n    }\n  }\n\n  // Insecure random\n  return Array.from(new Array(size), () => (Math.random() * 255) | 0);\n}\n\n/**\n * Generate a RFC4122-compliant v4 UUID.\n *\n * @see http://www.ietf.org/rfc/rfc4122.txt\n */\nexport function generateUuid(): string {\n  const version = 0b01000000;\n  const clockSeqHiAndReserved = getRandomBytes(1);\n  const timeHiAndVersion = getRandomBytes(2);\n\n  clockSeqHiAndReserved[0] &= 0b00111111 | 0b10000000;\n  // tslint:disable-next-line:binary-expression-operand-order\n  timeHiAndVersion[0] &= 0b00001111 | version;\n\n  return [\n    asHex(getRandomBytes(4)), // time-low\n    '-',\n    asHex(getRandomBytes(2)), // time-mid\n    '-',\n    asHex(timeHiAndVersion), // time-high-and-version\n    '-',\n    asHex(clockSeqHiAndReserved), // clock-seq-and-reserved\n    asHex(getRandomBytes(1)), // clock-seq-loq\n    '-',\n    asHex(getRandomBytes(6)), // node\n  ].join('');\n}\n\n// Default\nexport default generateUuid;\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/uuid.ts","module.exports = {\"name\":\"@shopify/app-bridge\",\"version\":\"0.7.3\",\"types\":\"index.d.ts\",\"main\":\"index.js\",\"files\":[\"actions.js\",\"actions.js.map\",\"actions/\",\"client/\",\"index.d.ts\",\"index.js\",\"index.js.map\",\"host.js\",\"host.js.map\",\"host/\",\"types/*\",\"util/\"],\"private\":false,\"publishConfig\":{\"access\":\"public\",\"@shopify:registry\":\"https://registry.npmjs.org\"},\"repository\":\"git@github.com:Shopify/app-bridge.git\",\"author\":\"Shopify Inc.\",\"license\":\"MIT\",\"scripts\":{\"build\":\"NODE_ENV=production webpack -p && tsc --project ./tsconfig.build.json --emitDeclarationOnly && echo \\\"/**\\n * @module client\\n */\\n\\nimport createClientApp from './client';\\nexport * from './client';\\nexport default createClientApp;\\n\\\" > index.d.ts\",\"build:docs\":\"typedoc src/actions --out docs/actions -name app-bridge/actions && typedoc src/host -name app-bridge/host --out docs/host && typedoc src/client -name app-bridge/client --out docs/client\",\"check\":\"tsc -p ./tsconfig.json --pretty --noEmit\",\"clean\":\"rm -rf ./**/*.d.ts ./actions* ./client* ./host* ./index* ./util\",\"lint\":\"tslint -c ./tslint.json -p ./tsconfig.json -t codeFrame\",\"prepublishOnly\":\"yarn run clean && yarn run build\",\"start\":\"webpack-dev-server\",\"test\":\"jest 'src'\",\"test:CI\":\"CI=true yarn test:coverage\",\"test:coverage\":\"yarn test --coverage --outputFile=coverage --maxWorkers 2\",\"test:watch\":\"yarn test --watch\",\"watch\":\"webpack --progress --watch\"},\"devDependencies\":{\"@shopify/shopify-express\":\"^1.0.0-alpha.7\",\"@types/enzyme\":\"^2.8.12\",\"@types/jest\":\"^22.2.0\",\"@types/react\":\"^16.0.40\",\"@types/react-dom\":\"^16.0.3\",\"@types/react-hot-loader\":\"^3.0.4\",\"@types/react-redux\":\"^5.0.9\",\"@types/react-router-dom\":\"^4.0.8\",\"@types/react-router-redux\":\"^5.0.8\",\"@types/react-test-renderer\":\"15.5.4\",\"@types/react-transition-group\":\"^2.0.6\",\"@types/webpack-env\":\"^1.13.1\",\"awesome-typescript-loader\":\"^3.4.1\",\"babel-plugin-system-import-transformer\":\"^3.1.0\",\"css-loader\":\"^0.28.7\",\"enzyme\":\"3.3.0\",\"enzyme-adapter-react-15\":\"^1.0.5\",\"express-session\":\"^1.15.6\",\"hoist-non-react-statics\":\"^2.5.0\",\"html-webpack-plugin\":\"^2.30.1\",\"jest\":\"22.4.2\",\"postcss-shopify\":\"^1.0.0\",\"prettier\":\"1.12.0\",\"react\":\"^15.5.4\",\"react-dom\":\"^15.5.4\",\"react-redux\":\"^5.0.6\",\"react-test-renderer\":\"15.5.4\",\"react-transition-group\":\"^2.2.1\",\"redux\":\"^3.7.2\",\"redux-devtools-extension\":\"^2.13.2\",\"style-loader\":\"^0.19.0\",\"ts-jest\":\"^22.4.1\",\"tslint\":\"^5.9.1\",\"tslint-config-shopify\":\"^3.0.1\",\"typedoc\":\"^0.10.0\",\"typedoc-plugin-external-module-name\":\"^1.1.1\",\"typedoc-plugin-markdown\":\"^1.0.14\",\"typescript\":\"2.8.1\",\"webpack\":\"^3.10.0\",\"webpack-dev-server\":\"^2.9.5\",\"webpack-fix-default-import-plugin\":\"^1.0.3\"},\"prettier\":{\"bracketSpacing\":false,\"printWidth\":100,\"singleQuote\":true,\"trailingComma\":\"all\"},\"jest\":{\"globals\":{\"ts-jest\":{\"babelConfig\":{\"plugins\":[\"babel-plugin-system-import-transformer\"],\"sourceMaps\":\"inline\"}}},\"setupTestFrameworkScriptFile\":\"./test/setup.js\",\"testRegex\":\".*\\\\.test\\\\.tsx?$\",\"testURL\":\"https://app-bridge.myshopify.io/\",\"transform\":{\".tsx?$\":\"<rootDir>/../../node_modules/ts-jest/preprocessor.js\"},\"moduleFileExtensions\":[\"js\",\"jsx\",\"json\",\"ts\",\"tsx\"],\"collectCoverageFrom\":[\"src/**/*.{js,jsx,ts,tsx}\",\"!**/node_modules/**\",\"!**/index.{ts,tsx}\",\"!**/types.ts\"],\"moduleDirectories\":[\"<rootDir>/node_modules\",\"./node_modules\",\"./src\"],\"moduleNameMapper\":{\"app-bridge/info\":\"<rootDir>/package.json\"}}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./package.json\n// module id = 31\n// module chunks = 0 1 2","/**\n * @module Button\n */\n\nimport {ClientApplication} from '../../client';\nimport {\n  actionWrapper,\n  getEventNameSpace,\n  getMergedProps,\n  sanitizeProps,\n  ActionSet,\n} from '../helper';\nimport {ActionSetProps, ClickAction, Component, ComponentType, Group, MetaAction} from '../types';\nimport {\n  invalidActionType,\n  invalidPayload,\n  throwError,\n  ActionType as ErrorActionType,\n  ErrorAction,\n  Message as ErrorMessage,\n} from '../Error';\nimport {Action, ActionType, ClickPayload, Icon, Options, Payload, Style} from './types';\n\nexport interface ButtonUpdateAction extends MetaAction {\n  readonly group: string;\n  payload: Payload;\n}\n\nexport type ButtonAction = ButtonUpdateAction | ClickAction | MetaAction;\n\nexport function getSafeButtonProps(props: Payload) {\n  return sanitizeProps(props, ['label', 'disabled', 'id', 'icon', 'style']);\n}\n\nexport function clickButton(\n  group: string,\n  component: Component,\n  payload?: ClickPayload,\n): ClickAction {\n  const {id} = component;\n  const action = getEventNameSpace(group, Action.CLICK, component);\n  const buttonPayload: ClickPayload = {\n    id,\n    payload,\n  };\n\n  return actionWrapper({type: action, group, payload: buttonPayload});\n}\n\nexport function update(group: string, component: Component, props: Payload): ButtonUpdateAction {\n  const {id} = component;\n  const {label} = props;\n  const action = getEventNameSpace(group, Action.UPDATE, component);\n  const buttonPayload: Payload = {\n    id,\n    label,\n    ...getSafeButtonProps(props),\n  };\n\n  return actionWrapper({type: action, group, payload: buttonPayload});\n}\n\nexport function validationError(\n  action: ButtonUpdateAction | ClickAction | MetaAction,\n): undefined | ErrorAction {\n  if (!action.hasOwnProperty('payload')) {\n    return invalidPayload(action, ErrorMessage.MISSING_PAYLOAD);\n  }\n  let payload;\n  switch (action.type) {\n    case ActionType.CLICK:\n      payload = (action as ButtonUpdateAction).payload;\n\n      return typeof payload.id === 'string'\n        ? undefined\n        : invalidPayload(action, ErrorMessage.INVALID_PAYLOAD_ID);\n\n    case ActionType.UPDATE:\n      payload = (action as ButtonUpdateAction).payload;\n\n      return isValidButtonProps(payload) ? undefined : invalidPayload(action);\n    default:\n      return invalidActionType(action);\n  }\n}\n\nexport function isValidButtonProps(button: Payload) {\n  return typeof button.id === 'string' && typeof button.label === 'string';\n}\n\nexport class Button extends ActionSet implements ActionSetProps<Options, Payload> {\n  label!: string;\n  disabled = false;\n  icon?: Icon;\n  style?: Style;\n\n  constructor(app: ClientApplication<any>, options: Options) {\n    super(app, ComponentType.Button, Group.Button);\n    this.set(options, false);\n  }\n\n  get options(): Options {\n    return {\n      disabled: this.disabled,\n      icon: this.icon,\n      label: this.label,\n      style: this.style,\n    };\n  }\n\n  get payload(): Payload {\n    return {\n      id: this.id,\n      ...this.options,\n    };\n  }\n\n  set(options: Partial<Options>, shouldUpdate = true) {\n    const mergedOptions = getMergedProps(this.options, options);\n    const {label, disabled, icon, style} = mergedOptions;\n\n    if (!this.validateOptions(mergedOptions)) {\n      return this;\n    }\n\n    this.label = label;\n    this.disabled = !!disabled;\n    this.icon = icon;\n    this.style = style;\n\n    if (shouldUpdate) {\n      this.dispatch(Action.UPDATE);\n    }\n\n    return this;\n  }\n\n  dispatch(action: Action.UPDATE): ActionSet;\n\n  dispatch(action: Action.CLICK, payload?: any): ActionSet;\n\n  dispatch(action: Action, payload?: any) {\n    switch (action) {\n      case Action.CLICK:\n        this.app.dispatch(clickButton(this.group, this.component, payload));\n        break;\n      case Action.UPDATE:\n        const updateAction = update(this.group, this.component, this.payload);\n        this.app.dispatch(updateAction);\n        break;\n      default:\n        throwError(\n          ErrorActionType.INVALID_ACTION_TYPE,\n          actionWrapper({\n            group: this.group,\n            payload: this.payload,\n            type: action,\n          }),\n        );\n    }\n\n    return this;\n  }\n\n  private validateOptions(options: Options) {\n    const buttonProps = {id: this.id, ...options};\n    if (!isValidButtonProps(buttonProps)) {\n      const errorAction = update(this.group, this.component, buttonProps);\n      throwError(ErrorActionType.INVALID_OPTIONS, errorAction);\n\n      return false;\n    }\n\n    return true;\n  }\n}\n\nexport function create(app: ClientApplication<any>, options: Options) {\n  return new Button(app, options);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Button/actions.ts","/**\n * @module ButtonGroup\n */\n\nimport {ClientApplication} from '../../client';\nimport {getSingleButton} from '../buttonHelper';\nimport {\n  actionWrapper,\n  getEventNameSpace,\n  getMergedProps,\n  sanitizeProps,\n  updateActionFromPayload,\n  ActionSetWithChildren,\n} from '../helper';\nimport {ActionSetProps, Component, ComponentType, Group, MetaAction} from '../types';\nimport {getSafeButtonProps, isValidButtonProps, Button, Payload as ButtonPayload} from '../Button';\nimport {\n  invalidActionType,\n  invalidPayload,\n  throwError,\n  ActionType as ErrorActionType,\n  ErrorAction,\n  Message as ErrorMessage,\n} from '../Error';\nimport {Action, ActionType, Options, Payload} from './types';\n\nexport interface ButtonGroupUpdateAction extends MetaAction {\n  readonly group: string;\n  payload: Payload;\n}\n\nexport type ButtonGroupAction = ButtonGroupUpdateAction | MetaAction;\n\nexport function update(\n  group: string,\n  component: Component,\n  props: Payload,\n): ButtonGroupUpdateAction {\n  return buttonActionWrapper(group, component, Action.UPDATE, props);\n}\n\nexport function isGroupedButton(options: ButtonGroup | object): options is ButtonGroup {\n  const castOptions = options as ButtonGroup;\n\n  return castOptions.buttons && castOptions.buttons.length > 0 && castOptions.label !== undefined;\n}\n\nexport function isGroupedButtonPayload(payload: Payload | object): payload is Payload {\n  const castOptions = payload as Payload;\n\n  return (\n    Array.isArray(castOptions.buttons) &&\n    typeof castOptions.id === 'string' &&\n    typeof castOptions.label === 'string'\n  );\n}\n\nexport function getSafeButtonGroupProps(props: Payload) {\n  return sanitizeProps(props, ['label', 'disabled', 'buttons', 'id']);\n}\n\nexport function validationError(\n  action: ButtonGroupUpdateAction | MetaAction,\n): undefined | ErrorAction {\n  if (!action.hasOwnProperty('payload')) {\n    return invalidPayload(action, ErrorMessage.MISSING_PAYLOAD);\n  }\n  switch (action.type) {\n    case ActionType.UPDATE:\n      const payload = (action as ButtonGroupUpdateAction).payload;\n\n      return isValidButtonGroupProps(payload) ? undefined : invalidPayload(action);\n    default:\n      return invalidActionType(action);\n  }\n}\n\nexport function isValidButtonGroupProps(buttonGroup: Payload) {\n  if (\n    typeof buttonGroup.id !== 'string' ||\n    typeof buttonGroup.label !== 'string' ||\n    !Array.isArray(buttonGroup.buttons)\n  ) {\n    return false;\n  }\n\n  for (const button of buttonGroup.buttons) {\n    if (!isValidButtonProps(button)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport class ButtonGroup extends ActionSetWithChildren implements ActionSetProps<Options, Payload> {\n  label!: string;\n  disabled = false;\n  buttonsOptions: Button[] = [];\n  buttons: ButtonPayload[] = [];\n  constructor(app: ClientApplication<any>, options: Options) {\n    super(app, ComponentType.ButtonGroup, Group.ButtonGroup);\n    this.set(options, false);\n  }\n\n  get options(): Options {\n    return {\n      buttons: this.buttonsOptions,\n      disabled: this.disabled,\n      label: this.label,\n    };\n  }\n\n  get payload(): Payload {\n    return {\n      ...this.options,\n      buttons: this.buttons,\n      id: this.id,\n    };\n  }\n\n  set(options: Partial<Options>, shouldUpdate = true) {\n    const mergedOptions = getMergedProps(this.options, options);\n    const {label, disabled, buttons} = mergedOptions;\n\n    if (!this.validateOptions(mergedOptions)) {\n      return this;\n    }\n\n    this.label = label;\n    this.disabled = !!disabled;\n    this.buttons = this.getButtons(buttons);\n    if (shouldUpdate) {\n      this.dispatch(Action.UPDATE);\n    }\n\n    return this;\n  }\n\n  dispatch(action: Action) {\n    switch (action) {\n      case Action.UPDATE:\n        const updateAction = update(this.group, this.component, this.payload);\n        this.app.dispatch(updateAction);\n        break;\n      default:\n        throwError(\n          ErrorActionType.INVALID_ACTION_TYPE,\n          actionWrapper({\n            group: this.group,\n            type: action,\n          }),\n        );\n    }\n\n    return this;\n  }\n\n  updateButtons(newPayload: ButtonPayload) {\n    if (!this.buttons || this.buttons.length === 0) {\n      return;\n    }\n    let updated;\n    for (const action of this.buttons) {\n      updated = updateActionFromPayload(action, getSafeButtonProps(newPayload));\n      if (updated) {\n        break;\n      }\n    }\n    if (updated) {\n      this.dispatch(Action.UPDATE);\n    }\n  }\n\n  protected getSingleButton(button: Button): ButtonPayload {\n    return getSingleButton(this, button, this.subgroups, this.updateButtons);\n  }\n\n  protected getButtons(buttonOptions?: Button[]): ButtonPayload[] {\n    const buttons: ButtonPayload[] = [];\n    if (!buttonOptions) {\n      return [];\n    }\n\n    buttonOptions.forEach((button: Button) => {\n      const singleButton = getSingleButton(this, button, this.subgroups, this.updateButtons);\n      buttons.push(singleButton);\n    });\n    this.buttonsOptions = buttonOptions;\n\n    return buttons;\n  }\n\n  private validateOptions(options: Options) {\n    const buttonGroupProps = {id: this.id, ...options};\n    if (!isValidButtonGroupProps(buttonGroupProps)) {\n      const errorAction = update(this.group, this.component, buttonGroupProps);\n      throwError(ErrorActionType.INVALID_OPTIONS, errorAction);\n\n      return false;\n    }\n\n    return true;\n  }\n}\n\nexport function create(app: ClientApplication<any>, options: Options) {\n  return new ButtonGroup(app, options);\n}\n\nfunction buttonActionWrapper(\n  group: string,\n  component: Component,\n  eventName: string,\n  props: Payload,\n  payload?: any,\n): any {\n  const {id} = component;\n  const {label} = props;\n  const action = getEventNameSpace(group, eventName, component);\n  const buttonPayload = {\n    id,\n    label,\n    ...getSafeButtonGroupProps(props),\n    payload,\n  };\n\n  return actionWrapper({type: action, group, payload: buttonPayload});\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/ButtonGroup/actions.ts","export * from './actions';\nexport * from './types';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Cart/index.ts","/**\n * @module Cart\n */\n\nimport {ClientApplication} from '../../client';\nimport {actionWrapper, isValidOptionalNumber, isValidOptionalString, ActionSet} from '../helper';\nimport {Group, MetaAction} from '../types';\nimport {\n  invalidActionType,\n  invalidPayload,\n  throwError,\n  ActionType as ErrorActionType,\n  ErrorAction,\n} from '../Error';\nimport {\n  Action,\n  ActionType,\n  Address,\n  AddCustomerAddressPayload,\n  AddLineItemPayload,\n  Customer,\n  Data,\n  Discount,\n  LineItem,\n  NoteAttributes,\n  Options,\n  Payload,\n  Properties,\n  RemoveLineItemDiscountPayload,\n  RemoveLineItemPayload,\n  RemoveLineItemPropertiesPayload,\n  RemovePropertiesPayload,\n  SetCustomerPayload,\n  SetDiscountPayload,\n  SetLineItemDiscountPayload,\n  SetLineItemPropertiesPayload,\n  SetPropertiesPayload,\n  UpdateCustomerAddressPayload,\n  UpdateLineItemPayload,\n} from './types';\n\n/**\n * Validation\n */\n\nfunction isValidAddress(address: Address) {\n  return (\n    isValidOptionalString(address.address1) &&\n    isValidOptionalString(address.address2) &&\n    isValidOptionalString(address.city) &&\n    isValidOptionalString(address.company) &&\n    isValidOptionalString(address.firstName) &&\n    isValidOptionalString(address.lastName) &&\n    isValidOptionalString(address.phone) &&\n    isValidOptionalString(address.provice) &&\n    isValidOptionalString(address.country) &&\n    isValidOptionalString(address.zip) &&\n    isValidOptionalString(address.name) &&\n    isValidOptionalString(address.proviceCode) &&\n    isValidOptionalString(address.countryCode)\n  );\n}\n\nfunction isValidAddresses(addresses?: Address[]) {\n  if (!addresses) {\n    return true;\n  }\n\n  return Array.isArray(addresses) && addresses.every(isValidAddress);\n}\n\nfunction isValidCart(cart: Data) {\n  return (\n    (cart.cartDiscount === undefined || isValidDiscount(cart.cartDiscount)) &&\n    (cart.customer === undefined ||\n      isValidCustomer(cart.customer) ||\n      isValidAddresses(cart.customer.addresses)) &&\n    isValidOptionalString(cart.grandTotal) &&\n    (cart.lineItems === undefined || isValidLineItems(cart.lineItems)) &&\n    isValidNoteAttributes(cart.noteAttributes) &&\n    isValidOptionalString(cart.subTotal) &&\n    isValidOptionalString(cart.taxTotal)\n  );\n}\n\nfunction isValidCustomer(customer: Customer) {\n  return (\n    isValidOptionalNumber(customer.id) &&\n    isValidOptionalString(customer.email) &&\n    isValidOptionalString(customer.firstName) &&\n    isValidOptionalString(customer.lastName) &&\n    isValidOptionalString(customer.note)\n  );\n}\n\nfunction isValidDiscount(discount: Discount) {\n  return (\n    isValidOptionalNumber(discount.amount) &&\n    isValidOptionalString(discount.discountDescription) &&\n    isValidOptionalString(discount.type)\n  );\n}\n\nfunction isValidLineItem(lineItem: LineItem) {\n  return (\n    isValidOptionalNumber(lineItem.price) &&\n    typeof lineItem.quantity === 'number' &&\n    isValidOptionalString(lineItem.title) &&\n    isValidOptionalNumber(lineItem.variantId)\n  );\n}\n\nfunction isValidLineItems(lineItems?: LineItem[]) {\n  if (!lineItems) {\n    return true;\n  }\n\n  return Array.isArray(lineItems) && lineItems.every(isValidLineItem);\n}\n\nfunction isValidNoteAttributes(noteAttributes?: NoteAttributes) {\n  return (\n    noteAttributes === undefined ||\n    (Array.isArray(noteAttributes) &&\n      noteAttributes.every(note => typeof note.name === 'string' && typeof note.value === 'string'))\n  );\n}\n\nfunction isValidProperties(properties: Properties) {\n  return (\n    typeof properties === 'object' &&\n    !Array.isArray(properties) &&\n    Object.keys(properties).every(key => typeof properties[key] === 'string')\n  );\n}\n\nfunction isValidPropertiesKey(keys: string[]) {\n  return Array.isArray(keys) && keys.every(key => typeof key === 'string');\n}\n\nexport function validationError(action: MetaAction): undefined | ErrorAction {\n  if (!action.payload || typeof action.payload.id !== 'string') {\n    return invalidPayload(action, 'Missing payload id');\n  }\n  let payload;\n  switch (action.type) {\n    case ActionType.FETCH:\n      return undefined;\n    case ActionType.UPDATE:\n      payload = action.payload as Payload;\n\n      return !payload.data || !isValidCart(payload.data)\n        ? invalidPayload(action, 'Invalid update payload')\n        : undefined;\n    case ActionType.SET_CUSTOMER:\n      payload = action.payload as SetCustomerPayload;\n\n      return !payload.data || !isValidCustomer(payload.data)\n        ? invalidPayload(action, 'Invalid set customer payload')\n        : undefined;\n    case ActionType.REMOVE_CUSTOMER:\n      return undefined;\n    case ActionType.ADD_CUSTOMER_ADDRESS:\n      payload = action.payload as AddCustomerAddressPayload;\n\n      return !payload.data || !isValidAddress(payload.data)\n        ? invalidPayload(action, 'Invalid add customer address payload')\n        : undefined;\n    case ActionType.UPDATE_CUSTOMER_ADDRESS:\n      payload = action.payload as UpdateCustomerAddressPayload;\n\n      return !payload.data || typeof payload.index !== 'number' || !isValidAddress(payload.data)\n        ? invalidPayload(action, 'Invalid update customer address payload')\n        : undefined;\n\n    case ActionType.SET_DISCOUNT:\n      payload = action.payload as SetDiscountPayload;\n\n      return !payload.data || !isValidDiscount(payload.data)\n        ? invalidPayload(action, 'Invalid set discount payload')\n        : undefined;\n    case ActionType.REMOVE_DISCOUNT:\n      return undefined;\n    case ActionType.SET_PROPERTIES:\n      payload = action.payload as SetPropertiesPayload;\n\n      return !payload.data || !isValidProperties(payload.data)\n        ? invalidPayload(action, 'Invalid add properties payload')\n        : undefined;\n    case ActionType.REMOVE_PROPERTIES:\n      payload = action.payload as RemovePropertiesPayload;\n\n      return !payload.data || !isValidPropertiesKey(payload.data)\n        ? invalidPayload(action, 'Invalid remove properties payload')\n        : undefined;\n    case ActionType.CLEAR:\n      return undefined;\n    case ActionType.ADD_LINE_ITEM:\n      payload = action.payload as AddLineItemPayload;\n\n      return !payload.data || !isValidLineItem(payload.data)\n        ? invalidPayload(action, 'Invalid add line item payload')\n        : undefined;\n    case ActionType.UPDATE_LINE_ITEM:\n      payload = action.payload as UpdateLineItemPayload;\n\n      return !payload.data ||\n        typeof payload.index !== 'number' ||\n        typeof payload.data.quantity !== 'number'\n        ? invalidPayload(action, 'Invalid update line item payload')\n        : undefined;\n    case ActionType.REMOVE_LINE_ITEM:\n      payload = action.payload as RemoveLineItemPayload;\n\n      return typeof payload.index !== 'number'\n        ? invalidPayload(action, 'Invalid remove line item payload')\n        : undefined;\n    case ActionType.SET_LINE_ITEM_DISCOUNT:\n      payload = action.payload as SetLineItemDiscountPayload;\n\n      return !payload.data || typeof payload.index !== 'number' || !isValidDiscount(payload.data)\n        ? invalidPayload(action, 'Invalid set line item discount payload')\n        : undefined;\n    case ActionType.REMOVE_LINE_ITEM_DISCOUNT:\n      payload = action.payload as RemoveLineItemDiscountPayload;\n\n      return typeof payload.index !== 'number'\n        ? invalidPayload(action, 'Invalid remove line item discount payload')\n        : undefined;\n    case ActionType.SET_LINE_ITEM_PROPERTIES:\n      payload = action.payload as SetLineItemPropertiesPayload;\n\n      return !payload.data || typeof payload.index !== 'number' || !isValidProperties(payload.data)\n        ? invalidPayload(action, 'Invalid add line item properties payload')\n        : undefined;\n    case ActionType.REMOVE_LINE_ITEM_PROPERTIES:\n      payload = action.payload as RemoveLineItemPropertiesPayload;\n\n      return !payload.data ||\n        typeof payload.index !== 'number' ||\n        !isValidPropertiesKey(payload.data)\n        ? invalidPayload(action, 'Invalid remove line item properties payload')\n        : undefined;\n    default:\n      return invalidActionType(action);\n  }\n}\n\n/**\n * Cart\n */\n\nexport class Cart extends ActionSet {\n  constructor(app: ClientApplication<any>, options?: Options) {\n    super(app, Group.Cart, Group.Cart, options ? options.id : undefined);\n  }\n\n  dispatch(\n    action: Action.FETCH | Action.REMOVE_CUSTOMER | Action.REMOVE_DISCOUNT | Action.CLEAR,\n  ): Cart;\n  dispatch(action: Action.UPDATE, payload: Payload): Cart;\n  dispatch(action: Action.SET_CUSTOMER, payload: SetCustomerPayload): Cart;\n  dispatch(action: Action.ADD_CUSTOMER_ADDRESS, payload: AddCustomerAddressPayload): Cart;\n  dispatch(action: Action.UPDATE_CUSTOMER_ADDRESS, payload: UpdateCustomerAddressPayload): Cart;\n  dispatch(action: Action.SET_DISCOUNT, payload: SetDiscountPayload): Cart;\n  dispatch(action: Action.SET_PROPERTIES, payload: SetPropertiesPayload): Cart;\n  dispatch(action: Action.REMOVE_PROPERTIES, payload: RemovePropertiesPayload): Cart;\n  dispatch(action: Action.ADD_LINE_ITEM, payload: AddLineItemPayload): Cart;\n  dispatch(action: Action.UPDATE_LINE_ITEM, payload: UpdateLineItemPayload): Cart;\n  dispatch(action: Action.REMOVE_LINE_ITEM, payload: RemoveLineItemPayload): Cart;\n  dispatch(action: Action.SET_LINE_ITEM_DISCOUNT, payload: SetLineItemDiscountPayload): Cart;\n  dispatch(action: Action.REMOVE_LINE_ITEM_DISCOUNT, payload: RemoveLineItemDiscountPayload): Cart;\n  dispatch(action: Action.SET_LINE_ITEM_PROPERTIES, payload: SetLineItemPropertiesPayload): Cart;\n  dispatch(\n    action: Action.REMOVE_LINE_ITEM_PROPERTIES,\n    payload: RemoveLineItemPropertiesPayload,\n  ): Cart;\n  dispatch(action: Action, payload?: any) {\n    switch (action) {\n      case Action.FETCH:\n        this.dispatchCartAction(ActionType.FETCH);\n        break;\n      case Action.UPDATE:\n        this.dispatchCartAction(ActionType.UPDATE, payload);\n        break;\n      case Action.SET_CUSTOMER:\n        this.dispatchCartAction(ActionType.SET_CUSTOMER, payload);\n        break;\n      case Action.REMOVE_CUSTOMER:\n        this.dispatchCartAction(ActionType.REMOVE_CUSTOMER, payload);\n        break;\n      case Action.ADD_CUSTOMER_ADDRESS:\n        this.dispatchCartAction(ActionType.ADD_CUSTOMER_ADDRESS, payload);\n        break;\n      case Action.UPDATE_CUSTOMER_ADDRESS:\n        this.dispatchCartAction(ActionType.UPDATE_CUSTOMER_ADDRESS, payload);\n        break;\n      case Action.SET_DISCOUNT:\n        this.dispatchCartAction(ActionType.SET_DISCOUNT, payload);\n        break;\n      case Action.REMOVE_DISCOUNT:\n        this.dispatchCartAction(ActionType.REMOVE_DISCOUNT, payload);\n        break;\n      case Action.SET_PROPERTIES:\n        this.dispatchCartAction(ActionType.SET_PROPERTIES, payload);\n        break;\n      case Action.REMOVE_PROPERTIES:\n        this.dispatchCartAction(ActionType.REMOVE_PROPERTIES, payload);\n        break;\n      case Action.CLEAR:\n        this.dispatchCartAction(ActionType.CLEAR, payload);\n        break;\n      case Action.ADD_LINE_ITEM:\n        this.dispatchCartAction(ActionType.ADD_LINE_ITEM, payload);\n        break;\n      case Action.UPDATE_LINE_ITEM:\n        this.dispatchCartAction(ActionType.UPDATE_LINE_ITEM, payload);\n        break;\n      case Action.REMOVE_LINE_ITEM:\n        this.dispatchCartAction(ActionType.REMOVE_LINE_ITEM, payload);\n        break;\n      case Action.SET_LINE_ITEM_DISCOUNT:\n        this.dispatchCartAction(ActionType.SET_LINE_ITEM_DISCOUNT, payload);\n        break;\n      case Action.REMOVE_LINE_ITEM_DISCOUNT:\n        this.dispatchCartAction(ActionType.REMOVE_LINE_ITEM_DISCOUNT, payload);\n        break;\n      case Action.SET_LINE_ITEM_PROPERTIES:\n        this.dispatchCartAction(ActionType.SET_LINE_ITEM_PROPERTIES, payload);\n        break;\n      case Action.REMOVE_LINE_ITEM_PROPERTIES:\n        this.dispatchCartAction(ActionType.REMOVE_LINE_ITEM_PROPERTIES, payload);\n        break;\n      default:\n        throwError(\n          ErrorActionType.INVALID_ACTION_TYPE,\n          actionWrapper({\n            group: this.group,\n            type: action,\n          }),\n        );\n    }\n\n    return this;\n  }\n\n  private dispatchCartAction(type: ActionType, payload?: any) {\n    this.app.dispatch(\n      actionWrapper({\n        type,\n        group: Group.Cart,\n        payload: {\n          ...(payload || {}),\n          id: this.id,\n        },\n      }),\n    );\n  }\n}\n\nexport function create(app: ClientApplication<any>, options?: Options) {\n  return new Cart(app, options);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Cart/actions.ts","export * from './actions';\nexport * from './types';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Flash/index.ts","/**\n * @module Flash\n */\n\nimport {ClientApplication} from '../../client';\nimport {actionWrapper, getMergedProps, ActionSet} from '../helper';\nimport {ActionSetProps, Group, MetaAction} from '../types';\nimport {\n  invalidActionType,\n  invalidPayload,\n  throwError,\n  ActionType as ErrorActionType,\n  ErrorAction,\n} from '../Error';\nimport {Action, ActionType, ClearPayload, Options, Payload} from './types';\n\nexport interface ActionBase extends MetaAction {\n  readonly group: typeof Group.Flash;\n}\nexport interface ShowAction extends ActionBase {\n  readonly type: typeof ActionType.SHOW;\n  readonly payload: Payload;\n}\nexport interface ClearAction extends ActionBase {\n  readonly type: typeof ActionType.CLEAR;\n}\n\nexport type FlashAction = ShowAction | ClearAction | MetaAction;\n\nexport function show(flashMessage: Payload): ShowAction {\n  return actionWrapper({\n    group: Group.Flash,\n    payload: flashMessage,\n    type: ActionType.SHOW,\n  });\n}\n\nexport function clear(payload: ClearPayload): ClearAction {\n  return actionWrapper({\n    payload,\n    group: Group.Flash,\n    type: ActionType.CLEAR,\n  });\n}\n\nexport function validationError(\n  action: ShowAction | ClearAction | MetaAction,\n): undefined | ErrorAction {\n  let payload;\n  switch (action.type) {\n    case ActionType.CLEAR:\n      payload = (action as ClearAction).payload;\n\n      return payload === undefined || (payload.id === undefined || typeof payload.id === 'string')\n        ? undefined\n        : invalidPayload(action, 'Id in payload is invalid');\n\n    case ActionType.SHOW:\n      payload = (action as ShowAction).payload;\n\n      return payload !== undefined &&\n        (payload.id === undefined || typeof payload.id === 'string') &&\n        isValidFlashProps(payload)\n        ? undefined\n        : invalidPayload(action);\n    default:\n      return invalidActionType(action);\n  }\n}\n\nfunction isValidFlashProps(props: Payload) {\n  return typeof props.message === 'string' && typeof props.duration === 'number';\n}\n\nexport class Flash extends ActionSet implements ActionSetProps<Options, Payload> {\n  message = '';\n  isDismissible?: boolean;\n  duration = 3000;\n  isError?: boolean;\n  constructor(app: ClientApplication<any>, options: Options) {\n    super(app, Group.Flash, Group.Flash);\n    this.set(options);\n  }\n\n  get options(): Options {\n    return {\n      duration: this.duration,\n      isDismissible: this.isDismissible,\n      isError: this.isError,\n      message: this.message,\n    };\n  }\n\n  get payload(): Payload {\n    return {\n      id: this.id,\n      ...this.options,\n    };\n  }\n\n  set(options: Partial<Options>) {\n    const mergedOptions = getMergedProps(this.options, options);\n    const {message, isDismissible, duration, isError} = mergedOptions;\n\n    if (!this.validateOptions(mergedOptions)) {\n      return this;\n    }\n\n    this.message = message;\n    this.isDismissible = isDismissible;\n    this.duration = duration;\n    this.isError = isError;\n\n    return this;\n  }\n\n  dispatch(action: Action) {\n    switch (action) {\n      case Action.SHOW:\n        const openAction = show(this.payload);\n        this.app.dispatch(openAction);\n        break;\n      case Action.CLEAR:\n        this.app.dispatch(clear({id: this.id}));\n        break;\n      default:\n        throwError(\n          ErrorActionType.INVALID_ACTION_TYPE,\n          actionWrapper({\n            group: this.group,\n            type: action,\n          }),\n        );\n    }\n\n    return this;\n  }\n\n  private validateOptions(options: Options) {\n    if (!isValidFlashProps(options)) {\n      const errorAction = actionWrapper({\n        group: Group.Flash,\n        payload: {id: this.id, ...options},\n      });\n      throwError(ErrorActionType.INVALID_OPTIONS, errorAction);\n\n      return false;\n    }\n\n    return true;\n  }\n}\n\nexport function create(app: ClientApplication<any>, options: Options) {\n  return new Flash(app, options);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Flash/actions.ts","export * from './actions';\nexport * from './types';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Loading/index.ts","/**\n * @module Loading\n */\n\nimport {ClientApplication} from '../../client';\nimport {actionWrapper, ActionSet} from '../helper';\nimport {ActionSetPayload, Group, MetaAction} from '../types';\nimport {invalidActionType, throwError, ActionType as ErrorActionType, ErrorAction} from '../Error';\nimport {Action, ActionType, Payload} from './types';\n\nexport type LoadingAction = MetaAction;\n\nexport function start(payload?: Payload): LoadingAction {\n  return actionWrapper({\n    payload,\n    group: Group.Loading,\n    type: ActionType.START,\n  });\n}\n\nexport function stop(payload?: Payload): LoadingAction {\n  return actionWrapper({\n    payload,\n    group: Group.Loading,\n    type: ActionType.STOP,\n  });\n}\n\nexport function validationError<A extends MetaAction>(action: A): undefined | ErrorAction {\n  switch (action.type) {\n    case ActionType.START:\n    case ActionType.STOP:\n      // No validation since there should not be a payload\n      return undefined;\n    default:\n      return invalidActionType(action);\n  }\n}\n\nexport class Loading extends ActionSet implements ActionSetPayload<Payload> {\n  constructor(app: ClientApplication<any>) {\n    super(app, Group.Loading, Group.Loading);\n  }\n\n  get payload() {\n    return {id: this.id};\n  }\n\n  dispatch(action: Action) {\n    switch (action) {\n      case Action.START:\n        this.app.dispatch(start(this.payload));\n        break;\n\n      case Action.STOP:\n        this.app.dispatch(stop(this.payload));\n        break;\n\n      default:\n        throwError(\n          ErrorActionType.INVALID_ACTION_TYPE,\n          actionWrapper({\n            group: this.group,\n            type: action,\n          }),\n        );\n    }\n\n    return this;\n  }\n}\n\nexport function create(app: ClientApplication<any>) {\n  return new Loading(app);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Loading/actions.ts","export * from './actions';\nexport * from './types';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Modal/index.ts","/**\n * @module Modal\n */\nimport {ClientApplication} from '../../client';\nimport {isSafe} from '../../util/@shopify/safe-redirect';\nimport {getSingleButton} from '../buttonHelper';\nimport {\n  actionWrapper,\n  forEachInEnum,\n  getMergedProps,\n  updateActionFromPayload,\n  ActionSetWithChildren,\n} from '../helper';\nimport {ActionSetProps, ClickAction, ComponentType, Group, MetaAction} from '../types';\nimport {\n  clickButton,\n  getSafeButtonProps,\n  isValidButtonProps,\n  validationError as buttonValidationError,\n  ActionType as ButtonActionType,\n  Button,\n  Payload as ButtonPayload,\n} from '../Button';\nimport {\n  invalidActionType,\n  invalidPayload,\n  throwError,\n  ActionType as ErrorActionType,\n  ErrorAction,\n  Message as ErrorMessage,\n} from '../Error';\nimport {isValidAbsolutePath, isValidRelativePath} from '../Navigation/helper';\nimport {\n  Action,\n  ActionType,\n  ClosePayload,\n  Footer,\n  FooterActionType,\n  FooterOptions,\n  IframeOptions,\n  IframePayload,\n  MessageOptions,\n  MessagePayload,\n  Size,\n} from './types';\n\nexport const GROUP = Group.Modal;\n\nconst FOOTER_BUTTON_PROPS = {\n  group: GROUP,\n  subgroups: ['Footer'],\n  type: ComponentType.Button,\n};\n\nexport interface ActionBase extends MetaAction {\n  readonly group: typeof GROUP;\n}\n\nexport interface OpenAction extends ActionBase {\n  readonly type: typeof ActionType.OPEN;\n  readonly payload: MessagePayload | IframePayload;\n}\n\nexport type UpdateAction = OpenAction;\n\nexport interface CloseAction extends ActionBase {\n  readonly type: typeof ActionType.CLOSE;\n}\n\nexport type ModalAction = OpenAction | UpdateAction | CloseAction | MetaAction;\n\nexport function openModal(modalPayload: MessagePayload | IframePayload): OpenAction {\n  return actionWrapper({\n    group: GROUP,\n    payload: modalPayload,\n    type: ActionType.OPEN,\n  });\n}\n\nexport function closeModal(modalClosePayload: ClosePayload): CloseAction {\n  return actionWrapper({\n    group: GROUP,\n    payload: modalClosePayload,\n    type: ActionType.CLOSE,\n  });\n}\n\nexport function clickFooterButton(id: string, payload?: any): ClickAction {\n  const component = {id, ...FOOTER_BUTTON_PROPS};\n\n  return clickButton(GROUP, component, payload);\n}\n\nexport function update(payload: MessagePayload | IframePayload): UpdateAction {\n  return actionWrapper({\n    payload,\n    group: GROUP,\n    type: ActionType.UPDATE,\n  });\n}\n\nexport function isValidSrc(options: Partial<IframeOptions | IframePayload>, localOrigin?: string) {\n  const {url, path} = options;\n  if (!url && !path) {\n    return false;\n  }\n\n  if (path && !isValidRelativePath(path)) {\n    return false;\n  }\n\n  if (url) {\n    if (!localOrigin) {\n      return false;\n    }\n    if (!isValidAbsolutePath(url)) {\n      return false;\n    }\n\n    let hostName;\n    try {\n      hostName = new URL(localOrigin).hostname;\n    } catch (error) {\n      return false;\n    }\n\n    const isSafeSrc = isSafe(url, {\n      requireAbsolute: true,\n      requireSSL: true,\n      whitelist: [hostName],\n    });\n\n    if (!isSafeSrc) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function validationError(\n  action: OpenAction | UpdateAction | CloseAction | ClickAction | MetaAction,\n  localOrigin?: string,\n): undefined | ErrorAction {\n  let payload;\n  switch (action.type) {\n    case ActionType.OPEN:\n      payload = (action as OpenAction).payload;\n      if (payload === undefined) {\n        return invalidPayload(action, ErrorMessage.MISSING_PAYLOAD);\n      }\n      if (payload.id && typeof payload.id !== 'string') {\n        return invalidPayload(action, ErrorMessage.INVALID_PAYLOAD_ID);\n      }\n\n      return isValidModalProps(payload, localOrigin) ? undefined : invalidPayload(action);\n\n    case ActionType.UPDATE:\n      payload = (action as UpdateAction).payload;\n\n      if (payload === undefined) {\n        return invalidPayload(action, ErrorMessage.MISSING_PAYLOAD);\n      }\n\n      if (typeof payload.id !== 'string') {\n        return invalidPayload(action, ErrorMessage.INVALID_PAYLOAD_ID);\n      }\n\n      // Id is always required when updating\n      return isValidModalProps(payload, localOrigin) ? undefined : invalidPayload(action);\n\n    case ActionType.CLOSE:\n      payload = (action as CloseAction).payload;\n\n      if (payload && payload.id && typeof payload.id !== 'string') {\n        return invalidPayload(action, ErrorMessage.INVALID_PAYLOAD_ID);\n      }\n\n      return undefined;\n\n    case FooterActionType.FOOTER_BUTTON_CLICK:\n      return buttonValidationError({...action, type: ButtonActionType.CLICK});\n\n    case FooterActionType.FOOTER_BUTTON_UPDATE:\n      return buttonValidationError({...action, type: ButtonActionType.UPDATE});\n\n    default:\n      return invalidActionType(action);\n  }\n}\n\nexport function isValidModalProps(\n  props: (MessageOptions | IframeOptions) | (MessagePayload | IframePayload) | undefined,\n  localOrigin?: string,\n) {\n  if (props === undefined) {\n    return false;\n  }\n\n  if (\n    isIframeModal(props) &&\n    (typeof localOrigin !== 'string' || !isValidSrc(props, localOrigin))\n  ) {\n    return false;\n  }\n\n  return (\n    (isMessageModal(props) || isIframeModal(props)) &&\n    isValidModalFooter(props.footer) &&\n    isValidModalSize(props.size)\n  );\n}\n\nexport function isValidModalFooter(footer?: Footer) {\n  if (footer === undefined || !footer.hasOwnProperty('buttons')) {\n    return true;\n  }\n\n  if (\n    footer.hasOwnProperty('buttons') &&\n    (Array.isArray(footer.buttons) || typeof footer.buttons !== 'object')\n  ) {\n    return false;\n  }\n\n  const {secondary, primary} = footer.buttons;\n\n  if (primary && !isValidButtonProps(primary)) {\n    return false;\n  }\n\n  if (secondary && !Array.isArray(secondary)) {\n    return false;\n  } else if (Array.isArray(secondary)) {\n    for (const button of secondary) {\n      if (!isValidButtonProps(button)) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nexport function isValidModalSize(size?: string) {\n  if (size === undefined) {\n    return true;\n  }\n  let valid = false;\n  forEachInEnum(Size, sizeOption => {\n    if (size === sizeOption) {\n      valid = true;\n    }\n  });\n\n  return valid;\n}\n\nexport function isIframeModal(\n  options: MessagePayload | IframePayload | object,\n): options is IframePayload {\n  return (\n    typeof (options as IframePayload).url === 'string' ||\n    typeof (options as IframePayload).path === 'string'\n  );\n}\n\nexport function isMessageModal(\n  options: MessagePayload | IframePayload | object,\n): options is MessagePayload {\n  return typeof (options as MessagePayload).message === 'string';\n}\n\nexport abstract class Modal extends ActionSetWithChildren {\n  title?: string;\n  size = Size.Small;\n  footerPrimary?: ButtonPayload;\n  footerPrimaryOptions?: Button;\n  footerSecondary?: ButtonPayload[];\n  footerSecondaryOptions?: Button[];\n\n  get footer(): Footer | undefined {\n    if (!this.footerPrimary && !this.footerSecondary) {\n      return undefined;\n    }\n\n    return {\n      buttons: {\n        primary: this.footerPrimary,\n        secondary: this.footerSecondary,\n      },\n    };\n  }\n\n  get footerOptions(): FooterOptions | undefined {\n    if (!this.footerPrimaryOptions && !this.footerSecondaryOptions) {\n      return undefined;\n    }\n\n    return {\n      buttons: {\n        primary: this.footerPrimaryOptions,\n        secondary: this.footerSecondaryOptions,\n      },\n    };\n  }\n\n  protected close() {\n    this.app.dispatch(closeModal({id: this.id}));\n  }\n\n  protected setFooterPrimaryButton(newOptions: Button | undefined, updateCb: () => void) {\n    const {subgroups} = FOOTER_BUTTON_PROPS;\n    this.footerPrimaryOptions = this.getChildButton(newOptions, this.footerPrimaryOptions);\n    this.footerPrimary = this.footerPrimaryOptions\n      ? getSingleButton(this, this.footerPrimaryOptions, subgroups, (newPayload: ButtonPayload) => {\n          this.updatePrimaryFooterButton(newPayload, updateCb);\n        })\n      : undefined;\n  }\n\n  protected setFooterSecondaryButtons(newOptions: Button[] | undefined, updateCb: () => void) {\n    const {subgroups} = FOOTER_BUTTON_PROPS;\n    const newButtons = newOptions || [];\n    const currentOptions = (this.footerOptions && this.footerOptions.buttons.secondary) || [];\n    this.footerSecondaryOptions = this.getUpdatedChildActions(newButtons, currentOptions);\n\n    this.footerSecondary = this.footerSecondaryOptions\n      ? this.footerSecondaryOptions.map(action =>\n          getSingleButton(this, action, subgroups, (newPayload: ButtonPayload) => {\n            this.updateSecondaryFooterButton(newPayload, updateCb);\n          }),\n        )\n      : undefined;\n  }\n\n  protected getChildButton(newAction: undefined | Button, currentAction: undefined | Button) {\n    const newButtons = newAction ? [newAction] : [];\n    const currentButtons = currentAction ? [currentAction] : [];\n    const updatedButton = this.getUpdatedChildActions(newButtons, currentButtons);\n\n    return updatedButton ? updatedButton[0] : undefined;\n  }\n\n  protected updatePrimaryFooterButton(newPayload: ButtonPayload, updateCb: () => void) {\n    if (!this.footer || !this.footer.buttons.primary) {\n      return;\n    }\n    if (updateActionFromPayload(this.footer.buttons.primary, getSafeButtonProps(newPayload))) {\n      updateCb();\n    }\n  }\n\n  protected updateSecondaryFooterButton(newPayload: ButtonPayload, updateCb: () => void) {\n    if (!this.footer || !this.footer.buttons || !this.footer.buttons.secondary) {\n      return;\n    }\n    let updated;\n    for (const action of this.footer.buttons.secondary) {\n      updated = updateActionFromPayload(action, getSafeButtonProps(newPayload));\n      if (updated) {\n        break;\n      }\n    }\n    if (updated) {\n      updateCb();\n    }\n  }\n\n  protected validateOptions(options: MessageOptions | IframeOptions) {\n    const props = {id: this.id, ...options};\n    if (!isValidModalProps(options, this.app.localOrigin)) {\n      const errorAction = update(props);\n      throwError(ErrorActionType.INVALID_OPTIONS, errorAction);\n\n      return false;\n    }\n\n    return true;\n  }\n}\n\nexport class ModalMessage extends Modal implements ActionSetProps<MessageOptions, MessagePayload> {\n  message!: string;\n\n  constructor(app: ClientApplication<any>, options: MessageOptions) {\n    super(app, GROUP, GROUP);\n    this.set(options, false);\n  }\n\n  get payload() {\n    return {\n      ...this.options,\n      footer: this.footer,\n      id: this.id,\n    };\n  }\n\n  get options() {\n    return {\n      footer: this.footerOptions,\n      message: this.message,\n      size: this.size,\n      title: this.title,\n    };\n  }\n\n  set(options: Partial<MessageOptions>, shouldUpdate = true) {\n    const mergedOptions = getMergedProps(this.options, options);\n    const {title, footer, message, size} = mergedOptions;\n\n    if (!this.validateOptions(mergedOptions)) {\n      return this;\n    }\n\n    this.title = title;\n    this.message = message;\n    this.size = size;\n    this.setFooterPrimaryButton(footer ? footer.buttons.primary : undefined, () => {\n      this.dispatch(Action.UPDATE);\n    });\n\n    this.setFooterSecondaryButtons(footer ? footer.buttons.secondary : undefined, () => {\n      this.dispatch(Action.UPDATE);\n    });\n\n    if (shouldUpdate) {\n      this.dispatch(Action.UPDATE);\n    }\n\n    return this;\n  }\n\n  dispatch(action: Action) {\n    switch (action) {\n      case Action.OPEN:\n        this.app.dispatch(openModal(this.payload));\n        break;\n      case Action.CLOSE:\n        this.close();\n        break;\n      case Action.UPDATE:\n        this.app.dispatch(update(this.payload));\n        break;\n      default:\n        throwError(\n          ErrorActionType.INVALID_ACTION_TYPE,\n          actionWrapper({\n            group: this.group,\n            type: action,\n          }),\n        );\n    }\n\n    return this;\n  }\n}\n\nexport class ModalIframe extends Modal implements ActionSetProps<IframeOptions, IframePayload> {\n  url?: string;\n  path?: string;\n\n  constructor(app: ClientApplication<any>, options: IframeOptions) {\n    super(app, GROUP, GROUP);\n    this.set(options, false);\n  }\n\n  get payload() {\n    return {\n      ...this.options,\n      footer: this.footer,\n      id: this.id,\n    };\n  }\n\n  get options() {\n    return {\n      footer: this.footerOptions,\n      path: this.path,\n      size: this.size,\n      title: this.title,\n      url: this.url,\n    };\n  }\n\n  set(options: Partial<IframeOptions>, shouldUpdate = true) {\n    const mergedOptions = getMergedProps(this.options, options);\n    const {title, footer, path, url, size} = mergedOptions;\n\n    if (!this.validateOptions(mergedOptions)) {\n      return this;\n    }\n\n    this.title = title;\n    this.url = url;\n    this.path = path;\n    this.size = size;\n\n    this.setFooterPrimaryButton(footer ? footer.buttons.primary : undefined, () => {\n      this.dispatch(Action.UPDATE);\n    });\n\n    this.setFooterSecondaryButtons(footer ? footer.buttons.secondary : undefined, () => {\n      this.dispatch(Action.UPDATE);\n    });\n\n    if (shouldUpdate) {\n      this.dispatch(Action.UPDATE);\n    }\n\n    return this;\n  }\n\n  dispatch(action: Action) {\n    switch (action) {\n      case Action.OPEN:\n        this.app.dispatch(openModal(this.payload));\n        break;\n      case Action.CLOSE:\n        this.close();\n        break;\n      case Action.UPDATE:\n        this.app.dispatch(update(this.payload));\n        break;\n      default:\n        throwError(\n          ErrorActionType.INVALID_ACTION_TYPE,\n          actionWrapper({\n            group: this.group,\n            type: action,\n          }),\n        );\n    }\n\n    return this;\n  }\n}\n\nexport const create = (app: ClientApplication<any>, options: MessageOptions | IframeOptions) => {\n  if (isIframeModal(options)) {\n    return new ModalIframe(app, options);\n  }\n\n  return new ModalMessage(app, options);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Modal/actions.ts","export interface Options {\n  matchPath?: RegExp | string;\n  requireAbsolute?: boolean;\n  requireSSL?: boolean;\n  whitelist?: string[];\n  subdomains?: string[];\n}\n\nconst FILE_URI_MATCH = /\\/\\/\\//;\nconst INVALID_RELATIVE_URL = /[/\\\\][/\\\\]/;\nconst VALID_PROTOCOLS = ['https:', 'http:'];\nconst DUMMY_HOSTNAME = 'http://test.com';\n\nexport function isSafe(\n  redirectUrl: string,\n  {whitelist = [], subdomains = [], matchPath, requireAbsolute, requireSSL}: Options = {},\n) {\n  if (FILE_URI_MATCH.test(redirectUrl)) {\n    return false;\n  }\n\n  if (redirectUrl.startsWith('/')) {\n    if (whitelist.length > 0 || subdomains.length > 0 || requireAbsolute || requireSSL) {\n      return false;\n    }\n\n    if (matchPath) {\n      // Creating a new URL expands the pathname in case of things like `/a/../b`\n      return pathMatches(new URL(redirectUrl, DUMMY_HOSTNAME), redirectUrl, matchPath);\n    }\n\n    return !INVALID_RELATIVE_URL.test(redirectUrl);\n  }\n\n  let url: URL;\n\n  try {\n    url = new URL(redirectUrl);\n  } catch (error) {\n    return false;\n  }\n\n  if (!VALID_PROTOCOLS.includes(url.protocol)) {\n    return false;\n  }\n\n  if (requireSSL && url.protocol !== 'https:') {\n    return false;\n  }\n\n  if (url.username || url.password) {\n    return false;\n  }\n\n  if (matchPath && !pathMatches(url, redirectUrl, matchPath)) {\n    return false;\n  }\n\n  if (!hostIsValid(url, whitelist, subdomains)) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction hostIsValid(url: URL, whitelist: string[], subdomains: string[]) {\n  if (!subdomains.every(subdomain => subdomain.startsWith('.'))) {\n    throw new TypeError('Subdomains must begin with .');\n  }\n\n  const {hostname} = url;\n\n  return (\n    (whitelist.length === 0 && subdomains.length === 0) ||\n    whitelist.includes(hostname) ||\n    subdomains.some(subdomain => hostname.endsWith(subdomain))\n  );\n}\n\nfunction pathMatches(url: URL, originalUrl: string, matcher: string | RegExp) {\n  const {pathname} = url;\n\n  // Gets just the unresolve pathname, i.e., `http://foo.com/a/../b => /a/../b\n  const originalPathname = originalUrl.replace(url.origin, '').split('?')[0];\n\n  return typeof matcher === 'string'\n    ? pathname === matcher && originalPathname === matcher\n    : matcher.test(pathname) && matcher.test(originalPathname);\n}\n\nexport function makeSafe(url: string, fallback: string, options?: Options) {\n  return isSafe(url, options) ? encodeURI(url) : fallback;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/@shopify/safe-redirect/index.ts","import validationError from './validator';\n\nexport {validationError};\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Navigation/index.ts","import {MetaAction} from '../../actions/types';\nimport {findMatchInEnum} from '../helper';\nimport {invalidActionType, ErrorAction} from '../Error';\nimport {validationError as historyValidationError} from './History/actions';\nimport {ActionType as HistoryActionType} from './History/types';\n\nimport {validationError as redirectValidationError} from './Redirect/actions';\nimport {ActionType as RedirectActionType} from './Redirect/types';\n\nexport default function validationError(action: MetaAction): undefined | ErrorAction {\n  if (findMatchInEnum(RedirectActionType, action.type)) {\n    return redirectValidationError(action);\n  }\n  if (findMatchInEnum(HistoryActionType, action.type)) {\n    return historyValidationError(action);\n  }\n\n  return invalidActionType(action);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Navigation/validator.ts","export * from './actions';\nexport * from './types';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Navigation/History/index.ts","export * from './actions';\nexport * from './types';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Navigation/Redirect/index.ts","/**\n * @module Print\n */\n\nimport {actionWrapper} from '../helper';\nimport {Group, MetaAction} from '../types';\nimport {invalidActionType, ErrorAction} from '../Error';\nimport {ActionType} from './types';\n\nexport type PrintAction = MetaAction;\n\nexport function app(): PrintAction {\n  return actionWrapper({\n    group: Group.Print,\n    type: ActionType.APP,\n  });\n}\n\nexport function validationError(action: MetaAction): undefined | ErrorAction {\n  switch (action.type) {\n    case ActionType.APP:\n      // No validation since there should not be a payload\n      return undefined;\n    default:\n      return invalidActionType(action);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/Print/actions.ts","export * from './actions';\nexport * from './types';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/ResourcePicker/index.ts","/**\n * @module ResourcePicker\n */\n\nimport {ClientApplication} from '../../client';\nimport {\n  invalidActionType,\n  invalidPayload,\n  throwError,\n  ActionType as ErrorActionType,\n  ErrorAction,\n} from '../Error';\n\nimport {actionWrapper, findMatchInEnum, getMergedProps, ActionSet} from '../helper';\nimport {ActionSetProps, Group, MetaAction} from '../types';\n\nimport {\n  Action,\n  ActionType,\n  BaseOptions,\n  CancelPayload,\n  ClosePayload,\n  Options,\n  Payload,\n  ProductOptions,\n  ResourceSelection,\n  ResourceType,\n  SelectPayload,\n} from './types';\n\nexport const GROUP = Group.ResourcePicker;\n\nexport interface ActionBase extends MetaAction {\n  readonly group: typeof GROUP;\n}\n\nexport interface SelectAction extends ActionBase {\n  readonly type: typeof ActionType.SELECT;\n  readonly payload: SelectPayload;\n}\n\nexport interface UpdateAction extends ActionBase {\n  readonly type: typeof ActionType.UPDATE;\n  readonly payload: Payload;\n}\n\nexport interface CancelAction extends ActionBase {\n  readonly type: typeof ActionType.CANCEL;\n}\n\nexport type CloseAction = CancelAction;\n\nexport interface OpenAction extends ActionBase {\n  readonly type: typeof ActionType.OPEN;\n  readonly payload: Payload;\n}\n\nexport type ResourcePickerAction =\n  | SelectAction\n  | UpdateAction\n  | CancelAction\n  | OpenAction\n  | MetaAction;\n\nexport function select(payload: SelectPayload): SelectAction {\n  return actionWrapper({\n    payload,\n    group: GROUP,\n    type: ActionType.SELECT,\n  });\n}\n\nexport function open(payload: Payload): OpenAction {\n  return actionWrapper({\n    payload,\n    group: GROUP,\n    type: ActionType.OPEN,\n  });\n}\n\nexport function cancel(payload: CancelPayload): CancelAction {\n  return actionWrapper({\n    payload,\n    group: GROUP,\n    type: ActionType.CANCEL,\n  });\n}\n\nexport function close(payload: ClosePayload): CloseAction {\n  return actionWrapper({\n    payload,\n    group: GROUP,\n    type: ActionType.CANCEL,\n  });\n}\n\nexport function update(payload: Payload): UpdateAction {\n  return actionWrapper({\n    payload,\n    group: GROUP,\n    type: ActionType.UPDATE,\n  });\n}\n\nfunction isValidResourceType(resourceType: string) {\n  return findMatchInEnum(ResourceType, resourceType);\n}\n\nexport function validationError(action: ResourcePickerAction): undefined | ErrorAction {\n  let payload;\n  switch (action.type) {\n    case ActionType.UPDATE:\n    case ActionType.OPEN:\n      payload = (action as OpenAction).payload;\n\n      return payload !== undefined &&\n        payload.id !== undefined &&\n        typeof payload.id === 'string' &&\n        isValidResourceType(payload.resourceType)\n        ? undefined\n        : invalidPayload(action);\n\n    case ActionType.SELECT:\n      payload = (action as SelectAction).payload;\n\n      return payload !== undefined &&\n        payload.id !== undefined &&\n        typeof payload.id === 'string' &&\n        Array.isArray(payload.selection)\n        ? undefined\n        : invalidPayload(action);\n\n    case ActionType.CANCEL:\n    case ActionType.CLOSE:\n      return undefined;\n\n    default:\n      return invalidActionType(action);\n  }\n}\n\nexport class ResourcePicker extends ActionSet\n  implements ActionSetProps<Options | ProductOptions, Payload> {\n  readonly resourceType!: ResourceType;\n  initialQuery?: string;\n  selectMultiple?: boolean;\n  selection: ResourceSelection[] = [];\n  showHidden?: boolean;\n  showVariants?: boolean;\n\n  constructor(\n    app: ClientApplication<any>,\n    options: Options | ProductOptions,\n    resourceType: ResourceType,\n  ) {\n    super(app, GROUP, GROUP);\n\n    if (!isValidResourceType(resourceType)) {\n      const errorAction = actionWrapper({\n        group: GROUP,\n        payload: {id: this.id, ...options, resourceType},\n      });\n      throwError(ErrorActionType.INVALID_OPTIONS, errorAction);\n    }\n\n    this.resourceType = resourceType;\n    this.set(options, false);\n  }\n\n  get payload() {\n    return {\n      ...this.options,\n      id: this.id,\n      resourceType: this.resourceType,\n    };\n  }\n\n  get options() {\n    const options: Options = {\n      initialQuery: this.initialQuery,\n      selectMultiple: this.selectMultiple,\n      showHidden: this.showHidden,\n    };\n\n    if (this.resourceType === ResourceType.Product) {\n      const productOptions: ProductOptions = {\n        ...options,\n        showVariants: this.showVariants,\n      };\n\n      return productOptions;\n    }\n\n    return options;\n  }\n\n  set(options: Partial<Options | ProductOptions>, shouldUpdate = true) {\n    const mergedOptions: ProductOptions = getMergedProps(this.options, options);\n    const {\n      initialQuery,\n      showHidden = false,\n      showVariants = true,\n      selectMultiple = true,\n    } = mergedOptions;\n\n    this.initialQuery = initialQuery;\n    this.showHidden = Boolean(showHidden);\n    this.showVariants = Boolean(showVariants);\n    this.selectMultiple = Boolean(selectMultiple);\n\n    if (shouldUpdate) {\n      this.update();\n    }\n\n    return this;\n  }\n\n  dispatch(action: Action, selection?: ResourceSelection[]) {\n    if (action === Action.OPEN) {\n      this.open();\n    } else if (action === Action.UPDATE) {\n      this.update();\n    } else if (action === Action.CLOSE || action === Action.CANCEL) {\n      this.cancel();\n    } else if (action === Action.SELECT) {\n      this.selection = selection as ResourceSelection[];\n      this.app.dispatch(select({id: this.id, selection: this.selection}));\n    } else {\n      throwError(\n        ErrorActionType.INVALID_ACTION_TYPE,\n        actionWrapper({\n          group: this.group,\n          type: action,\n        }),\n      );\n    }\n\n    return this;\n  }\n\n  protected update() {\n    this.app.dispatch(update(this.payload));\n  }\n\n  protected open() {\n    this.app.dispatch(open(this.payload));\n  }\n\n  protected cancel() {\n    this.app.dispatch(cancel({id: this.id}));\n  }\n\n  protected close() {\n    this.cancel();\n  }\n}\n\nexport const create = (app: ClientApplication<any>, baseOptions: BaseOptions) => {\n  const {resourceType, options = {}} = baseOptions;\n\n  return new ResourcePicker(app, options, resourceType);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/ResourcePicker/actions.ts","export * from './actions';\nexport * from './types';\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/TitleBar/index.ts","/**\n * @module TitleBar\n */\n\nimport {\n  clickButton,\n  getSafeButtonProps,\n  isValidButtonProps,\n  validationError as buttonValidationError,\n  ActionType as ButtonActionType,\n  Button,\n  Payload as ButtonPayload,\n} from '../Button';\nimport {\n  getSafeButtonGroupProps,\n  isGroupedButtonPayload,\n  isValidButtonGroupProps,\n  validationError as buttonGroupValidationError,\n  ActionType as ButtonGroupActionType,\n  ButtonGroup,\n  Payload as ButtonGroupPayload,\n} from '../ButtonGroup';\n\nimport {ClientApplication} from '../../client';\nimport {getGroupedButton} from '../buttonGroupHelper';\nimport {getSingleButton} from '../buttonHelper';\nimport {\n  actionWrapper,\n  getMergedProps,\n  updateActionFromPayload,\n  ActionSetWithChildren,\n} from '../helper';\nimport {ActionSetProps, ClickAction, ComponentType, Group, MetaAction} from '../types';\nimport {\n  invalidActionType,\n  invalidPayload,\n  throwError,\n  ActionType as ErrorActionType,\n  ErrorAction,\n  Message as ErrorMessage,\n} from '../Error';\nimport {\n  Action,\n  ActionType,\n  ButtonsActionType as TitleBarButtonActionType,\n  ButtonsOptions as TitleBarButtonsOptions,\n  ButtonsPayload as TitleBarButtonsPayload,\n  Options,\n  Payload,\n} from './types';\nexport const GROUP = Group.TitleBar;\n\nconst TITLEBAR_BUTTON_PROPS = {\n  group: GROUP,\n  subgroups: ['Buttons'],\n};\n\nconst BREADCRUMB_BUTTON_PROPS = {\n  group: GROUP,\n  subgroups: ['Breadcrumbs'],\n  type: ComponentType.Button,\n};\n\nexport interface UpdateAction extends MetaAction {\n  readonly group: typeof GROUP;\n  payload: Payload;\n}\n\nexport type TitleBarAction = UpdateAction | ClickAction | MetaAction;\n\nexport function clickActionButton(id: string, payload?: any): ClickAction {\n  const type = ComponentType.Button;\n  const component = {id, type, ...TITLEBAR_BUTTON_PROPS};\n\n  return clickButton(GROUP, component, payload);\n}\n\nexport function clickBreadcrumb(id: string, payload?: any): ClickAction {\n  const component = {id, ...BREADCRUMB_BUTTON_PROPS};\n\n  return clickButton(GROUP, component, payload);\n}\n\nexport function update(payload: Payload): UpdateAction {\n  return actionWrapper({\n    payload,\n    group: GROUP,\n    type: ActionType.UPDATE,\n  });\n}\n\nexport function isValidTitleBarPayload(payload: Payload) {\n  if (!payload) {\n    return false;\n  }\n\n  return (\n    (payload.id === undefined || typeof payload.id === 'string') && isValidTitleBarProps(payload)\n  );\n}\n\nexport function isValidTitleBarProps(props: Payload | Options) {\n  return (\n    (typeof props.title === 'string' || props.title === undefined) &&\n    isValidTitleBarButtons(props.buttons) &&\n    isValidTitleBarBreadcrumbs(props.breadcrumbs)\n  );\n}\n\nexport function isValidTitleBarButtons(buttons?: TitleBarButtonsPayload) {\n  if (buttons === undefined) {\n    return true;\n  }\n\n  if (typeof buttons !== 'object' || Array.isArray(buttons)) {\n    return false;\n  }\n\n  const primary = buttons.primary;\n  const secondary = buttons.secondary;\n\n  if (primary && !isValidButtonProps(primary)) {\n    return false;\n  }\n\n  if (secondary !== undefined && !Array.isArray(secondary)) {\n    return false;\n  }\n\n  if (Array.isArray(secondary)) {\n    for (const button of secondary) {\n      if (isGroupedButtonPayload(button) && isValidButtonGroupProps(button)) {\n        continue;\n      } else if (!isGroupedButtonPayload(button) && isValidButtonProps(button)) {\n        continue;\n      }\n\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function isValidTitleBarBreadcrumbs(button?: ButtonPayload) {\n  if (button === undefined || isValidButtonProps(button)) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function validationError(action: TitleBarAction): undefined | ErrorAction {\n  let payload;\n  switch (action.type) {\n    case ActionType.UPDATE:\n      payload = (action as UpdateAction).payload;\n      if (payload === undefined) {\n        return invalidPayload(action, ErrorMessage.MISSING_PAYLOAD);\n      }\n\n      if (typeof payload.id !== 'string') {\n        return invalidPayload(action, ErrorMessage.INVALID_PAYLOAD_ID);\n      }\n\n      return isValidTitleBarPayload(payload) ? undefined : invalidPayload(action);\n\n    case TitleBarButtonActionType.BUTTON_CLICK:\n    case TitleBarButtonActionType.BREADCRUMBS_CLICK:\n      return buttonValidationError({...action, type: ButtonActionType.CLICK});\n\n    case TitleBarButtonActionType.BUTTON_UPDATE:\n    case TitleBarButtonActionType.BREADCRUMBS_UPDATE:\n      return buttonValidationError({...action, type: ButtonActionType.UPDATE});\n\n    case TitleBarButtonActionType.BUTTON_GROUP_UPDATE:\n      return buttonGroupValidationError({...action, type: ButtonGroupActionType.UPDATE});\n\n    default:\n      return invalidActionType(action);\n  }\n}\n\nexport class TitleBar extends ActionSetWithChildren implements ActionSetProps<Options, Payload> {\n  title?: string;\n  primary?: ButtonPayload;\n  secondary?: (ButtonPayload | ButtonGroupPayload)[];\n  primaryOptions?: Button;\n  secondaryOptions?: (ButtonGroup | Button)[];\n  breadcrumb?: ButtonPayload;\n  breadcrumbsOption?: Button;\n\n  constructor(app: ClientApplication<any>, options: Options) {\n    super(app, GROUP, GROUP);\n    // Trigger 'update' on creation\n    this.set(options);\n  }\n\n  get buttons(): TitleBarButtonsPayload | undefined {\n    if (!this.primary && !this.secondary) {\n      return undefined;\n    }\n\n    return {\n      primary: this.primary,\n      secondary: this.secondary,\n    };\n  }\n\n  get buttonsOptions(): TitleBarButtonsOptions | undefined {\n    if (!this.primaryOptions && !this.secondaryOptions) {\n      return undefined;\n    }\n\n    return {\n      primary: this.primaryOptions,\n      secondary: this.secondaryOptions,\n    };\n  }\n\n  get options(): Options {\n    return {\n      breadcrumbs: this.breadcrumbsOption,\n      buttons: this.buttonsOptions,\n      title: this.title,\n    };\n  }\n\n  get payload(): Payload {\n    return {\n      ...this.options,\n      breadcrumbs: this.breadcrumb,\n      buttons: this.buttons,\n      id: this.id,\n    };\n  }\n\n  set(options: Partial<Options>, shouldUpdate = true) {\n    const mergedOptions: Options = getMergedProps(this.options, options);\n    const {title, buttons, breadcrumbs} = mergedOptions;\n    if (!this.validateOptions(mergedOptions)) {\n      return this;\n    }\n\n    this.title = title;\n    this.setBreadcrumbs(breadcrumbs);\n    this.setPrimaryButton(buttons ? buttons.primary : undefined);\n    this.setSecondaryButton(buttons ? buttons.secondary : undefined);\n\n    if (shouldUpdate) {\n      this.dispatch(Action.UPDATE);\n    }\n\n    return this;\n  }\n\n  dispatch(action: Action) {\n    switch (action) {\n      case Action.UPDATE:\n        this.app.dispatch(update(this.payload));\n        break;\n      default:\n        throwError(\n          ErrorActionType.INVALID_ACTION_TYPE,\n          actionWrapper({\n            group: this.group,\n            type: action,\n          }),\n        );\n    }\n\n    return this;\n  }\n\n  protected getButton(\n    button: Button | ButtonGroup,\n    subgroups: string[],\n    updateCb: (newPayload: ButtonPayload | ButtonGroupPayload) => void,\n  ): ButtonPayload | ButtonGroupPayload {\n    if (button instanceof ButtonGroup) {\n      return getGroupedButton(this, button, subgroups, updateCb);\n    }\n\n    return getSingleButton(this, button, subgroups, updateCb);\n  }\n\n  protected updatePrimaryButton(newPayload: ButtonPayload) {\n    if (!this.primary) {\n      return;\n    }\n    if (updateActionFromPayload(this.primary, getSafeButtonProps(newPayload))) {\n      this.dispatch(Action.UPDATE);\n    }\n  }\n\n  protected updateSecondaryButtons(newPayload: ButtonPayload | ButtonGroupPayload) {\n    if (!this.secondary) {\n      return;\n    }\n    const buttonToUpdate = this.secondary.find(action => action.id === newPayload.id);\n    if (!buttonToUpdate) {\n      return;\n    }\n\n    let updated = false;\n    if (isGroupedButtonPayload(newPayload)) {\n      updated = updateActionFromPayload(buttonToUpdate, getSafeButtonGroupProps(newPayload));\n    } else {\n      updated = updateActionFromPayload(buttonToUpdate, getSafeButtonProps(newPayload));\n    }\n    if (updated) {\n      this.dispatch(Action.UPDATE);\n    }\n  }\n\n  protected updateBreadcrumbButton(newPayload: ButtonPayload) {\n    if (!this.breadcrumb) {\n      return;\n    }\n    if (updateActionFromPayload(this.breadcrumb, getSafeButtonProps(newPayload))) {\n      this.dispatch(Action.UPDATE);\n    }\n  }\n\n  protected setPrimaryButton(newOptions?: Button) {\n    this.primaryOptions = this.getChildButton(newOptions, this.primaryOptions);\n    this.primary = this.primaryOptions\n      ? this.getButton(\n          this.primaryOptions,\n          TITLEBAR_BUTTON_PROPS.subgroups,\n          this.updatePrimaryButton,\n        )\n      : undefined;\n  }\n\n  protected setSecondaryButton(newOptions?: (ButtonGroup | Button)[]) {\n    const newButtons = newOptions || [];\n    const currentButtons = this.secondaryOptions || [];\n    this.secondaryOptions = this.getUpdatedChildActions(newButtons, currentButtons);\n\n    this.secondary = this.secondaryOptions\n      ? this.secondaryOptions.map(action =>\n          this.getButton(action, TITLEBAR_BUTTON_PROPS.subgroups, this.updateSecondaryButtons),\n        )\n      : undefined;\n  }\n\n  protected setBreadcrumbs(breadcrumb?: Button) {\n    this.breadcrumbsOption = this.getChildButton(breadcrumb, this.breadcrumbsOption);\n    this.breadcrumb = this.breadcrumbsOption\n      ? this.getButton(\n          this.breadcrumbsOption,\n          BREADCRUMB_BUTTON_PROPS.subgroups,\n          this.updateBreadcrumbButton,\n        )\n      : undefined;\n  }\n\n  protected getChildButton(newAction: undefined | Button, currentAction: undefined | Button) {\n    const newButtons = newAction ? [newAction] : [];\n    const currentButtons = currentAction ? [currentAction] : [];\n    const updatedButton = this.getUpdatedChildActions(newButtons, currentButtons);\n\n    return updatedButton ? updatedButton[0] : undefined;\n  }\n\n  private validateOptions(options: Options) {\n    const props = {id: this.id, ...options};\n    if (!isValidTitleBarProps(options)) {\n      const errorAction = update(props);\n      throwError(ErrorActionType.INVALID_OPTIONS, errorAction);\n\n      return false;\n    }\n\n    return true;\n  }\n}\n\nexport function create(app: ClientApplication<any>, options: Options) {\n  return new TitleBar(app, options);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/TitleBar/actions.ts","import {Payload as ButtonPayload} from '../actions/Button';\nimport {\n  Action as ButtonGroupAction,\n  ButtonGroup,\n  Payload as ButtonGroupPayload,\n} from '../actions/ButtonGroup';\nimport {ActionSetWithChildren} from './helper';\n\nexport function getGroupedButton(\n  action: ActionSetWithChildren,\n  button: ButtonGroup,\n  subgroups: string[],\n  updateCb: (newPayload: ButtonPayload | ButtonGroupPayload) => void,\n): ButtonGroupPayload {\n  action.addChild(button, action.group, subgroups);\n\n  const {id, label, disabled, buttons} = button;\n\n  action.subscribeToChild(button, ButtonGroupAction.UPDATE, updateCb);\n\n  return {id, label, buttons, disabled};\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/buttonGroupHelper.ts"],"sourceRoot":""}