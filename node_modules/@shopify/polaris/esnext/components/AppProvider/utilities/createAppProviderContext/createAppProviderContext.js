import { noop } from '@shopify/javascript-utilities/other';
import createApp, { getShopOrigin } from '@shopify/app-bridge';
import { isServer } from '@shopify/react-utilities/target';
import { StickyManager } from '../withSticky';
import ScrollLockManager from '../ScrollLockManager';
import Intl from '../Intl';
import Link from '../Link';
export default function createAppProviderContext({ i18n, linkComponent, apiKey, shopOrigin, forceRedirect, stickyManager, scrollLockManager, subscribe = noop, unsubscribe = noop, } = {}) {
    const intl = new Intl(i18n);
    const link = new Link(linkComponent);
    const appBridge = apiKey && !isServer
        ? createApp({
            apiKey,
            shopOrigin: shopOrigin || getShopOrigin(),
            forceRedirect,
        })
        : undefined;
    return {
        polaris: {
            intl,
            link,
            stickyManager: stickyManager || new StickyManager(),
            scrollLockManager: scrollLockManager || new ScrollLockManager(),
            subscribe,
            unsubscribe,
            appBridge,
        },
    };
}
